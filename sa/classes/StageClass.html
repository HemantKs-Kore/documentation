<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>koreai documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">koreai documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content class">
                   <div class="content-data">












<ol class="breadcrumb">
  <li>Classes</li>
  <li >StageClass</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>apps/searchassist/src/app/modules/workbench/workbench.component.ts</code>
        </p>






            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#category" >category</a>
                            </li>
                            <li>
                                <a href="#condition" >condition</a>
                            </li>
                            <li>
                                <a href="#config" >config</a>
                            </li>
                            <li>
                                <a href="#enable" >enable</a>
                            </li>
                            <li>
                                <a href="#name" >name</a>
                            </li>
                            <li>
                                <a href="#type" >type</a>
                            </li>
                        </ul>
                    </td>
                </tr>






        </tbody>
    </table>
</section>


            <section>
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="category"></a>
                    <span class="name">
                        <span ><b>category</b></span>
                        <a href="#category"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="3093" class="link-to-prism">apps/searchassist/src/app/modules/workbench/workbench.component.ts:3093</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="condition"></a>
                    <span class="name">
                        <span ><b>condition</b></span>
                        <a href="#condition"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="3096" class="link-to-prism">apps/searchassist/src/app/modules/workbench/workbench.component.ts:3096</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="config"></a>
                    <span class="name">
                        <span ><b>config</b></span>
                        <a href="#config"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>{}</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="3097" class="link-to-prism">apps/searchassist/src/app/modules/workbench/workbench.component.ts:3097</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="enable"></a>
                    <span class="name">
                        <span ><b>enable</b></span>
                        <a href="#enable"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="3095" class="link-to-prism">apps/searchassist/src/app/modules/workbench/workbench.component.ts:3095</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="name"></a>
                    <span class="name">
                        <span ><b>name</b></span>
                        <a href="#name"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="3092" class="link-to-prism">apps/searchassist/src/app/modules/workbench/workbench.component.ts:3092</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="type"></a>
                    <span class="name">
                        <span ><b>type</b></span>
                        <a href="#type"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="3094" class="link-to-prism">apps/searchassist/src/app/modules/workbench/workbench.component.ts:3094</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
</section>







    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { EMPTY_SCREEN } from &#x27;./../../modules/empty-screen/empty-screen.constants&#x27;;
import {
  Component,
  ElementRef,
  OnInit,
  ViewChild,
  OnDestroy,
  AfterViewInit,
} from &#x27;@angular/core&#x27;;
import { MatDialog } from &#x27;@angular/material/dialog&#x27;;
import { ENTER, COMMA } from &#x27;@angular/cdk/keycodes&#x27;;
import { MatChipInputEvent } from &#x27;@angular/material/chips&#x27;;
import { ConfirmationDialogComponent } from &#x27;../../helpers/components/confirmation-dialog/confirmation-dialog.component&#x27;;
import { KRModalComponent } from &#x27;../../shared/kr-modal/kr-modal.component&#x27;;
import { CdkDragDrop, moveItemInArray } from &#x27;@angular/cdk/drag-drop&#x27;;
import * as _ from &#x27;underscore&#x27;;
import { of, interval, Subject, Subscription } from &#x27;rxjs&#x27;;
import { startWith } from &#x27;rxjs/operators&#x27;;
import { MatAutocompleteSelectedEvent } from &#x27;@angular/material/autocomplete&#x27;;
import { NgbTooltip } from &#x27;@ng-bootstrap/ng-bootstrap&#x27;;
import { FormControl } from &#x27;@angular/forms&#x27;;
import { UpgradePlanComponent } from &#x27;../../helpers/components/upgrade-plan/upgrade-plan.component&#x27;;
import { NotificationService } from &#x27;@kore.apps/services/notification.service&#x27;;
import { ServiceInvokerService } from &#x27;@kore.apps/services/service-invoker.service&#x27;;
import { WorkflowService } from &#x27;@kore.apps/services/workflow.service&#x27;;
import { AuthService } from &#x27;@kore.apps/services/auth.service&#x27;;
import { AppSelectionService } from &#x27;@kore.apps/services/app.selection.service&#x27;;
import { InlineManualService } from &#x27;@kore.apps/services/inline-manual.service&#x27;;
import { MixpanelServiceService } from &#x27;@kore.apps/services/mixpanel-service.service&#x27;;
declare const $: any;
@Component({
  selector: &#x27;app-workbench&#x27;,
  templateUrl: &#x27;./workbench.component.html&#x27;,
  styleUrls: [&#x27;./workbench.component.scss&#x27;],
})
export class WorkbenchComponent implements OnInit, OnDestroy, AfterViewInit {
  emptyScreen &#x3D; EMPTY_SCREEN.INDICES_WORKBENCH;
  selectedApp: any &#x3D; {};
  searchImgSrc: any &#x3D; &#x27;assets/icons/search_gray.svg&#x27;;
  searchFocusIn &#x3D; false;
  activeClose &#x3D; false;
  showSearch &#x3D; false;
  searchSimulator: any &#x3D; &#x27;&#x27;;
  entityTypePayload: any &#x3D; [];
  basic_fieldName: any &#x3D; &#x27;&#x27;;
  search_basic_fieldName: any &#x3D; &#x27;&#x27;;
  search_basic_fieldName1: any &#x3D; &#x27;&#x27;;
  search_basic_fieldName2: any &#x3D; &#x27;&#x27;;
  search_basic_fieldName3: any &#x3D; &#x27;&#x27;;
  search_basic_fieldName4: any &#x3D; &#x27;&#x27;;
  savingConfig;
  reIndexing;
  simulating;
  serachIndexId;
  indexPipelineId;
  pipeline;
  addFieldModalPopRef: any;
  loadingContent &#x3D; true;
  indexStages: any &#x3D; {};
  indexMappings &#x3D; [];
  newStageObj: any &#x3D; {
    addNew: false,
  };
  isHoverd &#x3D; false;
  fields: any &#x3D; [];
  newfieldsData: any &#x3D; [];
  loadingFields &#x3D; true;
  isActiveAll &#x3D; true;
  showStageType &#x3D; false;
  selectedStage;
  changesDetected;
  currentEditIndex: any &#x3D; -1;
  tempConfigObj;
  any &#x3D; {};
  selectedStageIndex: any &#x3D; -1;
  pollingSubscriber: any &#x3D; null;
  submitted &#x3D; false;
  showNewStageType &#x3D; false;
  loadingSimulate &#x3D; true;
  subscription: Subscription;
  @ViewChild(&#x27;tleft&#x27;) public tooltip: NgbTooltip;
  @ViewChild(&#x27;addFieldModalPop&#x27;) addFieldModalPop: KRModalComponent;
  @ViewChild(&#x27;suggestedInput&#x27;) suggestedInput: ElementRef&lt;HTMLInputElement&gt;;
  @ViewChild(&#x27;customScriptCodeMirror&#x27;) codemirror: any;
  @ViewChild(&#x27;containInput&#x27;) containInput: ElementRef&lt;HTMLInputElement&gt;;
  newStage: any &#x3D; {
    name: &#x27;My Mapping&#x27;,
  };
  newFieldObj: any &#x3D; null;
  defaultStageTypes: any &#x3D; [];
  selectedMapping: any &#x3D; {};
  actionItmes: any &#x3D; [
    { type: &#x27;set&#x27; },
    { type: &#x27;rename&#x27; },
    { type: &#x27;copy&#x27; },
    { type: &#x27;Delete&#x27; },
  ];
  newMappingObj: any &#x3D; {};
  sourceType &#x3D; &#x27;all&#x27;;
  defaultStageTypesObj: any &#x3D; {
    field_mapping: {
      name: &#x27;Field Mapping&#x27;,
    },
    entity_extraction: {
      name: &#x27;Entity Extraction&#x27;,
    },
    keyword_extraction: {
      name: &#x27;Keyword Extraction&#x27;,
    },
    traits_extraction: {
      name: &#x27;Traits Extraction&#x27;,
    },
    custom_script: {
      name: &#x27;Custom Script&#x27;,
    },
    semantic_meaning: {
      name: &#x27;Semantic Meaning&#x27;,
    },
    exclude_document: {
      name: &#x27;Exclude Document&#x27;,
    },
    snippet_extraction: {
      name: &#x27;Snippet Extraction&#x27;,
    },
  };
  entityNlp &#x3D; [
    { title: &#x27;Date&#x27;, value: &#x27;Date&#x27;, isDepricated: false },
    { title: &#x27;Time&#x27;, value: &#x27;Time&#x27;, isDepricated: false },
    { title: &#x27;Location&#x27;, value: &#x27;Location&#x27;, isDepricated: false },
    {
      title: &#x27;GeoPoliticalEntities&#x27;,
      value: &#x27;GeoPoliticalEntities&#x27;,
      isDepricated: false,
    },
    {
      title: &#x27;Company Name or Organization&#x27;,
      value: &#x27;Company Name or Organization&#x27;,
      isDepricated: false,
    },
    { title: &#x27;Currency&#x27;, value: &#x27;Currency&#x27;, isDepricated: false },
    { title: &#x27;Person Name&#x27;, value: &#x27;Person Name&#x27;, isDepricated: false },
    { title: &#x27;Number&#x27;, value: &#x27;Number&#x27;, isDepricated: false },
    { title: &#x27;Percentage&#x27;, value: &#x27;Percentage&#x27;, isDepricated: false },
    //Reverting for FLY - 4688
    //Orignal
    // { title: &#x27;Date&#x27;, value: &#x27;DATE&#x27;, isDepricated: false },
    // { title: &#x27;Time&#x27;, value: &#x27;TIME&#x27;, isDepricated: false },
    // // { title: &#x27;URL&#x27;, value: &#x27;URL&#x27;, isDepricated: false },
    // // { title: &#x27;Email&#x27;, value: &#x27;EMAIL&#x27;, isDepricated: false },
    // { title: &#x27;Location&#x27;, value: &#x27;LOC&#x27;, isDepricated: false },
    // { title: &#x27;GeoPoliticalEntities&#x27;, value: &#x27;GPE&#x27;, isDepricated: false },
    // { title: &#x27;Company Name or Organization&#x27;, value: &#x27;ORG&#x27;, isDepricated: false },
    // { title: &#x27;Currency&#x27;, value: &#x27;MONEY&#x27;, isDepricated: false },
    // { title: &#x27;Person Name&#x27;, value: &#x27;PERSON&#x27;, isDepricated: false },
    // { title: &#x27;Number&#x27;, value: &#x27;CARDINAL&#x27;, isDepricated: false },
    // { title: &#x27;Percentage&#x27;, value: &#x27;PERCENT&#x27;, isDepricated: false }
    //Orignal
    /** Existing  */
    // { title: &#x27;Date&#x27;, value: &#x27;date&#x27;, isDepricated: false },
    // { title: &#x27;Time&#x27;, value: &#x27;time&#x27;, isDepricated: false },
    // { title: &#x27;Date Time&#x27;, value: &#x27;datetime&#x27;, isDepricated: false },
    // { title: &#x27;Date Period&#x27;, value: &#x27;dateperiod&#x27;, isDepricated: false },
    // { title: &#x27;URL&#x27;, value: &#x27;url&#x27;, isDepricated: false },
    // { title: &#x27;Email&#x27;, value: &#x27;email&#x27;, isDepricated: false },
    // { title: &#x27;Location&#x27;, value: &#x27;location&#x27;, isDepricated: false },
    // { title: &#x27;City&#x27;, value: &#x27;city&#x27;, isDepricated: false },
    // { title: &#x27;Country&#x27;, value: &#x27;country&#x27;, isDepricated: false },
    // { title: &#x27;Color&#x27;, value: &#x27;color&#x27;, isDepricated: false },
    // { title: &#x27;Company Name or Organization Name&#x27;, value: &#x27;company_name&#x27;, isDepricated: false },
    // { title: &#x27;Currency&#x27;, value: &#x27;currencyv2&#x27;, isDepricated: false },
    // { title: &#x27;Person Name&#x27;, value: &#x27;person_name&#x27;, isDepricated: false },
    // { title: &#x27;Number&#x27;, value: &#x27;number&#x27;, isDepricated: false },
    // { title: &#x27;Percentage&#x27;, value: &#x27;percentage&#x27;, isDepricated: false },
    // { title: &#x27;Phone Number&#x27;, value: &#x27;phone_number&#x27;, isDepricated: false },
    // { title: &#x27;Zip Code&#x27;, value: &#x27;zipcode&#x27;, isDepricated: false },
    // { title: &#x27;Quantity&#x27;, value: &#x27;quantityv2&#x27;, isDepricated: false },
    // { title: &#x27;Address&#x27;, value: &#x27;address&#x27;, isDepricated: false },
    // { title: &#x27;Airport&#x27;, value: &#x27;airport&#x27;, isDepricated: false },
    /** Existing  */
    // { title: &#x27;Attachment(Image / File)&#x27;, value: &#x27;attachment&#x27;, isDepricated: false },
    // {&quot;title&quot;: &quot;City (Advanced)&quot;, &quot;value&quot;: &quot;cityAdv&quot;, &quot;isDepricated&quot;: false},
    // {&quot;title&quot;: &quot;City with Geo Coordinates&quot;, &quot;value&quot;: &quot;city_coordinates&quot;},
    // {&quot;title&quot;: &quot;City&quot;, &quot;value&quot;: &quot;city&quot;},
    // { title: &#x27;Currency(Deprecated)&#x27;, value: &#x27;currency&#x27;, isDepricated: true },
    // { title: &#x27;Custom&#x27;, value: &#x27;regex&#x27;, isDepricated: false },
    // { title: &#x27;Composite&#x27;, value: &#x27;composite&#x27;, isDepricated: false },
    // { title: &#x27;Description&#x27;, value: &#x27;description&#x27;, isDepricated: false },
    // {&quot;title&quot;: &quot;JSON Object&quot;, &quot;value&quot;: &quot;json_object&quot;, &quot;isDepricated&quot;: false},
    // { title: &#x27;List of items (enumerated)&#x27;, value: &#x27;list_of_values&#x27;, isDepricated: false },
    // { title: &#x27;List of items (lookup)&#x27;, value: &#x27;list_of_items_lookup&#x27;, isDepricated: false },
    // {&quot;title&quot;: &quot;Password&quot;, &quot;value&quot;: &quot;password&quot;, &quot;isDepricated&quot;: false},
    // {&quot;title&quot;: &quot;Quantity(Number with unit of measure)&quot;, &quot;value&quot;: &quot;quantity&quot;},
    // { title: &#x27;String&#x27;, value: &#x27;label&#x27;, isDepricated: false },
    // { title: &#x27;Time Zone&#x27;, value: &#x27;timezone&#x27;, isDepricated: false },

    // { title: &#x27;From - number(minimum of a range)(Deprecated)&#x27;, value: &#x27;from_number&#x27;, isDepricated: true },
    // { title: &#x27;To - number(maximum of a range, limit)(Deprecated)&#x27;, value: &#x27;to_number&#x27;, isDepricated: true },
    // { title: &#x27;Quantity(Deprecated)&#x27;, value: &#x27;quantity&#x27;, isDepricated: true }
    // {&quot;title&quot;: &quot;City&quot;, &quot;value&quot;: &quot;city&quot;},
  ];
  simulteObj: any &#x3D; {
    sourceType: this.sourceType,
    docCount: 5,
    showSimulation: false,
    simulate: this.defaultStageTypesObj,
  };
  payloadValidationObj: any &#x3D; {
    valid: true,
    invalidObjs: {},
  };
  entitySuggestionTags: any &#x3D; [
    &#x27;Entity 1&#x27;,
    &#x27;Entity 2&#x27;,
    &#x27;Entity 3&#x27;,
    &#x27;Entity 4&#x27;,
    &#x27;Entity 5&#x27;,
  ];
  traitsSuggesitions: any &#x3D; [];
  searchFields: any &#x3D; &#x27;&#x27;;
  pipelineCopy;
  fieldAutoSuggestion: any &#x3D; [];
  codeMirrorOptions: any &#x3D; {
    theme: &#x27;neo&#x27;,
    mode: &#x27;application/ld+json&#x27;,
    lineNumbers: false,
    lineWrapping: true,
    foldGutter: true,
    gutters: [&#x27;CodeMirror-foldgutter&#x27;],
    autoCloseBrackets: true,
    matchBrackets: true,
    lint: false,
    readOnly: true,
  };
  customScriptCodeMirrorOptions: any &#x3D; {
    theme: &#x27;neo&#x27;,
    mode: &#x27;javascript&#x27;,
    lineNumbers: true,
    lineWrapping: true,
    foldGutter: true,
    gutters: [
      &#x27;CodeMirror-linenumbers&#x27;,
      &#x27;CodeMirror-foldgutter&#x27;,
      &#x27;CodeMirror-lint-markers&#x27;,
    ],
    autoCloseBrackets: true,
    matchBrackets: true,
    lint: false,
    indentUnit: 2,
  };
  simulateJson;
  filteredSimulatorRes: any;
  componentType &#x3D; &#x27;addData&#x27;;
  // containCondition: any[] &#x3D; [];
  selectable &#x3D; true;
  removable &#x3D; true;
  containCtrl &#x3D; new FormControl();
  operators &#x3D; [
    { name: &#x27;Exists&#x27;, value: &#x27;exists&#x27; },
    { name: &#x27;Does Not Exist&#x27;, value: &#x27;doesNotExist&#x27; },
    { name: &#x27;EqualsTo&#x27;, value: &#x27;equalsTo&#x27; },
    { name: &#x27;Not Equals To&#x27;, value: &#x27;notEqualsTo&#x27; },
    { name: &#x27;Contains&#x27;, value: &#x27;contains&#x27; },
    { name: &#x27;DoesNot Contain&#x27;, value: &#x27;doesNotContain&#x27; },
  ];
  conditionArray: any &#x3D; [];
  conditionObj: any &#x3D; { fieldId: &#x27;&#x27;, operator: &#x27;&#x27;, value: [] };
  selectedConditionType &#x3D; &#x27;basic&#x27;;
  modifiedStages &#x3D; {
    createdStages: [],
    deletedStages: [],
  };
  sourceList: any &#x3D; [
    &#x27;all&#x27;,
    &#x27;faq&#x27;,
    &#x27;web&#x27;,
    &#x27;file&#x27;,
    &#x27;data&#x27;,
    &#x27;serviceNow&#x27;,
    &#x27;confluenceCloud&#x27;,
    &#x27;confluenceServer&#x27;,
    &#x27;zendesk&#x27;,
    &#x27;sharepointOnline&#x27;,
  ];
  readonly separatorKeysCodes: number[] &#x3D; [ENTER, COMMA];
  entityName: string;
  constructor(
    public workflowService: WorkflowService,
    private service: ServiceInvokerService,
    private notificationService: NotificationService,
    public dialog: MatDialog,
    public authService: AuthService,
    private appSelectionService: AppSelectionService,
    public inlineManual: InlineManualService,
    public mixpanel: MixpanelServiceService
  ) {}
  @ViewChild(&#x27;plans&#x27;) plans: UpgradePlanComponent;
  ngOnInit(): void {
    this.selectedApp &#x3D; this.workflowService.selectedApp();
    // console.log(&quot;this.selectedApp&quot;, this.selectedApp)
    if (
      (this.selectedApp || {}).searchIndexes &amp;&amp;
      (this.selectedApp || {}).searchIndexes.length
    ) {
      this.serachIndexId &#x3D; this.selectedApp.searchIndexes[0]._id;
      //this.indexPipelineId &#x3D; this.selectedApp.searchIndexes[0].pipelineId;
      this.indexPipelineId &#x3D; this.workflowService.selectedIndexPipeline();
    }
    this.loadIndexAll();
    // this.getSystemStages();
    // this.getIndexPipline();
    // this.getFileds();
    // this.setResetNewMappingsObj();
    // this.addcode({});
    // this.getTraitGroups()
    this.subscription &#x3D; this.appSelectionService.appSelectedConfigs.subscribe(
      (res) &#x3D;&gt; {
        this.loadIndexAll();
      }
    );
  }
  loadIndexAll() {
    this.indexPipelineId &#x3D; this.workflowService.selectedIndexPipeline();
    if (this.indexPipelineId) {
      this.getSystemStages();
      //this.getIndexPipline();
      this.getFileds();
      this.setResetNewMappingsObj();
      this.addcode({});
      this.getTraitGroups();
    }
  }
  ngAfterViewInit() {
    const self &#x3D; this;
    setTimeout(() &#x3D;&gt; {
      $(&#x27;#addToolTo&#x27;).click();
    }, 700);
    this.bindDocumentClickEvents();
  }
  bindDocumentClickEvents() {
    const self &#x3D; this;
    $(&#x27;body&#x27;)
      .off(&#x27;click&#x27;)
      .on(&#x27;click&#x27;, (event) &#x3D;&gt; {
        if (event &amp;&amp; event.target) {
          if (
            !$(event.target).closest(&#x27;.simulator-div&#x27;).length &amp;&amp;
            !$(event.target).closest(&#x27;.simulatebtnContainer&#x27;).length
          ) {
            self.closeSimulator();
          }
        }
      });
  }
  //add condition dynamically
  addCondition(type, index, field?, data?, mappingType?) {
    if (type &#x3D;&#x3D;&#x3D; &#x27;add&#x27;) {
      this.conditionObj &#x3D; { fieldId: &#x27;&#x27;, operator: &#x27;&#x27;, value: [] };
      if (this.selectedStage.condition.mappings &#x3D;&#x3D;&#x3D; undefined) {
        this.selectedStage.condition.mappings &#x3D; [];
      }
      this.selectedStage.condition.mappings.push(this.conditionObj);
    } else if (type &#x3D;&#x3D;&#x3D; &#x27;remove&#x27;) {
      this.selectedStage.condition.mappings.splice(index, 1);
    } else if (type &#x3D;&#x3D;&#x3D; &#x27;update&#x27;) {
      if (field &#x3D;&#x3D;&#x3D; &#x27;field&#x27;) {
        if (mappingType &#x3D;&#x3D; &#x27;config&#x27;) {
          this.selectedStage.config.mappings[index] &#x3D; {
            ...this.selectedStage.config.mappings[index],
            fieldId: data,
          };
        } else {
          this.selectedStage.condition.mappings[index] &#x3D; {
            ...this.selectedStage.condition.mappings[index],
            fieldId: data,
          };
        }
      } else if (field &#x3D;&#x3D;&#x3D; &#x27;operator&#x27;) {
        if (mappingType &#x3D;&#x3D; &#x27;config&#x27;) {
          this.selectedStage.config.mappings[index] &#x3D; {
            ...this.selectedStage.config.mappings[index],
            operator: data,
          };
        } else {
          this.selectedStage.condition.mappings[index] &#x3D; {
            ...this.selectedStage.condition.mappings[index],
            operator: data,
          };
        }
        if ([&#x27;exists&#x27;, &#x27;doesNotExist&#x27;].includes(data)) {
          this.selectedStage.condition.mappings[index].value &#x3D; [];
        }
      }
    }
  }
  //camelcase names in operators
  camelCaseNames(operator) {
    const camel_name &#x3D; this.operators.filter((data) &#x3D;&gt; data.value &#x3D;&#x3D; operator);
    if (camel_name.length) {
      return camel_name[0].name;
    }
  }
  getTraitGroups(initial?) {
    const quaryparms: any &#x3D; {
      searchIndexId: this.serachIndexId,
      indexPipelineId: this.indexPipelineId,
    };
    this.service.invoke(&#x27;get.traits&#x27;, quaryparms).subscribe(
      (res) &#x3D;&gt; {
        const allTraitskeys: any &#x3D; [];
        if (res) {
          for (let j &#x3D; 0; j &lt; res.traitGroups.length; j++) {
            allTraitskeys.push(res.traitGroups[j].groupName);
          }
          this.traitsSuggesitions &#x3D; allTraitskeys;

          // res.forEach(element &#x3D;&gt;
          // {
          //   allTraitskeys.push(element.groupName);
          // });
          // this.traitsSuggesitions &#x3D; allTraitskeys;
        }
      },
      (err) &#x3D;&gt; {}
    );
  }
  drop(event: CdkDragDrop&lt;string[]&gt;, list) {
    moveItemInArray(list, event.previousIndex, event.currentIndex);
    if (event.previousIndex &#x3D;&#x3D; this.selectedStageIndex) {
      this.currentEditIndex &#x3D; event.currentIndex;
      this.selectedStageIndex &#x3D; event.currentIndex;
    }
  }
  setRuleObj(configObj, key, value, type) {
    this.changesDetected &#x3D; true;
    if (type &#x3D;&#x3D;&#x3D; &#x27;field_mapping&#x27;) {
      configObj[key] &#x3D; value;
      if (value &#x3D;&#x3D;&#x3D; &#x27;remove&#x27;) {
        delete configObj.value;
      }
    }
  }
  selectedTag(data: MatAutocompleteSelectedEvent, list) {
    this.entityName &#x3D; &#x27;&#x27;;
    if (!this.checkDuplicateTags((data.option.value || &#x27;&#x27;).trim(), list)) {
      this.notificationService.notify(
        &#x27;Duplicate tags are not allowed&#x27;,
        &#x27;warning&#x27;
      );
      return;
    } else {
      list.push(data.option.value);
      this.suggestedInput.nativeElement.value &#x3D; &#x27;&#x27;;
    }
    this.suggestedInput.nativeElement.blur();
    setTimeout(() &#x3D;&gt; {
      this.suggestedInput.nativeElement.focus();
    }, 100);
  }
  addAfterRemoval() {
    this.setResetNewMappingsObj(&#x27;add_after_removal&#x27;, true, true);
  }
  setResetNewMappingsObj(comingfrom?, ignoreSimulate?, saveConfig?) {
    if (!ignoreSimulate) {
      this.simulteObj &#x3D; {
        sourceType: this.sourceType,
        docCount: 5,
        showSimulation: false,
      };
    }
    this.newMappingObj &#x3D; {
      field_mapping: {
        defaultValue: {
          operation: &#x27;set&#x27;,
          target_field: &#x27;&#x27;,
          value: &#x27;&#x27;,
        },
      },
      entity_extraction: {
        defaultValue: {
          source_field: &#x27;&#x27;,
          target_field: &#x27;&#x27;,
          entity_types: [],
        },
      },
      traits_extraction: {
        defaultValue: {
          source_field: &#x27;&#x27;,
          target_field: &#x27;&#x27;,
          trait_groups: [],
        },
      },
      keyword_extraction: {
        defaultValue: {
          source_field: &#x27;&#x27;,
          target_field: &#x27;&#x27;,
          model: &#x27;&#x27;,
        },
      },
      semantic_meaning: {
        defaultValue: {
          source_field: &#x27;&#x27;,
          target_field: &#x27;&#x27;,
          model: &#x27;&#x27;,
        },
      },
      custom_script: {
        defaultValue: {
          script: &#x27;&#x27;,
        },
      },
      exclude_document: {
        defaultValue: {
          operation: &#x27;set&#x27;,
          target_field: &#x27;&#x27;,
          value: &#x27;&#x27;,
        },
      },
      snippet_extraction: {
        defaultValue: {
          target_field: &#x27;&#x27;,
        },
      },
    };
    if (
      saveConfig &amp;&amp;
      this.selectedStage &amp;&amp;
      this.selectedStage.type &#x3D;&#x3D;&#x3D; &#x27;custom_script&#x27; &amp;&amp;
      this.selectedStage.config &amp;&amp;
      this.selectedStage.config.mappings &amp;&amp;
      this.selectedStage.config.mappings.length
    ) {
      if (!this.newMappingObj.custom_script) {
        this.newMappingObj.custom_script &#x3D; {
          defaultValue: {
            script: &#x27;&#x27;,
          },
        };
      }
      this.newMappingObj.custom_script.defaultValue.script &#x3D;
        this.selectedStage.config.mappings.length &gt; 1
          ? this.selectedStage.config.mappings[1].script
          : this.selectedStage.config.mappings[0].script || &#x27;&#x27;;
    }
    if (
      comingfrom &#x3D;&#x3D; &#x27;remove_mapping&#x27; &amp;&amp;
      this.selectedStage.type !&#x3D;&#x3D; &#x27;custom_script&#x27;
    ) {
      if (
        this.selectedStage.config.hasOwnProperty(&#x27;mappings&#x27;) &amp;&amp;
        this.selectedStage.config.mappings.length
      ) {
        this.newMappingObj &#x3D; {};
      } else {
        //add warning msg
      }
    } else if (comingfrom &#x3D;&#x3D; &#x27;add_after_removal&#x27;) {
      this.addFiledmappings(
        this.newMappingObj.field_mapping.defaultValue,
        true
      );
    }
  }
  checkNewAddition() {
    //this.setResetNewMappingsObj();
    if (this.selectedStage &amp;&amp; this.selectedStage.type &#x3D;&#x3D;&#x3D; &#x27;field_mapping&#x27;) {
      if (
        this.newMappingObj.field_mapping &amp;&amp;
        this.newMappingObj.field_mapping.defaultValue
      ) {
        if (
          this.newMappingObj.field_mapping.defaultValue.operation &amp;&amp;
          this.newMappingObj.field_mapping.defaultValue.target_field &amp;&amp;
          (this.newMappingObj.field_mapping.defaultValue.value ||
            this.newMappingObj.field_mapping.defaultValue.operation &#x3D;&#x3D;&#x3D;
              &#x27;remove&#x27; ||
            this.newMappingObj.field_mapping.defaultValue.source_field)
        ) {
          this.addFiledmappings(this.newMappingObj.field_mapping.defaultValue);
        }
      }
    }
    if (this.selectedStage &amp;&amp; this.selectedStage.type &#x3D;&#x3D;&#x3D; &#x27;entity_extraction&#x27;) {
      if (
        this.newMappingObj.entity_extraction &amp;&amp;
        this.newMappingObj.entity_extraction.defaultValue
      ) {
        if (
          this.newMappingObj.entity_extraction.defaultValue.source_field &amp;&amp;
          this.newMappingObj.entity_extraction.defaultValue.entity_types &amp;&amp;
          this.newMappingObj.entity_extraction.defaultValue.entity_types
            .length &amp;&amp;
          this.newMappingObj.entity_extraction.defaultValue.target_field
        ) {
          this.addFiledmappings(
            this.newMappingObj.entity_extraction.defaultValue
          );
        }
      }
    }
    if (this.selectedStage &amp;&amp; this.selectedStage.type &#x3D;&#x3D;&#x3D; &#x27;traits_extraction&#x27;) {
      if (
        this.newMappingObj.traits_extraction &amp;&amp;
        this.newMappingObj.traits_extraction.defaultValue
      ) {
        if (
          this.newMappingObj.traits_extraction.defaultValue.source_field &amp;&amp;
          this.newMappingObj.traits_extraction.defaultValue.trait_groups &amp;&amp;
          this.newMappingObj.traits_extraction.defaultValue.trait_groups
            .length &amp;&amp;
          this.newMappingObj.traits_extraction.defaultValue.target_field
        ) {
          this.addFiledmappings(
            this.newMappingObj.traits_extraction.defaultValue
          );
        }
      }
    }
    if (
      this.selectedStage &amp;&amp;
      this.selectedStage.type &#x3D;&#x3D;&#x3D; &#x27;keyword_extraction&#x27;
    ) {
      if (
        this.newMappingObj.keyword_extraction &amp;&amp;
        this.newMappingObj.keyword_extraction.defaultValue
      ) {
        if (
          this.newMappingObj.keyword_extraction.defaultValue.source_field &amp;&amp;
          this.newMappingObj.keyword_extraction.defaultValue.target_field
        ) {
          this.addFiledmappings(
            this.newMappingObj.keyword_extraction.defaultValue
          );
        }
      }
    }
    if (this.selectedStage &amp;&amp; this.selectedStage.type &#x3D;&#x3D;&#x3D; &#x27;semantic_meaning&#x27;) {
      if (
        this.newMappingObj.semantic_meaning &amp;&amp;
        this.newMappingObj.semantic_meaning.defaultValue
      ) {
        if (
          this.newMappingObj.semantic_meaning.defaultValue.source_field &amp;&amp;
          this.newMappingObj.semantic_meaning.defaultValue.target_field
        ) {
          this.addFiledmappings(
            this.newMappingObj.semantic_meaning.defaultValue
          );
        }
      }
    }
    if (this.selectedStage &amp;&amp; this.selectedStage.type &#x3D;&#x3D;&#x3D; &#x27;custom_script&#x27;) {
      if (
        this.newMappingObj.custom_script &amp;&amp;
        this.newMappingObj.custom_script.defaultValue
      ) {
        if (this.newMappingObj.custom_script.defaultValue.script) {
          this.addFiledmappings(this.newMappingObj.custom_script.defaultValue);
        }
      }
    }
    if (this.selectedStage &amp;&amp; this.selectedStage.type &#x3D;&#x3D;&#x3D; &#x27;exclude_document&#x27;) {
      if (
        this.newMappingObj.exclude_document &amp;&amp;
        this.newMappingObj.exclude_document.defaultValue
      ) {
        if (this.newMappingObj.exclude_document.defaultValue.script) {
          this.addFiledmappings(
            this.newMappingObj.exclude_document.defaultValue
          );
        }
      }
    }
    if (
      this.selectedStage &amp;&amp;
      this.selectedStage.type &#x3D;&#x3D;&#x3D; &#x27;snippet_extraction&#x27;
    ) {
      if (
        this.newMappingObj.snippet_extraction &amp;&amp;
        this.newMappingObj.snippet_extraction.defaultValue
      ) {
        if (this.newMappingObj.snippet_extraction.defaultValue.script) {
          this.addFiledmappings(
            this.newMappingObj.snippet_extraction.defaultValue
          );
        }
      }
    }
  }
  toggleSearch() {
    if (this.showSearch &amp;&amp; this.searchFields) {
      this.searchFields &#x3D; &#x27;&#x27;;
    }
    this.showSearch &#x3D; !this.showSearch;
  }
  getFieldAutoComplete() {
    const quaryparms: any &#x3D; {
      searchIndexID: this.serachIndexId,
      indexPipelineId: this.indexPipelineId,
    };
    this.service
      .invoke(&#x27;put.indexPipeline&#x27;, quaryparms, { stages: this.pipeline })
      .subscribe(
        (res) &#x3D;&gt; {
          this.fieldAutoSuggestion &#x3D; res;
        },
        (errRes) &#x3D;&gt; {
          this.errorToaster(errRes, &#x27;Failed to get fields&#x27;);
        }
      );
  }
  selectFieldType(type) {
    if (type &#x3D;&#x3D;&#x3D; &#x27;number&#x27;) {
      this.newFieldObj.fieldName &#x3D; &#x27;&#x27;;
      this.newFieldObj.fieldDataType &#x3D; type;
    } else {
      this.newFieldObj.fieldDataType &#x3D; type;
    }
  }
  poling() {
    if (this.pollingSubscriber) {
      this.pollingSubscriber.unsubscribe();
    }
    this.simulteObj.currentSimulateAnimi &#x3D; -1;
    this.pollingSubscriber &#x3D; interval(1000)
      .pipe(startWith(0))
      .subscribe(() &#x3D;&gt; {
        if (
          this.simulteObj.currentSimulateAnimi &#x3D;&#x3D;&#x3D;
          this.simulteObj.totalStages - 1
        ) {
          this.simulteObj.currentSimulateAnimi &#x3D; -1;
        }
        this.simulteObj.currentSimulateAnimi &#x3D;
          this.simulteObj.currentSimulateAnimi + 1;
        // console.log(&#x27;hilight &#x27; + this.simulteObj.currentSimulateAnimi);
      });
  }
  simulateAnimate(payload) {
    this.simulteObj.totalStages &#x3D; payload.length - 1;
    this.simulteObj.simulationInprogress &#x3D; true;
    this.poling();
  }
  preparepayload() {
    this.checkNewAddition();
    const stagesArray &#x3D; [];
    this.payloadValidationObj.invalidObjs &#x3D; {};
    this.payloadValidationObj.valid &#x3D; true;
    this.pipeline.forEach((stage) &#x3D;&gt; {
      const tempStageObj &#x3D; JSON.parse(JSON.stringify(stage));
      if (
        tempStageObj &amp;&amp;
        tempStageObj.condition &amp;&amp;
        tempStageObj.condition.type &#x3D;&#x3D;&#x3D; &#x27;script&#x27;
      ) {
        delete tempStageObj.condition.mappings;
      } else {
        if (tempStageObj &amp;&amp; tempStageObj.condition) {
          delete tempStageObj.condition.value;
          tempStageObj.condition.mappings.forEach((el) &#x3D;&gt; {
            delete el.autocomplete_text;
            delete el.fieldName;
          });
        }
      }
      if (tempStageObj &amp;&amp; tempStageObj.type &#x3D;&#x3D;&#x3D; &#x27;field_mapping&#x27;) {
        // if (tempStageObj.condition.type &#x3D;&#x3D;&#x3D; &#x27;script&#x27;) {
        //   tempStageObj.condition.mappings &#x3D; [];
        //   tempStageObj.condition.value &#x3D; this.selectedScript;
        // }
        // else {
        //   tempStageObj.condition.mappings.forEach(el &#x3D;&gt; { delete el.autocomplete_text; delete el.fieldName })
        // }
        // const obj &#x3D; { type: this.selectedConditionType, mappings: this.conditionArray };
        // tempStageObj.condition &#x3D; obj;
        if (
          tempStageObj.config &amp;&amp;
          tempStageObj.config.mappings &amp;&amp;
          tempStageObj.config.mappings.length
        ) {
          const tempConfig: any &#x3D; [];
          tempStageObj.config.mappings.forEach((config) &#x3D;&gt; {
            if (
              (config &amp;&amp; config.operation &#x3D;&#x3D;&#x3D; &#x27;set&#x27;) ||
              config.operation &#x3D;&#x3D;&#x3D; &#x27;copy&#x27; ||
              config.operation &#x3D;&#x3D;&#x3D; &#x27;rename&#x27;
            ) {
              if (!config.target_field || !config.value) {
                this.payloadValidationObj.invalidObjs[tempStageObj._id] &#x3D; true;
              }
              if (
                config.operation &#x3D;&#x3D;&#x3D; &#x27;copy&#x27; ||
                config.operation &#x3D;&#x3D;&#x3D; &#x27;rename&#x27;
              ) {
                if (config.hasOwnProperty(&#x27;value&#x27;)) {
                  delete config.value;
                }
              } else {
                if (config.hasOwnProperty(&#x27;source_field&#x27;)) {
                  delete config.source_field;
                }
              }
            }
            if (config.operation &#x3D;&#x3D;&#x3D; &#x27;remove&#x27;) {
              if (config.hasOwnProperty(&#x27;value&#x27;)) {
                delete config.value;
              }
              if (config.hasOwnProperty(&#x27;source_field&#x27;)) {
                delete config.source_field;
              }
              if (!config.target_field) {
                this.payloadValidationObj.invalidObjs[tempStageObj._id] &#x3D; true;
              }
            }
            tempConfig.push(config);
          });
          tempStageObj.config.mappings &#x3D; tempConfig;
        }
      }
      if (tempStageObj &amp;&amp; tempStageObj.type &#x3D;&#x3D;&#x3D; &#x27;custom_script&#x27;) {
        if (
          tempStageObj.config &amp;&amp;
          tempStageObj.config.mappings &amp;&amp;
          tempStageObj.config.mappings.length
        ) {
          const tempConfig: any &#x3D; [];
          tempStageObj.config.mappings.forEach((config) &#x3D;&gt; {
            if (!config.script) {
              this.payloadValidationObj.invalidObjs[tempStageObj._id] &#x3D; true;
            }
            //tempConfig[0] &#x3D; config;
            tempConfig[0] &#x3D; tempStageObj.config.mappings[0]; // FLY - 4519: multiple changes for the plainlessScript
          });
          tempStageObj.config.mappings &#x3D; tempConfig;
        }
      }
      if (
        tempStageObj &amp;&amp;
        (tempStageObj.type &#x3D;&#x3D;&#x3D; &#x27;entity_extraction&#x27; ||
          tempStageObj.type &#x3D;&#x3D;&#x3D; &#x27;traits_extraction&#x27; ||
          tempStageObj.type &#x3D;&#x3D;&#x3D; &#x27;keyword_extraction&#x27;)
      ) {
        if (
          tempStageObj.config &amp;&amp;
          tempStageObj.config.mappings &amp;&amp;
          tempStageObj.config.mappings.length
        ) {
          const tempConfig: any &#x3D; [];
          tempStageObj.config.mappings.forEach((config) &#x3D;&gt; {
            if (!config.source_field || !config.source_field) {
              this.payloadValidationObj.invalidObjs[tempStageObj._id] &#x3D; true;
            }
            if (tempStageObj.type &#x3D;&#x3D;&#x3D; &#x27;entity_extraction&#x27;) {
              if (
                !(config &amp;&amp; config.entity_types &amp;&amp; config.entity_types.length)
              ) {
                this.payloadValidationObj.invalidObjs[tempStageObj._id] &#x3D; true;
              } else if (
                config &amp;&amp;
                config.entity_types &amp;&amp;
                config.entity_types.length
              ) {
                // let localEntitytype&#x3D;[...config.entity_types]
                // config.entity_types.forEach(typeElement &#x3D;&gt; {
                //   this.entityNlp.forEach(nlpElement&#x3D;&gt; {
                //     if(nlpElement.title&#x3D;&#x3D;typeElement){
                //       typeElement&#x3D;nlpElement.value
                //     }

                //   });
                // });
                let entityTypes &#x3D; [];
                entityTypes &#x3D; [...config.entity_types];
                for (let i &#x3D; 0; i &lt; config.entity_types.length; i++) {
                  for (let j &#x3D; 0; j &lt; this.entityNlp.length; j++) {
                    if (this.entityNlp[j].title &#x3D;&#x3D; config.entity_types[i]) {
                      config.entity_types[i] &#x3D; this.entityNlp[j].value;
                      entityTypes[i] &#x3D; this.entityNlp[j].title;
                      console.log(this.tempConfigObj);
                    }
                  }
                }
                this.entityTypePayload.push(entityTypes);
              }
              if (config.trait_groups) {
                delete config.trait_groups;
              }
              if (config.keywords) {
                delete config.keywords;
              }
            }
            if (tempStageObj.type &#x3D;&#x3D;&#x3D; &#x27;traits_extraction&#x27;) {
              if (
                !(config &amp;&amp; config.trait_groups &amp;&amp; config.trait_groups.length)
              ) {
                this.payloadValidationObj.invalidObjs[tempStageObj._id] &#x3D; true;
              }
              if (config.entity_types) {
                delete config.entity_types;
              }
              if (config.keywords) {
                delete config.keywords;
              }
            }
            if (tempStageObj.type &#x3D;&#x3D;&#x3D; &#x27;keyword_extraction&#x27;) {
              if (!(config &amp;&amp; config.keywords &amp;&amp; config.keywords.length)) {
                this.payloadValidationObj.invalidObjs[tempStageObj._id] &#x3D; true;
              }
              if (config.entity_types) {
                delete config.entity_types;
              }
              if (config.trait_groups) {
                delete config.trait_groups;
              }
            }
            tempConfig.push(config);
          });
          tempStageObj.config.mappings &#x3D; tempConfig;
        }
      }
      if (tempStageObj &amp;&amp; tempStageObj.type &#x3D;&#x3D;&#x3D; &#x27;snippet_extraction&#x27;) {
        tempStageObj?.config?.mappings?.forEach((config) &#x3D;&gt; {
          delete config?.target_field;
        });
      }
      stagesArray.push(tempStageObj);
    });
    return stagesArray;
  }

  checkForNewFields() {
    const dialogRef &#x3D; this.dialog.open(ConfirmationDialogComponent, {
      width: &#x27;530px&#x27;,
      height: &#x27;auto&#x27;,
      panelClass: &#x27;delete-popup&#x27;,
      data: {
        newTitle: &#x27;Stage configuration is successfully saved&#x27;,
        body:
          &#x27;You have added &#x27; +
          this.newfieldsData.length +
          &#x27; new fields in your configuration. Do you wish to define properties for them?&#x27;,
        buttons: [
          { key: &#x27;yes&#x27;, label: &#x27;Proceed&#x27; },
          { key: &#x27;no&#x27;, label: &#x27;Cancel&#x27;, secondaryBtn: true },
        ],
        confirmationPopUp: true,
      },
    });
    dialogRef.componentInstance.onSelect.subscribe((result) &#x3D;&gt; {
      if (result &#x3D;&#x3D;&#x3D; &#x27;yes&#x27;) {
        dialogRef.close();
        this.openModalPopup();
      } else if (result &#x3D;&#x3D;&#x3D; &#x27;no&#x27;) {
        dialogRef.close();
        // console.log(&#x27;deleted&#x27;)
      }
    });
  }
  validateConditionForRD() {
    const indexArray &#x3D; [];
    if (this.pipeline.length) {
      for (let k &#x3D; 0; k &lt; this.pipeline.length; k++) {
        if (this.pipeline[k].type &#x3D;&#x3D;&#x3D; &#x27;exclude_document&#x27;) {
          if (!this.pipeline[k].condition) {
            indexArray.push(k);
          }
        }
      }
    }
    return indexArray.length;
  }

  handleInput(value) {
    this.selectedStage.name &#x3D; value;
  }

  removeExcludeDocumentStage(indexArrayLength, isSaveConfig) {
    const dialogRef &#x3D; this.dialog.open(ConfirmationDialogComponent, {
      width: &#x27;530px&#x27;,
      height: &#x27;auto&#x27;,
      panelClass: &#x27;delete-popup&#x27;,
      data: {
        title: &#x27;Delete Stage&#x27;,
        text: &#x27;Do you want to discard this stage?&#x27;,
        newTitle: &#x27;Do you want to discard this stage?&#x27;,
        body: &#x27;The Exclude Document stage will be discarded as it does not contain any conditions.&#x27;,
        buttons: [
          { key: &#x27;yes&#x27;, label: &#x27;Delete&#x27;, type: &#x27;danger&#x27; },
          { key: &#x27;no&#x27;, label: &#x27;Cancel&#x27; },
        ],
        confirmationPopUp: true,
      },
    });

    dialogRef.componentInstance.onSelect.subscribe((result) &#x3D;&gt; {
      if (result &#x3D;&#x3D;&#x3D; &#x27;yes&#x27;) {
        for (let i &#x3D; 0; i &lt; indexArrayLength; i++) {
          const index &#x3D; this.pipeline.findIndex((p) &#x3D;&gt; !p.condition);
          if (index &gt; -1) {
            const index2 &#x3D; this.modifiedStages.createdStages.findIndex(
              (d) &#x3D;&gt; d.type &#x3D;&#x3D; this.pipeline[index].type
            );
            if (index2 &gt; -1) {
              this.modifiedStages.createdStages.splice(index2, 1);
            }
            this.pipeline.splice(index, 1);
          }
        }
        // console.log(&quot;inside dialog&quot;);
        dialogRef.close();
        if (this.pipeline &amp;&amp; this.pipeline.length) {
          this.selectStage(this.pipeline[0], 0);
          if (isSaveConfig) {
            this.saveConfig();
          } else {
            this.simulate();
          }
        } else {
          this.selectedStage &#x3D; null;
          return false;
        }
      } else if (result &#x3D;&#x3D;&#x3D; &#x27;no&#x27;) {
        dialogRef.close();
        return false;
      }
    });
  }
  mixpanelForStages() {
    if (this.modifiedStages.createdStages.length) {
      this.mixpanel.postEvent(&#x27;Workbench - Rule Created&#x27;, {});
      this.modifiedStages.createdStages.forEach((s) &#x3D;&gt; {
        if (s.type &#x3D;&#x3D;&#x3D; &#x27;field_mapping&#x27;) {
          this.mixpanel.postEvent(
            &#x27;Workbench - Rule Created - Field Mapping&#x27;,
            {}
          );
        } else if (s.type &#x3D;&#x3D;&#x3D; &#x27;entity_extraction&#x27;) {
          this.mixpanel.postEvent(
            &#x27;Workbench - Rule Created - Entity Extraction&#x27;,
            {}
          );
        } else if (s.type &#x3D;&#x3D;&#x3D; &#x27;traits_extraction&#x27;) {
          this.mixpanel.postEvent(
            &#x27;Workbench - Rule Created - Traits Extraction&#x27;,
            {}
          );
        } else if (s.type &#x3D;&#x3D;&#x3D; &#x27;custom_script&#x27;) {
          this.mixpanel.postEvent(
            &#x27;Workbench - Rule Created - Custom Script&#x27;,
            {}
          );
        } else if (s.type &#x3D;&#x3D;&#x3D; &#x27;position&#x27;) {
        } else if (s.type &#x3D;&#x3D;&#x3D; &#x27;cluster&#x27;) {
        } else if (s.type &#x3D;&#x3D;&#x3D; &#x27;indexer&#x27;) {
        } else if (s.type &#x3D;&#x3D;&#x3D; &#x27;keyword_extraction&#x27;) {
          this.mixpanel.postEvent(
            &#x27;Workbench - Rule Created - Keyword Extraction&#x27;,
            {}
          );
        } else if (s.type &#x3D;&#x3D;&#x3D; &#x27;exclude_document&#x27;) {
          this.mixpanel.postEvent(
            &#x27;Workbench - Rule Created - Exclude Document&#x27;,
            {}
          );
        } else if (s.type &#x3D;&#x3D;&#x3D; &#x27;semantic_meaning&#x27;) {
          this.mixpanel.postEvent(
            &#x27;Workbench - Rule Created - Semantic Meaning&#x27;,
            {}
          );
        }
      });
    }
    if (this.modifiedStages.deletedStages.length) {
      this.mixpanel.postEvent(&#x27;Workbench - Rule Deleted&#x27;, {});
    }
    if (
      !this.modifiedStages.createdStages.length &amp;&amp;
      !this.modifiedStages.deletedStages.length
    ) {
      this.mixpanel.postEvent(&#x27;Workbench - Rule Updated&#x27;, {});
    }
  }
  //For Title appearence in UI (Entities)
  prepEntityObj(entityMappingArr) {
    const entityTypeLocalArr &#x3D; [];
    entityMappingArr.forEach((element) &#x3D;&gt; {
      element.entity_types.forEach((entityElement) &#x3D;&gt; {
        this.entityNlp.forEach((nlpElement) &#x3D;&gt; {
          if (entityElement &#x3D;&#x3D;&#x3D; nlpElement.value) {
            // return entityElement &#x3D; nlpElement.title
            entityTypeLocalArr.push(nlpElement.title);
          }
        });
      });
    });
    return entityTypeLocalArr;
  }
  saveConfig(warningmessage?, index?, dialogRef?) {
    let plainScriptTxt: any;
    if (
      this.newMappingObj &amp;&amp;
      this.newMappingObj.custom_script &amp;&amp;
      this.newMappingObj.custom_script.defaultValue &amp;&amp;
      this.newMappingObj.custom_script.defaultValue.script
    ) {
      plainScriptTxt &#x3D; this.newMappingObj.custom_script.defaultValue.script;
    }
    const indexArrayLength: any &#x3D; this.validateConditionForRD();
    if (indexArrayLength) {
      this.removeExcludeDocumentStage(indexArrayLength, true);
    } else {
      this.savingConfig &#x3D; true;
      const quaryparms: any &#x3D; {
        searchIndexID: this.serachIndexId,
        indexPipelineId: this.indexPipelineId,
      };
      // this.tempConfigObj &#x3D; config.entity_types
      this.service
        .invoke(&#x27;put.indexPipeline&#x27;, quaryparms, {
          stages: this.preparepayload(),
        })
        .subscribe(
          (res) &#x3D;&gt; {
            this.pipeline &#x3D; res.stages || [];
            this.pipelineCopy &#x3D; JSON.parse(JSON.stringify(res.stages));

            //For Title appearence in UI (Entities)

            this.pipeline.forEach((element) &#x3D;&gt; {
              if (element.type &#x3D;&#x3D;&#x3D; &#x27;entity_extraction&#x27;) {
                if (element.config &amp;&amp; element.config.mappings.length) {
                  element.config.mappings.forEach((map, index) &#x3D;&gt; {
                    map.entity_types &#x3D; this.entityTypePayload[index];
                  });

                  // this.prepEntityObj(element.config.mappings)
                  // element.config.mappings
                  // entityNlp
                }
              }
            });
            this.entityTypePayload &#x3D; [];
            this.pipelineCopy &#x3D; [...this.pipeline];
            // this.appSelectionService.updateTourConfig(&#x27;addData&#x27;);
            this.mixpanelForStages();
            this.notificationService.notify(
              &#x27;Configurations Saved Successfully&#x27;,
              &#x27;success&#x27;
            );
            if (warningmessage) {
              this.notificationService.notify(warningmessage, &#x27;warning&#x27;);
            }
            this.modifiedStages &#x3D; {
              createdStages: [],
              deletedStages: [],
            };
            this.savingConfig &#x3D; false;
            if (dialogRef &amp;&amp; dialogRef.close) {
              dialogRef.close();
            }
            if (index !&#x3D;&#x3D; &#x27;null&#x27; &amp;&amp; index !&#x3D;&#x3D; undefined &amp;&amp; index &gt; -1) {
              this.currentEditIndex &#x3D; -1;
            }
            if (res &amp;&amp; res.targetFields &amp;&amp; res.targetFields.length) {
              const newFileds: any &#x3D; [];
              res.targetFields.forEach((field) &#x3D;&gt; {
                // const tempPayload: any &#x3D; {
                //   fieldName: field.fieldName,
                //   fieldDataType: field.fieldDataType,
                //   isMultiValued: field.isMultiValued || true, // can use hasobjectket property if required to take server values in furture //
                //   isActive: field.isActive || true,
                //   isRequired: field.isRequired || false,
                //   isStored: field.isStored || true,
                //   isIndexed: field.isIndexed || true,
                // }
                const tempPayload: any &#x3D; {
                  fieldName: field.fieldName,
                  fieldDataType: field.fieldDataType,
                  isAutosuggest: field.isAutosuggest
                    ? field.isAutosuggest
                    : false,
                  isSearchable: field.isSearchable ? field.isSearchable : false,
                  isActive: field.isActive || true,
                };
                newFileds.push(tempPayload);
              });
              this.newfieldsData &#x3D; newFileds || [];
              this.checkForNewFields();
            }
            this.clearDirtyObj();
            if (!(this.selectedStage.type !&#x3D;&#x3D; &#x27;custom_script&#x27;)) {
              this.setResetNewMappingsObj(&#x27;remove_mapping&#x27;, null, true);
            }
            /** Workbench plain text temp */
            // if (this.newMappingObj &amp;&amp; this.newMappingObj.custom_script &amp;&amp;
            //   this.newMappingObj.custom_script.defaultValue &amp;&amp; this.newMappingObj.custom_script.defaultValue.script) {
            //   this.newMappingObj.custom_script.defaultValue.script &#x3D; plainScriptTxt;
            // }
            // setTimeout(()&#x3D;&gt;{
            //   //this.selectedStage.condition.value &#x3D; &quot;&quot;
            //   if(this.selectedStage &amp;&amp; this.selectedStage.condition &amp;&amp; this.selectedStage.condition.value){
            //     let greaterThan &#x3D; &quot;&amp;gt;&quot;;
            //     let lessThan &#x3D; &quot;&amp;lt;&quot;;
            //     let greaterThanSymbol&#x3D; &quot;&gt;&quot;;
            //     let lessThanSymbol &#x3D; &quot;&lt;&quot;;
            //     if(this.selectedStage.condition.value.includes(greaterThan)){
            //       this.selectedStage.condition.value.replace(greaterThan, greaterThanSymbol);
            //       let elemenet &#x3D; document.getElementsByTagName(&quot;ngx-codemirror&quot;)[0] as HTMLBaseElement
            //       elemenet.innerText.replace(greaterThan, greaterThanSymbol);
            //     }else if(this.selectedStage.condition.value.includes(lessThan)){
            //       this.selectedStage.condition.value.replace(lessThan,lessThanSymbol);
            //       let elemenet &#x3D; document.getElementsByTagName(&quot;ngx-codemirror&quot;)[0] as HTMLBaseElement
            //       elemenet.innerText.replace(lessThan, lessThanSymbol);
            //     }
            //   }
            // },1)
          },
          (errRes) &#x3D;&gt; {
            this.savingConfig &#x3D; false;
            if (errRes?.error.errors[0].msg) {
              this.errorToaster(errRes, errRes.error.errors[0].msg);
            }
            // this.errorToaster(errRes, &#x27;Failed to save configurations&#x27;);
            if (
              (errRes &amp;&amp;
                errRes.error &amp;&amp;
                errRes.error.errors[0].code &#x3D;&#x3D; &#x27;FeatureAccessDenied&#x27;) ||
              errRes.error.errors[0].code &#x3D;&#x3D; &#x27;FeatureAccessLimitExceeded&#x27;
            ) {
              this.upgrade();
              setTimeout(() &#x3D;&gt; {
                // this.btnDisabled &#x3D; false;
              }, 500);
            }
            /** Workbench plain text temp */
            if (
              this.newMappingObj &amp;&amp;
              this.newMappingObj.custom_script &amp;&amp;
              this.newMappingObj.custom_script.defaultValue &amp;&amp;
              this.newMappingObj.custom_script.defaultValue.script
            ) {
              this.newMappingObj.custom_script.defaultValue.script &#x3D;
                plainScriptTxt;
            }
          }
        );
    }
  }
  upgrade() {
    this.plans?.openSelectedPopup(&#x27;choose_plan&#x27;);
  }
  openModalPopup() {
    this.loadingFields &#x3D; true;
    this.addFieldModalPopRef &#x3D; this.addFieldModalPop.open();
    this.getFileds();
  }
  closeModalPopup() {
    this.addFieldModalPopRef.close();
    this.setResetNewMappingsObj();
  }
  reindex() {
    const proceed &#x3D; () &#x3D;&gt; {
      this.reIndexing &#x3D; true;
      const quaryparms: any &#x3D; {
        searchIndexID: this.serachIndexId,
        indexPipelineId: this.indexPipelineId,
      };
      this.service.invoke(&#x27;post.reindex&#x27;, quaryparms).subscribe(
        (res) &#x3D;&gt; {
          this.notificationService.notify(&#x27;Re-indexed successfully&#x27;, &#x27;success&#x27;);
          this.reIndexing &#x3D; false;
        },
        (errRes) &#x3D;&gt; {
          this.errorToaster(errRes, &#x27;Failed to re-index&#x27;);
          this.reIndexing &#x3D; false;
        }
      );
    };
    if (this.changesDetected) {
      const dialogRef &#x3D; this.dialog.open(ConfirmationDialogComponent, {
        width: &#x27;530px&#x27;,
        height: &#x27;auto&#x27;,
        panelClass: &#x27;delete-popup&#x27;,
        data: {
          title: &#x27;Are you sure&#x27;,
          text: &#x27;There are usaved changes, Are you sure you want to reindex without saving them?&#x27;,
          newTitle:
            &#x27;There are usaved changes, Are you sure you want to reindex without saving them?&#x27;,
          body: &#x27;The changes are unsaved.&#x27;,
          buttons: [
            { key: &#x27;yes&#x27;, label: &#x27;Save&#x27;, type: &#x27;danger&#x27; },
            { key: &#x27;no&#x27;, label: &#x27;Cancel&#x27; },
          ],
          confirmationPopUp: true,
        },
      });
      dialogRef.componentInstance.onSelect.subscribe((result) &#x3D;&gt; {
        if (result &#x3D;&#x3D;&#x3D; &#x27;yes&#x27;) {
          this.clearDirtyObj();
          proceed();
          dialogRef.close();
        } else if (result &#x3D;&#x3D;&#x3D; &#x27;no&#x27;) {
          dialogRef.close();
          // console.log(&#x27;deleted&#x27;)
        }
      });
    } else {
      proceed();
    }
  }
  changeSimulate(value, type) {
    if (type &#x3D;&#x3D;&#x3D; &#x27;source&#x27;) {
      this.sourceType &#x3D; value;
      this.simulteObj.sourceType &#x3D; this.sourceType;
    } else {
      if (value &#x3D;&#x3D; null) {
        return;
      } else if (value &lt; 1) {
        this.simulateJson.docCount &#x3D; 1;
        value &#x3D; 1;
      } else if (value &gt; 20) {
        this.simulateJson.docCount &#x3D; 20;
        value &#x3D; 20;
      }
      this.simulteObj.docCount &#x3D; value;
    }
    this.simulate();
  }
  closeSimulator() {
    this.simulteObj &#x3D; {
      sourceType: &#x27;all&#x27;, //this.sourceType,
      docCount: 5,
      showSimulation: false,
    };
    if (this.pollingSubscriber) {
      this.pollingSubscriber.unsubscribe();
    }
    this.simulteObj.currentSimulateAnimi &#x3D; -1;
  }
  addcode(data?) {
    data &#x3D; data || {};
    this.simulateJson &#x3D; data;
    // this.simulateJson &#x3D; JSON.stringify(data, null, &#x27; &#x27;);
    this.filteredSimulatorRes &#x3D; JSON.stringify(data, null, &#x27; &#x27;);
  }

  clearvalidation() {
    $(&#x27;#infoWarning&#x27;).hide();
    $(&#x27;#fieldname&#x27;).css(&#x27;border-color&#x27;, &#x27;#BDC1C6&#x27;);

    $(&#x27;#infoWarning1&#x27;).hide();
    $(&#x27;#set_value&#x27;).css(&#x27;border-color&#x27;, &#x27;#BDC1C6&#x27;);

    $(&#x27;#infoWarning2&#x27;).hide();
    $(&#x27;#rename_sourcefield&#x27;).css(&#x27;border-color&#x27;, &#x27;#BDC1C6&#x27;);

    $(&#x27;#dropdownBasic1entity&#x27;).css(&#x27;border-color&#x27;, &#x27;#BDC1C6&#x27;);

    $(&#x27;#infoWarning4&#x27;).hide();
    $(&#x27;#entitytarget&#x27;).css(&#x27;border-color&#x27;, &#x27;#BDC1C6&#x27;);

    $(&#x27;#infoWarning3&#x27;).hide();
    $(&#x27;#addentity&#x27;).parents(&#x27;div&#x27;).css(&#x27;border-color&#x27;, &#x27;#BDC1C6&#x27;);
    //$(&quot;#addentity&quot;).css(&quot;border-color&quot;, ((this.newMappingObj[this.selectedStage.type].defaultValue.entity_types.length) !&#x3D; 0) ? &quot;#BDC1C6&quot; : &quot;#DD3646&quot;);

    $(&#x27;#infoWarning5&#x27;).hide();
    //$(&quot;#traitsgroup&quot;).css(&quot;border-color&quot;, ((this.newMappingObj[this.selectedStage.type].defaultValue.trait_groups).length!&#x3D;0)? &quot;#BDC1C6&quot; : &quot;#DD3646&quot;);
    $(&#x27;#traitsgroup&#x27;).parents(&#x27;div&#x27;).css(&#x27;border-color&#x27;, &#x27;#BDC1C6&#x27;);
  }

  inputChanged(type) {
    if (type &#x3D;&#x3D; &#x27;fieldname&#x27;) {
      this.newMappingObj.field_mapping.defaultValue.target_field !&#x3D; &#x27;&#x27;
        ? $(&#x27;#infoWarning&#x27;).hide()
        : $(&#x27;#infoWarning&#x27;).show();
      $(&#x27;#fieldname&#x27;).css(
        &#x27;border-color&#x27;,
        this.newMappingObj.field_mapping.defaultValue.target_field !&#x3D; &#x27;&#x27;
          ? &#x27;#BDC1C6&#x27;
          : &#x27;#DD3646&#x27;
      );
    } else if (type &#x3D;&#x3D; &#x27;set_value&#x27;) {
      this.newMappingObj.field_mapping.defaultValue.value !&#x3D; &#x27;&#x27;
        ? $(&#x27;#infoWarning1&#x27;).hide()
        : $(&#x27;#infoWarning1&#x27;).show();
      $(&#x27;#set_value&#x27;).css(
        &#x27;border-color&#x27;,
        this.newMappingObj.field_mapping.defaultValue.value !&#x3D; &#x27;&#x27;
          ? &#x27;#BDC1C6&#x27;
          : &#x27;#DD3646&#x27;
      );
    } else if (type &#x3D;&#x3D; &#x27;rename_sourcefield&#x27;) {
      this.newMappingObj.field_mapping.defaultValue.source_field !&#x3D; &#x27;&#x27;
        ? $(&#x27;#infoWarning2&#x27;).hide()
        : $(&#x27;#infoWarning2&#x27;).show();
      $(&#x27;#rename_sourcefield&#x27;).css(
        &#x27;border-color&#x27;,
        this.newMappingObj.field_mapping.defaultValue.source_field !&#x3D; &#x27;&#x27;
          ? &#x27;#BDC1C6&#x27;
          : &#x27;#DD3646&#x27;
      );
    } else if (type &#x3D;&#x3D; &#x27;dropdownBasic1entity&#x27;) {
      $(&#x27;#dropdownBasic1entity&#x27;).css(
        &#x27;border-color&#x27;,
        this.newMappingObj[this.selectedStage.type].defaultValue.source_field !&#x3D;
          &#x27;&#x27;
          ? &#x27;#BDC1C6&#x27;
          : &#x27;#DD3646&#x27;
      );
    } else if (type &#x3D;&#x3D; &#x27;addentity&#x27;) {
      console.log(
        this.newMappingObj[this.selectedStage.type].defaultValue.entity_types
          .length
      );
      this.newMappingObj[this.selectedStage.type].defaultValue.entity_types
        .length !&#x3D; 0
        ? $(&#x27;#infoWarning3&#x27;).hide()
        : $(&#x27;#infoWarning3&#x27;).show();
      $(&#x27;#addentity&#x27;).css(
        &#x27;border-color&#x27;,
        this.newMappingObj[this.selectedStage.type].defaultValue.entity_types
          .length !&#x3D; 0
          ? &#x27;#BDC1C6&#x27;
          : &#x27;#DD3646&#x27;
      );
    } else if (type &#x3D;&#x3D; &#x27;entitytarget&#x27;) {
      this.newMappingObj[this.selectedStage.type].defaultValue.target_field !&#x3D;
      &#x27;&#x27;
        ? $(&#x27;#infoWarning4&#x27;).hide()
        : $(&#x27;#infoWarning4&#x27;).show();
      $(&#x27;#entitytarget&#x27;).css(
        &#x27;border-color&#x27;,
        this.newMappingObj[this.selectedStage.type].defaultValue.target_field !&#x3D;
          &#x27;&#x27;
          ? &#x27;#BDC1C6&#x27;
          : &#x27;#DD3646&#x27;
      );
    } else if (type &#x3D;&#x3D; &#x27;traitsgroup&#x27;) {
      this.newMappingObj[this.selectedStage.type].defaultValue.trait_groups
        .length !&#x3D; 0
        ? $(&#x27;#infoWarning5&#x27;).hide()
        : $(&#x27;#infoWarning5&#x27;).show();
      $(&#x27;#traitsgroup&#x27;).css(
        &#x27;border-color&#x27;,
        this.newMappingObj[this.selectedStage.type].defaultValue.trait_groups
          .length !&#x3D; 0
          ? &#x27;#BDC1C6&#x27;
          : &#x27;#DD3646&#x27;
      );
    }
  }
  validation(save) {
    if (this.selectedStage.condition.mappings &amp;&amp; this.selectedStage.name) {
      if (Object.keys(this.newMappingObj).length &#x3D;&#x3D; 0) {
        if (save &#x3D;&#x3D;&#x3D; true) {
          this.saveConfig();
        } else {
          this.simulate();
        }
        return true;
      } else if (Object.keys(this.newMappingObj).length &#x3D;&#x3D; 1) {
        if (this.newMappingObj.hasOwnProperty(&#x27;custom_script&#x27;)) {
          if (save &#x3D;&#x3D;&#x3D; true) {
            this.saveConfig();
          } else {
            this.simulate();
          }
        }
        return true;
      }
      if (this.selectedStage.type &#x3D;&#x3D;&#x3D; &#x27;custom_script&#x27;) {
        if (save &#x3D;&#x3D;&#x3D; true) {
          this.saveConfig();
        } else {
          this.simulate();
        }
      } else if (this.selectedStage.type &#x3D;&#x3D;&#x3D; &#x27;exclude_document&#x27;) {
        if (save &#x3D;&#x3D;&#x3D; true) {
          this.saveConfig();
        } else {
          this.simulate();
        }
      } else if (this.selectedStage.type &#x3D;&#x3D;&#x3D; &#x27;snippet_extraction&#x27;) {
        if (save &#x3D;&#x3D;&#x3D; true) {
          this.saveConfig();
        } else {
          this.simulate();
        }
      } else if (this.selectedStage.type &#x3D;&#x3D;&#x3D; &#x27;field_mapping&#x27;) {
        if (
          this.newMappingObj &amp;&amp;
          this.newMappingObj.field_mapping &amp;&amp;
          this.newMappingObj.field_mapping.defaultValue.operation &#x3D;&#x3D;&#x3D; &#x27;set&#x27;
        ) {
          for (
            let i &#x3D; 0;
            i &lt; this.selectedStage.condition.mappings.length;
            i++
          ) {
            if (
              (this.selectedStage.condition.mappings[i].operator &#x3D;&#x3D;&#x3D; &#x27;&#x27; ||
                this.basic_fieldName &#x3D;&#x3D;&#x3D; &#x27;&#x27;) &amp;&amp;
              this.newMappingObj.field_mapping.defaultValue.target_field &amp;&amp;
              this.newMappingObj.field_mapping.defaultValue.value
            ) {
              const warningmessage &#x3D;
                &#x27;Chosen stage will be applied on all documents since there are no conditions provided&#x27;;
              // this.notificationService.notify(&#x27;Chosen stage will be applied on all documents since there are no conditions provided&#x27;,&#x27;warning&#x27;)
              if (save &#x3D;&#x3D;&#x3D; true) {
                this.saveConfig(warningmessage);
              } else {
                this.simulate(warningmessage);
              }
            } else if (
              this.newMappingObj.field_mapping.defaultValue.target_field &#x3D;&#x3D;&#x3D;
                &#x27;&#x27; ||
              this.newMappingObj.field_mapping.defaultValue.value &#x3D;&#x3D;&#x3D; &#x27;&#x27;
            ) {
              if (
                this.newMappingObj.field_mapping.defaultValue.value &#x3D;&#x3D;&#x3D; &#x27;&#x27; &amp;&amp;
                this.newMappingObj.field_mapping.defaultValue.target_field &#x3D;&#x3D;&#x3D;
                  &#x27;&#x27;
              ) {
                $(&#x27;#fieldname&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
                $(&#x27;#infoWarning&#x27;).css({
                  top: &#x27;35%&#x27;,
                  position: &#x27;absolute&#x27;,
                  right: &#x27;3%&#x27;,
                  display: &#x27;block&#x27;,
                });
                $(&#x27;#set_value&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
                $(&#x27;#infoWarning1&#x27;).css({
                  top: &#x27;60%&#x27;,
                  position: &#x27;absolute&#x27;,
                  right: &#x27;6%&#x27;,
                  display: &#x27;block&#x27;,
                });
              } else if (
                this.newMappingObj.field_mapping.defaultValue.target_field &#x3D;&#x3D;&#x3D;
                &#x27;&#x27;
              ) {
                $(&#x27;#fieldname&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
                $(&#x27;#infoWarning&#x27;).css({
                  top: &#x27;35%&#x27;,
                  position: &#x27;absolute&#x27;,
                  right: &#x27;3%&#x27;,
                  display: &#x27;block&#x27;,
                });
              } else if (
                this.newMappingObj.field_mapping.defaultValue.value &#x3D;&#x3D;&#x3D; &#x27;&#x27;
              ) {
                $(&#x27;#set_value&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
                $(&#x27;#infoWarning1&#x27;).css({
                  top: &#x27;58%&#x27;,
                  position: &#x27;absolute&#x27;,
                  right: &#x27;6%&#x27;,
                  display: &#x27;block&#x27;,
                });
              }
              this.notificationService.notify(
                &#x27;Enter the required fields to proceed&#x27;,
                &#x27;error&#x27;
              );
            } else {
              if (save &#x3D;&#x3D;&#x3D; true) {
                this.saveConfig();
              } else {
                this.simulate();
              }
            }
          }
        } else if (
          this.newMappingObj.field_mapping.defaultValue.operation &#x3D;&#x3D;&#x3D;
            &#x27;rename&#x27; ||
          this.newMappingObj.field_mapping.defaultValue.operation &#x3D;&#x3D;&#x3D; &#x27;copy&#x27;
        ) {
          for (
            let i &#x3D; 0;
            i &lt; this.selectedStage.condition.mappings.length;
            i++
          ) {
            if (
              (this.selectedStage.condition.mappings[i].operator &#x3D;&#x3D;&#x3D; &#x27;&#x27; ||
                this.basic_fieldName &#x3D;&#x3D;&#x3D; &#x27;&#x27;) &amp;&amp;
              this.newMappingObj.field_mapping.defaultValue.source_field &amp;&amp;
              this.newMappingObj.field_mapping.defaultValue.target_field
            ) {
              const warningmessage &#x3D;
                &#x27;Chosen stage will be applied on all documents since there are no conditions provided&#x27;;
              // this.notificationService.notify(&#x27;Chosen stage will be applied on all documents since there are no conditions provided&#x27;,&#x27;warning&#x27;)
              if (save &#x3D;&#x3D;&#x3D; true) {
                this.saveConfig(warningmessage);
              } else {
                this.simulate(warningmessage);
              }
            } else if (
              this.newMappingObj.field_mapping.defaultValue.source_field &#x3D;&#x3D;&#x3D;
                &#x27;&#x27; ||
              this.newMappingObj.field_mapping.defaultValue.source_field &#x3D;&#x3D;&#x3D;
                undefined ||
              this.newMappingObj.field_mapping.defaultValue.target_field &#x3D;&#x3D;&#x3D; &#x27;&#x27;
            ) {
              if (
                (this.newMappingObj.field_mapping.defaultValue.source_field &#x3D;&#x3D;&#x3D;
                  &#x27;&#x27; ||
                  this.newMappingObj.field_mapping.defaultValue.source_field &#x3D;&#x3D;&#x3D;
                    undefined) &amp;&amp;
                this.newMappingObj.field_mapping.defaultValue.target_field &#x3D;&#x3D;&#x3D;
                  &#x27;&#x27;
              ) {
                $(&#x27;#rename_sourcefield&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
                $(&#x27;#infoWarning2&#x27;).css({
                  top: &#x27;35%&#x27;,
                  position: &#x27;absolute&#x27;,
                  right: &#x27;3%&#x27;,
                  display: &#x27;block&#x27;,
                });
                $(&#x27;#fieldname&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
                $(&#x27;#infoWarning&#x27;).css({
                  top: &#x27;35%&#x27;,
                  position: &#x27;absolute&#x27;,
                  right: &#x27;3%&#x27;,
                  display: &#x27;block&#x27;,
                });
              } else if (
                this.newMappingObj.field_mapping.defaultValue.source_field &#x3D;&#x3D;&#x3D;
                  &#x27;&#x27; ||
                this.newMappingObj.field_mapping.defaultValue.source_field &#x3D;&#x3D;&#x3D;
                  undefined
              ) {
                $(&#x27;#rename_sourcefield&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
                $(&#x27;#infoWarning2&#x27;).css({
                  top: &#x27;35%&#x27;,
                  position: &#x27;absolute&#x27;,
                  right: &#x27;3%&#x27;,
                  display: &#x27;block&#x27;,
                });
              } else if (
                this.newMappingObj.field_mapping.defaultValue.target_field &#x3D;&#x3D;&#x3D;
                &#x27;&#x27;
              ) {
                $(&#x27;#fieldname&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
                $(&#x27;#infoWarning&#x27;).css({
                  top: &#x27;35%&#x27;,
                  position: &#x27;absolute&#x27;,
                  right: &#x27;3%&#x27;,
                  display: &#x27;block&#x27;,
                });
              }
              this.notificationService.notify(
                &#x27;Enter the required fields to proceed&#x27;,
                &#x27;error&#x27;
              );
            } else {
              if (save &#x3D;&#x3D;&#x3D; true) {
                this.saveConfig();
              } else {
                this.simulate();
              }
            }
          }
        } else if (
          this.newMappingObj.field_mapping.defaultValue.operation &#x3D;&#x3D;&#x3D; &#x27;remove&#x27;
        ) {
          for (
            let i &#x3D; 0;
            i &lt; this.selectedStage.condition.mappings.length;
            i++
          ) {
            if (
              (this.selectedStage.condition.mappings[i].operator &#x3D;&#x3D;&#x3D; &#x27;&#x27; ||
                this.basic_fieldName &#x3D;&#x3D;&#x3D; &#x27;&#x27;) &amp;&amp;
              this.newMappingObj.field_mapping.defaultValue.target_field
            ) {
              const warningmessage &#x3D;
                &#x27;Chosen stage will be applied on all documents since there are no conditions provided&#x27;;
              // this.notificationService.notify(&#x27;Chosen stage will be applied on all documents since there are no conditions provided&#x27;,&#x27;warning&#x27;)
              if (save &#x3D;&#x3D;&#x3D; true) {
                this.saveConfig(warningmessage);
              } else {
                this.simulate(warningmessage);
              }
            } else if (
              this.newMappingObj.field_mapping.defaultValue.target_field &#x3D;&#x3D;&#x3D; &#x27;&#x27;
            ) {
              if (
                this.newMappingObj.field_mapping.defaultValue.target_field &#x3D;&#x3D;&#x3D;
                &#x27;&#x27;
              ) {
                $(&#x27;#fieldname&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
                $(&#x27;#infoWarning&#x27;).css({
                  top: &#x27;35%&#x27;,
                  position: &#x27;absolute&#x27;,
                  right: &#x27;3%&#x27;,
                  display: &#x27;block&#x27;,
                });
              }
              this.notificationService.notify(
                &#x27;Enter the required fields to proceed&#x27;,
                &#x27;error&#x27;
              );
            } else {
              if (save &#x3D;&#x3D;&#x3D; true) {
                this.saveConfig();
              } else {
                this.simulate();
              }
            }
          }
        }
      } else if (this.selectedStage.type &#x3D;&#x3D;&#x3D; &#x27;entity_extraction&#x27;) {
        for (let i &#x3D; 0; i &lt; this.selectedStage.condition.mappings.length; i++) {
          if (
            (this.selectedStage.condition.mappings[i].operator &#x3D;&#x3D;&#x3D; &#x27;&#x27; ||
              this.basic_fieldName &#x3D;&#x3D;&#x3D; &#x27;&#x27;) &amp;&amp;
            this.newMappingObj[this.selectedStage.type].defaultValue
              .source_field &amp;&amp;
            this.newMappingObj[this.selectedStage.type].defaultValue
              .entity_types.length !&#x3D; 0 &amp;&amp;
            this.newMappingObj[this.selectedStage.type].defaultValue
              .target_field
          ) {
            const warningmessage &#x3D;
              &#x27;Chosen stage will be applied on all documents since there are no conditions provided&#x27;;
            // this.notificationService.notify(&#x27;Chosen stage will be applied on all documents since there are no conditions provided&#x27;,&#x27;warning&#x27;)
            if (save &#x3D;&#x3D;&#x3D; true) {
              this.saveConfig(warningmessage);
            } else {
              this.simulate(warningmessage);
            }
          } else if (
            this.newMappingObj[this.selectedStage.type].defaultValue
              .source_field &#x3D;&#x3D;&#x3D; &#x27;&#x27; ||
            this.newMappingObj[this.selectedStage.type].defaultValue
              .entity_types.length &#x3D;&#x3D; 0 ||
            this.newMappingObj[this.selectedStage.type].defaultValue
              .target_field &#x3D;&#x3D;&#x3D; &#x27;&#x27;
          ) {
            if (
              this.newMappingObj[this.selectedStage.type].defaultValue
                .source_field &#x3D;&#x3D;&#x3D; &#x27;&#x27; &amp;&amp;
              this.newMappingObj[this.selectedStage.type].defaultValue
                .entity_types.length &#x3D;&#x3D; 0 &amp;&amp;
              this.newMappingObj[this.selectedStage.type].defaultValue
                .target_field &#x3D;&#x3D;&#x3D; &#x27;&#x27;
            ) {
              $(&#x27;#dropdownBasic1entity&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
              // $(&quot;#addentity&quot;).css(&quot;border-color&quot;, &quot;#DD3646&quot;);
              $(&#x27;#addentity&#x27;).parents(&#x27;div&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
              $(&#x27;#infoWarning3&#x27;).css({
                top: &#x27;35%&#x27;,
                position: &#x27;absolute&#x27;,
                right: &#x27;3%&#x27;,
                display: &#x27;block&#x27;,
              });
              $(&#x27;#entitytarget&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
              $(&#x27;#infoWarning4&#x27;).css({
                top: &#x27;35%&#x27;,
                position: &#x27;absolute&#x27;,
                right: &#x27;3%&#x27;,
                display: &#x27;block&#x27;,
              });
            } else if (
              this.newMappingObj[this.selectedStage.type].defaultValue
                .source_field &#x3D;&#x3D;&#x3D; &#x27;&#x27; &amp;&amp;
              this.newMappingObj[this.selectedStage.type].defaultValue
                .entity_types.length &#x3D;&#x3D; 0 &amp;&amp;
              this.newMappingObj[this.selectedStage.type].defaultValue
                .target_field
            ) {
              $(&#x27;#dropdownBasic1entity&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
              //$(&quot;#addentity&quot;).css(&quot;border-color&quot;, &quot;#DD3646&quot;);
              $(&#x27;#addentity&#x27;).parents(&#x27;div&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
              $(&#x27;#infoWarning3&#x27;).css({
                top: &#x27;35%&#x27;,
                position: &#x27;absolute&#x27;,
                right: &#x27;3%&#x27;,
                display: &#x27;block&#x27;,
              });
            } else if (
              this.newMappingObj[this.selectedStage.type].defaultValue
                .entity_types.length &#x3D;&#x3D; 0 &amp;&amp;
              this.newMappingObj[this.selectedStage.type].defaultValue
                .target_field &#x3D;&#x3D;&#x3D; &#x27;&#x27; &amp;&amp;
              this.newMappingObj[this.selectedStage.type].defaultValue
                .source_field
            ) {
              // $(&quot;#addentity&quot;).css(&quot;border-color&quot;, &quot;#DD3646&quot;);
              $(&#x27;#addentity&#x27;).parents(&#x27;div&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
              $(&#x27;#infoWarning3&#x27;).css({
                top: &#x27;35%&#x27;,
                position: &#x27;absolute&#x27;,
                right: &#x27;3%&#x27;,
                display: &#x27;block&#x27;,
              });
              $(&#x27;#entitytarget&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
              $(&#x27;#infoWarning4&#x27;).css({
                top: &#x27;35%&#x27;,
                position: &#x27;absolute&#x27;,
                right: &#x27;3%&#x27;,
                display: &#x27;block&#x27;,
              });
            } else if (
              this.newMappingObj[this.selectedStage.type].defaultValue
                .target_field &#x3D;&#x3D;&#x3D; &#x27;&#x27; &amp;&amp;
              this.newMappingObj[this.selectedStage.type].defaultValue
                .source_field &#x3D;&#x3D;&#x3D; &#x27;&#x27; &amp;&amp;
              this.newMappingObj[this.selectedStage.type].defaultValue
                .entity_types.length
            ) {
              $(&#x27;#entitytarget&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
              $(&#x27;#infoWarning4&#x27;).css({
                top: &#x27;35%&#x27;,
                position: &#x27;absolute&#x27;,
                right: &#x27;3%&#x27;,
                display: &#x27;block&#x27;,
              });
              $(&#x27;#dropdownBasic1entity&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
            } else if (
              this.newMappingObj[this.selectedStage.type].defaultValue
                .source_field &#x3D;&#x3D;&#x3D; &#x27;&#x27; &amp;&amp;
              this.newMappingObj[this.selectedStage.type].defaultValue
                .target_field &amp;&amp;
              this.newMappingObj[this.selectedStage.type].defaultValue
                .entity_types.length
            ) {
              $(&#x27;#dropdownBasic1entity&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
            } else if (
              this.newMappingObj[this.selectedStage.type].defaultValue
                .entity_types.length &#x3D;&#x3D; 0 &amp;&amp;
              this.newMappingObj[this.selectedStage.type].defaultValue
                .source_field &amp;&amp;
              this.newMappingObj[this.selectedStage.type].defaultValue
                .target_field
            ) {
              //$(&quot;#addentity&quot;).css(&quot;border-color&quot;, &quot;#DD3646&quot;);
              $(&#x27;#addentity&#x27;).parents(&#x27;div&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
              $(&#x27;#infoWarning3&#x27;).css({
                top: &#x27;35%&#x27;,
                position: &#x27;absolute&#x27;,
                right: &#x27;3%&#x27;,
                display: &#x27;block&#x27;,
              });
            } else if (
              this.newMappingObj[this.selectedStage.type].defaultValue
                .target_field &#x3D;&#x3D; &#x27;&#x27;
            ) {
              $(&#x27;#entitytarget&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
              $(&#x27;#infoWarning4&#x27;).css({
                top: &#x27;35%&#x27;,
                position: &#x27;absolute&#x27;,
                right: &#x27;3%&#x27;,
                display: &#x27;block&#x27;,
              });
            }
            this.notificationService.notify(
              &#x27;Enter the required fields to proceed&#x27;,
              &#x27;error&#x27;
            );
          } else {
            if (save &#x3D;&#x3D;&#x3D; true) {
              this.saveConfig();
            } else {
              this.simulate();
            }
          }
        }
      } else if (this.selectedStage.type &#x3D;&#x3D;&#x3D; &#x27;traits_extraction&#x27;) {
        for (let i &#x3D; 0; i &lt; this.selectedStage.condition.mappings.length; i++) {
          if (
            (this.selectedStage.condition.mappings[i].operator &#x3D;&#x3D;&#x3D; &#x27;&#x27; ||
              this.basic_fieldName &#x3D;&#x3D;&#x3D; &#x27;&#x27;) &amp;&amp;
            this.newMappingObj[this.selectedStage.type].defaultValue
              .source_field &amp;&amp;
            this.newMappingObj[this.selectedStage.type].defaultValue
              .trait_groups.length !&#x3D; 0 &amp;&amp;
            this.newMappingObj[this.selectedStage.type].defaultValue
              .target_field
          ) {
            const warningmessage &#x3D;
              &#x27;Chosen stage will be applied on all documents since there are no conditions provided&#x27;;
            // this.notificationService.notify(&#x27;Chosen stage will be applied on all documents since there are no conditions provided&#x27;,&#x27;warning&#x27;)
            if (save &#x3D;&#x3D;&#x3D; true) {
              this.saveConfig(warningmessage);
            } else {
              this.simulate(warningmessage);
            }
          } else if (
            this.newMappingObj[this.selectedStage.type].defaultValue
              .source_field &#x3D;&#x3D;&#x3D; &#x27;&#x27; ||
            this.newMappingObj[this.selectedStage.type].defaultValue
              .trait_groups.length &#x3D;&#x3D; 0 ||
            this.newMappingObj[this.selectedStage.type].defaultValue
              .target_field &#x3D;&#x3D;&#x3D; &#x27;&#x27;
          ) {
            if (
              this.newMappingObj[this.selectedStage.type].defaultValue
                .source_field &#x3D;&#x3D;&#x3D; &#x27;&#x27; &amp;&amp;
              this.newMappingObj[this.selectedStage.type].defaultValue
                .trait_groups.length &#x3D;&#x3D; 0 &amp;&amp;
              this.newMappingObj[this.selectedStage.type].defaultValue
                .target_field &#x3D;&#x3D;&#x3D; &#x27;&#x27;
            ) {
              $(&#x27;#dropdownBasic1entity&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
              //$(&quot;#traitsgroup&quot;).css(&quot;border-color&quot;, &quot;#DD3646&quot;);
              $(&#x27;#traitsgroup&#x27;).parents(&#x27;div&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
              $(&#x27;#infoWarning5&#x27;).css({
                top: &#x27;35%&#x27;,
                position: &#x27;absolute&#x27;,
                right: &#x27;3%&#x27;,
                display: &#x27;block&#x27;,
              });
              $(&#x27;#entitytarget&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
              $(&#x27;#infoWarning4&#x27;).css({
                top: &#x27;35%&#x27;,
                position: &#x27;absolute&#x27;,
                right: &#x27;3%&#x27;,
                display: &#x27;block&#x27;,
              });
            } else if (
              this.newMappingObj[this.selectedStage.type].defaultValue
                .source_field &#x3D;&#x3D;&#x3D; &#x27;&#x27; &amp;&amp;
              this.newMappingObj[this.selectedStage.type].defaultValue
                .trait_groups.length &#x3D;&#x3D; 0
            ) {
              $(&#x27;#dropdownBasic1entity&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
              //$(&quot;#traitsgroup&quot;).css(&quot;border-color&quot;, &quot;#DD3646&quot;);
              $(&#x27;#traitsgroup&#x27;).parents(&#x27;div&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
              $(&#x27;#infoWarning5&#x27;).css({
                top: &#x27;35%&#x27;,
                position: &#x27;absolute&#x27;,
                right: &#x27;3%&#x27;,
                display: &#x27;block&#x27;,
              });
            } else if (
              this.newMappingObj[this.selectedStage.type].defaultValue
                .trait_groups.length &#x3D;&#x3D; 0 &amp;&amp;
              this.newMappingObj[this.selectedStage.type].defaultValue
                .target_field &#x3D;&#x3D;&#x3D; &#x27;&#x27;
            ) {
              //$(&quot;#traitsgroup&quot;).css(&quot;border-color&quot;, &quot;#DD3646&quot;);
              $(&#x27;#traitsgroup&#x27;).parents(&#x27;div&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
              $(&#x27;#infoWarning5&#x27;).css({
                top: &#x27;35%&#x27;,
                position: &#x27;absolute&#x27;,
                right: &#x27;3%&#x27;,
                display: &#x27;block&#x27;,
              });
              $(&#x27;#entitytarget&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
              $(&#x27;#infoWarning4&#x27;).css({
                top: &#x27;35%&#x27;,
                position: &#x27;absolute&#x27;,
                right: &#x27;3%&#x27;,
                display: &#x27;block&#x27;,
              });
            } else if (
              this.newMappingObj[this.selectedStage.type].defaultValue
                .target_field &#x3D;&#x3D;&#x3D; &#x27;&#x27; &amp;&amp;
              this.newMappingObj[this.selectedStage.type].defaultValue
                .source_field &#x3D;&#x3D;&#x3D; &#x27;&#x27;
            ) {
              $(&#x27;#entitytarget&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
              $(&#x27;#infoWarning4&#x27;).css({
                top: &#x27;35%&#x27;,
                position: &#x27;absolute&#x27;,
                right: &#x27;3%&#x27;,
                display: &#x27;block&#x27;,
              });
              $(&#x27;#dropdownBasic1entity&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
            } else if (
              this.newMappingObj[this.selectedStage.type].defaultValue
                .source_field &#x3D;&#x3D;&#x3D; &#x27;&#x27;
            ) {
              $(&#x27;#dropdownBasic1entity&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
            } else if (
              this.newMappingObj[this.selectedStage.type].defaultValue
                .trait_groups.length &#x3D;&#x3D; 0
            ) {
              //$(&quot;#traitsgroup&quot;).css(&quot;border-color&quot;, &quot;#DD3646&quot;);
              $(&#x27;#traitsgroup&#x27;).parents(&#x27;div&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
              $(&#x27;#infoWarning5&#x27;).css({
                top: &#x27;35%&#x27;,
                position: &#x27;absolute&#x27;,
                right: &#x27;3%&#x27;,
                display: &#x27;block&#x27;,
              });
            } else if (
              this.newMappingObj[this.selectedStage.type].defaultValue
                .target_field &#x3D;&#x3D;&#x3D; &#x27;&#x27;
            ) {
              $(&#x27;#entitytarget&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
              $(&#x27;#infoWarning4&#x27;).css({
                top: &#x27;35%&#x27;,
                position: &#x27;absolute&#x27;,
                right: &#x27;3%&#x27;,
                display: &#x27;block&#x27;,
              });
            }
            this.notificationService.notify(
              &#x27;Enter the required fields to proceed&#x27;,
              &#x27;error&#x27;
            );
          } else {
            if (save &#x3D;&#x3D;&#x3D; true) {
              this.saveConfig();
            } else {
              this.simulate();
            }
          }
        }
      } else if (this.selectedStage.type &#x3D;&#x3D;&#x3D; &#x27;keyword_extraction&#x27;) {
        for (let i &#x3D; 0; i &lt; this.selectedStage.condition.mappings.length; i++) {
          if (
            (this.selectedStage.condition.mappings[i].operator &#x3D;&#x3D;&#x3D; &#x27;&#x27; ||
              this.basic_fieldName &#x3D;&#x3D;&#x3D; &#x27;&#x27;) &amp;&amp;
            this.newMappingObj[this.selectedStage.type].defaultValue
              .source_field &amp;&amp;
            this.newMappingObj[this.selectedStage.type].defaultValue
              .target_field
          ) {
            const warningmessage &#x3D;
              &#x27;Chosen stage will be applied on all documents since there are no conditions provided&#x27;;
            // this.notificationService.notify(&#x27;Chosen stage will be applied on all documents since there are no conditions provided&#x27;,&#x27;warning&#x27;)
            if (save &#x3D;&#x3D;&#x3D; true) {
              this.saveConfig(warningmessage);
            } else {
              this.simulate(warningmessage);
            }
          } else if (
            this.newMappingObj[this.selectedStage.type].defaultValue
              .source_field &#x3D;&#x3D;&#x3D; &#x27;&#x27; ||
            this.newMappingObj[this.selectedStage.type].defaultValue
              .target_field &#x3D;&#x3D;&#x3D; &#x27;&#x27;
          ) {
            if (
              this.newMappingObj[this.selectedStage.type].defaultValue
                .source_field &#x3D;&#x3D;&#x3D; &#x27;&#x27; &amp;&amp;
              this.newMappingObj[this.selectedStage.type].defaultValue
                .target_field &#x3D;&#x3D;&#x3D; &#x27;&#x27;
            ) {
              $(&#x27;#dropdownBasic1entity&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
              $(&#x27;#entitytarget&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
              $(&#x27;#infoWarning4&#x27;).css({
                top: &#x27;35%&#x27;,
                position: &#x27;absolute&#x27;,
                right: &#x27;3%&#x27;,
                display: &#x27;block&#x27;,
              });
            } else if (
              this.newMappingObj[this.selectedStage.type].defaultValue
                .source_field &#x3D;&#x3D;&#x3D; &#x27;&#x27;
            ) {
              $(&#x27;#dropdownBasic1entity&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
            } else if (
              this.newMappingObj[this.selectedStage.type].defaultValue
                .target_field &#x3D;&#x3D;&#x3D; &#x27;&#x27;
            ) {
              $(&#x27;#entitytarget&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
              $(&#x27;#infoWarning4&#x27;).css({
                top: &#x27;35%&#x27;,
                position: &#x27;absolute&#x27;,
                right: &#x27;3%&#x27;,
                display: &#x27;block&#x27;,
              });
            }
            this.notificationService.notify(
              &#x27;Enter the required fields to proceed&#x27;,
              &#x27;error&#x27;
            );
          } else {
            if (save &#x3D;&#x3D;&#x3D; true) {
              this.saveConfig();
            } else {
              this.simulate();
            }
          }
        }
      } else if (this.selectedStage.type &#x3D;&#x3D;&#x3D; &#x27;semantic_meaning&#x27;) {
        console.log(this.selectedStage.condition.mappings.length);
        for (let i &#x3D; 0; i &lt; this.selectedStage.condition.mappings.length; i++) {
          if (
            (this.selectedStage.condition.mappings[i].operator &#x3D;&#x3D;&#x3D; &#x27;&#x27; ||
              this.basic_fieldName &#x3D;&#x3D;&#x3D; &#x27;&#x27;) &amp;&amp;
            this.newMappingObj[this.selectedStage.type].defaultValue
              .source_field &amp;&amp;
            this.newMappingObj[this.selectedStage.type].defaultValue
              .target_field
          ) {
            const warningmessage &#x3D;
              &#x27;Chosen stage will be applied on all documents since there are no conditions provided&#x27;;
            // this.notificationService.notify(&#x27;Chosen stage will be applied on all documents since there are no conditions provided&#x27;,&#x27;warning&#x27;)
            if (save &#x3D;&#x3D;&#x3D; true) {
              this.saveConfig(warningmessage);
            } else {
              this.simulate(warningmessage);
            }
          } else if (
            this.newMappingObj[this.selectedStage.type].defaultValue
              .source_field &#x3D;&#x3D;&#x3D; &#x27;&#x27; ||
            this.newMappingObj[this.selectedStage.type].defaultValue
              .target_field &#x3D;&#x3D;&#x3D; &#x27;&#x27;
          ) {
            if (
              this.newMappingObj[this.selectedStage.type].defaultValue
                .source_field &#x3D;&#x3D;&#x3D; &#x27;&#x27; &amp;&amp;
              this.newMappingObj[this.selectedStage.type].defaultValue
                .target_field &#x3D;&#x3D;&#x3D; &#x27;&#x27;
            ) {
              $(&#x27;#dropdownBasic1entity&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
              $(&#x27;#entitytarget&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
              $(&#x27;#infoWarning4&#x27;).css({
                top: &#x27;35%&#x27;,
                position: &#x27;absolute&#x27;,
                right: &#x27;3%&#x27;,
                display: &#x27;block&#x27;,
              });
            } else if (
              this.newMappingObj[this.selectedStage.type].defaultValue
                .source_field &#x3D;&#x3D;&#x3D; &#x27;&#x27;
            ) {
              $(&#x27;#dropdownBasic1entity&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
            } else if (
              this.newMappingObj[this.selectedStage.type].defaultValue
                .target_field &#x3D;&#x3D;&#x3D; &#x27;&#x27;
            ) {
              $(&#x27;#entitytarget&#x27;).css(&#x27;border-color&#x27;, &#x27;#DD3646&#x27;);
              $(&#x27;#infoWarning4&#x27;).css({
                top: &#x27;35%&#x27;,
                position: &#x27;absolute&#x27;,
                right: &#x27;3%&#x27;,
                display: &#x27;block&#x27;,
              });
            }
            this.notificationService.notify(
              &#x27;Enter the required fields to proceed&#x27;,
              &#x27;error&#x27;
            );
          } else {
            if (save &#x3D;&#x3D;&#x3D; true) {
              this.saveConfig();
            } else {
              this.simulate();
            }
          }
        }
      }
    } else {
      this.notificationService.notify(
        &#x27;Please enter the required Fileds&#x27;,
        &#x27;error&#x27;
      );
      return false;
    }
  }

  scriptTextFlow(plainScriptTxt) {
    if (plainScriptTxt) {
      if (
        this.newMappingObj &amp;&amp;
        this.newMappingObj.custom_script &amp;&amp;
        this.newMappingObj.custom_script.defaultValue &amp;&amp;
        this.newMappingObj.custom_script.defaultValue.script &amp;&amp;
        this.newMappingObj.custom_script.defaultValue.script !&#x3D; plainScriptTxt
      ) {
        this.newMappingObj.custom_script.defaultValue.script &#x3D; plainScriptTxt;
      }
    }
  }
  simulate(warningmessage?) {
    let stagesList &#x3D; &#x27;&#x27;;
    this.pipeline.forEach(function (stage: any) {
      stagesList &#x3D; stagesList + (stagesList ? &#x27;, &#x27; : &#x27;&#x27;) + stage.type;
    });
    this.mixpanel.postEvent(&#x27;Workbench Simulated&#x27;, {
      &#x27;Stage count&#x27;: this.pipeline.length,
      &#x27;Stage list&#x27;: stagesList,
    });
    this.loadingSimulate &#x3D; true;
    let plainScriptTxt: any;
    if (
      this.newMappingObj &amp;&amp;
      this.newMappingObj.custom_script &amp;&amp;
      this.newMappingObj.custom_script.defaultValue &amp;&amp;
      this.newMappingObj.custom_script.defaultValue.script
    ) {
      plainScriptTxt &#x3D; this.newMappingObj.custom_script.defaultValue.script;
    }
    const indexArrayLength: any &#x3D; this.validateConditionForRD();
    if (indexArrayLength) {
      this.removeExcludeDocumentStage(indexArrayLength, false);
    } else {
      this.simulteObj.showSimulation &#x3D; true;
      const self &#x3D; this;
      this.simulating &#x3D; true;
      this.simulteObj.simulating &#x3D; true;
      const payload: any &#x3D; {
        sourceType: this.simulteObj.sourceType,
        noOfDocuments: this.simulteObj.docCount || 5,
        // pipelineConfig: this.preparepayload()
      };
      if (
        [
          &#x27;serviceNow&#x27;,
          &#x27;confluenceCloud&#x27;,
          &#x27;confluenceServer&#x27;,
          &#x27;zendesk&#x27;,
          &#x27;sharepointOnline&#x27;,
        ].includes(this.sourceType)
      ) {
        payload.connectorType &#x3D; this.sourceType;
        payload.sourceType &#x3D; &#x27;connector&#x27;;
      }
      const stages &#x3D; this.preparepayload();
      if (this.currentEditIndex &gt; -1) {
        payload.pipelineConfig &#x3D; stages.slice(0, this.currentEditIndex + 1);
        //payload.pipelineConfig &#x3D; [stages[this.currentEditIndex]];
      } else {
        payload.pipelineConfig &#x3D; stages;
      }
      if (this.currentEditIndex) {
        this.simulateAnimate(payload.pipelineConfig);
      } else {
        if (this.pollingSubscriber) {
          this.pollingSubscriber.unsubscribe();
        }
      }
      const quaryparms: any &#x3D; {
        searchIndexID: this.serachIndexId,
        indexPipelineId: this.indexPipelineId,
      };
      this.searchSimulator &#x3D; &#x27;&#x27;;
      /** Workbench plain text temp */
      this.scriptTextFlow(plainScriptTxt);
      this.service.invoke(&#x27;post.simulate&#x27;, quaryparms, payload).subscribe(
        (res) &#x3D;&gt; {
          /** Workbench plain text temp */
          // if (this.newMappingObj &amp;&amp; this.newMappingObj.custom_script &amp;&amp;
          //   this.newMappingObj.custom_script.defaultValue &amp;&amp;
          //   this.newMappingObj.custom_script.defaultValue.script &amp;&amp;
          //   this.newMappingObj.custom_script.defaultValue.script !&#x3D; plainScriptTxt) {
          //   this.newMappingObj.custom_script.defaultValue.script &#x3D; plainScriptTxt;
          // }
          this.loadingSimulate &#x3D; false;
          this.simulteObj.simulating &#x3D; false;
          this.addcode(res);
          this.mixpanel.postEvent(&#x27;Initiated Simulator&#x27;, {});
          this.notificationService.notify(&#x27;Simulated Successfully&#x27;, &#x27;success&#x27;);
          if (warningmessage) {
            this.notificationService.notify(warningmessage, &#x27;warning&#x27;);
          }
          this.simulating &#x3D; false;
          if (this.pollingSubscriber) {
            this.pollingSubscriber.unsubscribe();
          }
          this.simulteObj.currentSimulateAnimi &#x3D; -1;
          this.simulteObj.simulationInprogress &#x3D; false;
          this.mixpanel.postEvent(&#x27;Workbench simulation complete&#x27;, {});
        },
        (errRes) &#x3D;&gt; {
          this.mixpanel.postEvent(&#x27;Workbench simulation failed&#x27;, {
            &#x27;Stage Fail Type&#x27;: this.selectedStage.category,
          });
          this.loadingSimulate &#x3D; false;
          if (warningmessage) {
            this.notificationService.notify(warningmessage, &#x27;warning&#x27;);
          }
          this.simulating &#x3D; false;
          this.simulteObj.simulating &#x3D; false;
          this.addcode({});
          if (this.pollingSubscriber) {
            this.pollingSubscriber.unsubscribe();
          }
          this.simulteObj.currentSimulateAnimi &#x3D; -1;
          this.simulteObj.simulationInprogress &#x3D; false;
          if (this.pollingSubscriber) {
            this.pollingSubscriber.unsubscribe();
          }
          this.simulteObj.currentSimulateAnimi &#x3D; -1;
          /** Workbench plain text temp */
          if (
            this.newMappingObj &amp;&amp;
            this.newMappingObj.custom_script &amp;&amp;
            this.newMappingObj.custom_script.defaultValue &amp;&amp;
            this.newMappingObj.custom_script.defaultValue.script
          ) {
            this.newMappingObj.custom_script.defaultValue.script &#x3D;
              plainScriptTxt;
          }
          this.errorToaster(errRes, &#x27;Failed to get stop words&#x27;);
        }
      );
    }
  }
  removeStage(i, stageType) {
    const dialogRef &#x3D; this.dialog.open(ConfirmationDialogComponent, {
      width: &#x27;530px&#x27;,
      height: &#x27;auto&#x27;,
      panelClass: &#x27;delete-popup&#x27;,
      data: {
        title: &#x27;Delete Stage&#x27;,
        text: &#x27;Are you sure you want to delete ?&#x27;,
        newTitle: &#x27;Are you sure you want to delete ?&#x27;,
        body: &#x27;Selected stage will be deleted from workbench.&#x27;,
        // text: &#x27;Do you want to discard this stage?&#x27;,
        // newTitle: &#x27;Do you want to discard this stage?&#x27;,
        // body:&#x27;The &#x27;+stageType+&#x27; stage will be discarded as it does not contain any conditions.&#x27;,
        buttons: [
          { key: &#x27;yes&#x27;, label: &#x27;Delete&#x27;, type: &#x27;danger&#x27; },
          { key: &#x27;no&#x27;, label: &#x27;Cancel&#x27; },
        ],
        confirmationPopUp: true,
      },
    });

    dialogRef.componentInstance.onSelect.subscribe((result) &#x3D;&gt; {
      if (result &#x3D;&#x3D;&#x3D; &#x27;yes&#x27;) {
        if (this.pipeline[i]._id) {
          this.modifiedStages.deletedStages.push(this.pipeline[i]);
        } else {
          if (this.modifiedStages.createdStages.length) {
            const index &#x3D; this.modifiedStages.createdStages.findIndex(
              (d) &#x3D;&gt; d.type &#x3D;&#x3D; this.pipeline[i].type
            );
            if (index &gt; -1) {
              this.modifiedStages.createdStages.splice(index, 1);
            }
          }
        }
        this.pipeline.splice(i, 1);
        this.search_basic_fieldName &#x3D; &#x27;&#x27;;
        this.basic_fieldName &#x3D; &#x27;&#x27;;
        dialogRef.close();
        this.notificationService.notify(&#x27;Deleted Successfully&#x27;, &#x27;success&#x27;);
        if (this.pipeline &amp;&amp; this.pipeline.length) {
          this.selectStage(this.pipeline[0], 0);
        } else {
          this.selectedStage &#x3D; null;
        }
      } else if (result &#x3D;&#x3D;&#x3D; &#x27;no&#x27;) {
        dialogRef.close();
        // console.log(&#x27;deleted&#x27;)
      }
    });
  }
  addField() {
    const payload: any &#x3D; {
      fields: [],
    };
    this.newfieldsData.forEach((field) &#x3D;&gt; {
      // const tempPayload: any &#x3D; {
      //   fieldName: field.fieldName,
      //   fieldDataType: field.fieldDataType,
      //   isMultiValued: field.isMultiValued,
      //   isRequired: field.isRequired,
      //   isStored: field.isStored,
      //   isIndexed: field.isIndexed,
      // }
      const tempPayload: any &#x3D; {
        fieldName: field.fieldName,
        fieldDataType: field.fieldDataType,
        isAutosuggest: field.isAutosuggest ? field.isAutosuggest : false,
        isSearchable: field.isSearchable ? field.isSearchable : false,
      };
      if (field.isActive) {
        payload.fields.push(tempPayload);
      }
    });
    const quaryparms: any &#x3D; {
      searchIndexID: this.serachIndexId,
      indexPipelineId: this.indexPipelineId,
    };
    let api &#x3D; &#x27;post.createField&#x27;;
    if (this.newFieldObj &amp;&amp; this.newFieldObj._id) {
      api &#x3D; &#x27;put.updateField&#x27;;
    }
    this.service.invoke(api, quaryparms, payload).subscribe(
      (res) &#x3D;&gt; {
        //this.notificationService.notify(&#x27;Fields added successfully&#x27;,&#x27;success&#x27;);
        this.notificationService.notify(
          &#x27;New Fields have been added. Please train to re-index the configuration&#x27;,
          &#x27;success&#x27;
        );
        this.closeModalPopup();
        this.getFileds();
      },
      (errRes) &#x3D;&gt; {
        this.errorToaster(errRes, &#x27;Failed to create field&#x27;);
      }
    );
  }
  getFileds(offset?) {
    this.loadingFields &#x3D; true;
    const quaryparms: any &#x3D; {
        searchIndexID: this.serachIndexId,
        indexPipelineId: this.indexPipelineId,
      },
      payload &#x3D; {
        sort: {
          fieldName: 1,
        },
      };
    const serviceId &#x3D; &#x27;post.allField&#x27;;
    // let serviceId &#x3D;&#x27;get.allField&#x27;;
    this.service.invoke(serviceId, quaryparms, payload).subscribe(
      (res) &#x3D;&gt; {
        this.fields &#x3D; res.fields || [];
        this.getIndexPipline();
        this.loadingFields &#x3D; false;
      },
      (errRes) &#x3D;&gt; {
        this.loadingFields &#x3D; false;
        this.errorToaster(errRes, &#x27;Failed to get index  stages&#x27;);
      }
    );
  }
  deleteIndField(record, dialogRef) {
    const quaryparms: any &#x3D; {
      searchIndexID: this.serachIndexId,
      fieldId: record._id,
    };
    this.service.invoke(&#x27;delete.deleteField&#x27;, quaryparms).subscribe(
      (res) &#x3D;&gt; {
        const deleteIndex &#x3D; _.findIndex(this.fields, (pg) &#x3D;&gt; {
          return pg._id &#x3D;&#x3D;&#x3D; record._id;
        });
        this.fields.splice(deleteIndex, 1);
        dialogRef.close();
      },
      (errRes) &#x3D;&gt; {
        this.errorToaster(errRes, &#x27;Failed to delete field&#x27;);
      }
    );
  }
  deleteFieldPop(record) {
    const dialogRef &#x3D; this.dialog.open(ConfirmationDialogComponent, {
      width: &#x27;530px&#x27;,
      height: &#x27;auto&#x27;,
      panelClass: &#x27;delete-popup&#x27;,
      data: {
        title: &#x27;Delete Field&#x27;,
        text: &#x27;Are you sure you want to delete selected field?&#x27;,
        newTitle: &#x27;Are you sure you want to delete?&#x27;,
        body: &#x27;Selected field will be deleted.&#x27;,
        buttons: [
          { key: &#x27;yes&#x27;, label: &#x27;Delete&#x27;, type: &#x27;danger&#x27; },
          { key: &#x27;no&#x27;, label: &#x27;Cancel&#x27; },
        ],
        confirmationPopUp: true,
      },
    });

    dialogRef.componentInstance.onSelect.subscribe((result) &#x3D;&gt; {
      if (result &#x3D;&#x3D;&#x3D; &#x27;yes&#x27;) {
        this.deleteIndField(record, dialogRef);
      } else if (result &#x3D;&#x3D;&#x3D; &#x27;no&#x27;) {
        dialogRef.close();
        // console.log(&#x27;deleted&#x27;)
      }
    });
  }
  //To obtain Title vaues in Entities
  prepEntityNlpData(entityTypeData) {
    let entityTypes &#x3D; [];
    entityTypes &#x3D; [...entityTypeData];
    for (let i &#x3D; 0; i &lt; entityTypeData.length; i++) {
      for (let j &#x3D; 0; j &lt; this.entityNlp.length; j++) {
        if (this.entityNlp[j].value &#x3D;&#x3D; entityTypeData[i]) {
          // entityTypeData[i] &#x3D; this.entityNlp[j].value
          entityTypes[i] &#x3D; this.entityNlp[j].title;
          console.log(this.tempConfigObj);
        }
      }
    }
    this.entityTypePayload.push(entityTypes);
  }
  getIndexPipline() {
    const quaryparms: any &#x3D; {
      searchIndexID: this.serachIndexId,
      indexPipelineId: this.indexPipelineId,
    };
    // console.log(&quot;index queryparams&quot;, quaryparms);
    this.service.invoke(&#x27;get.indexpipelineStages&#x27;, quaryparms).subscribe(
      (res) &#x3D;&gt; {
        this.mixpanel.postEvent(&#x27;Enter Workbench&#x27;, {});
        res.stages.map((data) &#x3D;&gt; {
          return data?.condition?.mappings?.map((data1) &#x3D;&gt; {
            const obj &#x3D; this.fields.find((da) &#x3D;&gt; da._id &#x3D;&#x3D;&#x3D; data1?.fieldId);
            data1.fieldName &#x3D; obj?.fieldName;
          });
        });
        this.pipeline &#x3D; res.stages || [];
        this.pipelineCopy &#x3D; JSON.parse(JSON.stringify(res.stages));
        this.pipeline.forEach((element) &#x3D;&gt; {
          if (element.type &#x3D;&#x3D;&#x3D; &#x27;entity_extraction&#x27;) {
            if (element.config &amp;&amp; element.config.mappings.length) {
              element.config.mappings.forEach((map, index) &#x3D;&gt; {
                this.prepEntityNlpData(map.entity_types);
                map.entity_types &#x3D; this.entityTypePayload[index];
                // map.entity_types &#x3D; this.entityTypePayload[index]
              });

              // this.prepEntityObj(element.config.mappings)
              // element.config.mappings
              // entityNlp
            }
          }
        });
        this.entityTypePayload &#x3D; [];
        this.pipelineCopy &#x3D; [...this.pipeline];
        if (res.stages &amp;&amp; res.stages.length) {
          this.selectStage(res.stages[0], 0);
        }
        this.loadingContent &#x3D; false;
        if (!this.inlineManual.checkVisibility(&#x27;WORKBENCH&#x27;)) {
          this.inlineManual.openHelp(&#x27;WORKBENCH&#x27;);
          this.inlineManual.visited(&#x27;WORKBENCH&#x27;);
        }
      },
      (errRes) &#x3D;&gt; {
        this.loadingContent &#x3D; false;
        this.errorToaster(errRes, &#x27;Failed to get index  stages&#x27;);
      }
    );
  }
  getSystemStages() {
    const quaryparms: any &#x3D; {
      searchIndexID: this.serachIndexId,
    };
    this.service.invoke(&#x27;get.platformStages&#x27;, quaryparms).subscribe(
      (res) &#x3D;&gt; {
        // removing Duplicate value - temporary
        if (!this.defaultStageTypes.length) {
          for (let index &#x3D; 0; index &lt; res.stages.length; index++) {
            if (
              index &lt; 12 &amp;&amp;
              res.stages[index].name !&#x3D;&#x3D; &#x27;FAQ Keyword Extraction&#x27;
            )
              this.defaultStageTypes.push(res.stages[index]);
          }
        }

        setTimeout(() &#x3D;&gt; {
          $(&#x27;#addToolTo&#x27;).click();
        }, 700);
      },
      (errRes) &#x3D;&gt; {
        this.errorToaster(errRes, &#x27;Failed to get stop words&#x27;);
      }
    );
  }
  confirmChangeDiscard(newstage?, i?) {
    const dialogRef &#x3D; this.dialog.open(ConfirmationDialogComponent, {
      width: &#x27;530px&#x27;,
      height: &#x27;auto&#x27;,
      panelClass: &#x27;delete-popup&#x27;,
      data: {
        title: &#x27;Discard current changes&#x27;,
        text: &#x27;Are you sure you want to discard current?&#x27;,
        newTitle: &#x27;Are you sure you want to discard?&#x27;,
        body: &#x27;Current changes will be discarded.&#x27;,
        buttons: [
          { key: &#x27;yes&#x27;, label: &#x27;Discard&#x27;, type: &#x27;danger&#x27; },
          { key: &#x27;no&#x27;, label: &#x27;Cancel&#x27; },
        ],
        confirmationPopUp: true,
      },
    });

    dialogRef.componentInstance.onSelect.subscribe((result) &#x3D;&gt; {
      if (result &#x3D;&#x3D;&#x3D; &#x27;yes&#x27;) {
        if (this.pipeline.length &gt; this.pipelineCopy) {
          i &#x3D; i - 1;
        }
        this.clearDirtyObj();
        if (newstage) {
          this.selectStage(newstage, i);
        } else {
          this.createNewMap();
        }
        dialogRef.close();
      } else if (result &#x3D;&#x3D;&#x3D; &#x27;no&#x27;) {
        dialogRef.close();
        // console.log(&#x27;deleted&#x27;)
      }
    });
  }
  removeConfig(index, list) {
    this.changesDetected &#x3D; true;
    list.splice(index, 1);
    /**if selected config mappings length is empty then adding new empty field made changes on 22/02*/
    if (list.length &#x3D;&#x3D;&#x3D; 0) {
      this.setResetNewMappingsObj();
    }
  }
  clearDirtyObj(cancel?) {
    this.pipeline &#x3D; JSON.parse(JSON.stringify(this.pipelineCopy));
    this.pipeline.map((data) &#x3D;&gt; {
      return data?.condition?.mappings?.map((data1) &#x3D;&gt; {
        const obj &#x3D; this.fields.find((da) &#x3D;&gt; da._id &#x3D;&#x3D;&#x3D; data1.fieldId);
        if (obj &amp;&amp; obj.fieldName) {
          data1.fieldName &#x3D; obj.fieldName;
        }
      });
    });
    if (this.selectedStage &amp;&amp; !this.selectedStage._id) {
      if (this.pipeline &amp;&amp; this.pipeline.length) {
        this.selectStage(this.pipeline[0], 0);
      } else {
        this.selectedStage &#x3D; null;
      }
    } else {
      const index &#x3D; _.findIndex(this.pipeline, (pg) &#x3D;&gt; {
        return pg._id &#x3D;&#x3D;&#x3D; this.selectedStage._id;
      });
      if (index &gt; -1) {
        this.selectedStage &#x3D; this.pipeline[index];
      }
    }
    if (!cancel) {
      this.currentEditIndex &#x3D; -1;
    }
    this.changesDetected &#x3D; false;
    this.setResetNewMappingsObj();
  }
  selectStage(stage, i) {
    if (this.changesDetected &amp;&amp; false) {
      this.confirmChangeDiscard(stage, i);
    } else {
      this.currentEditIndex &#x3D; i;
      this.selectedStageIndex &#x3D; i;
      //this.checkNewAddition();
      if (
        stage &amp;&amp;
        stage.type &#x3D;&#x3D;&#x3D; &#x27;custom_script&#x27; &amp;&amp;
        stage.config &amp;&amp;
        stage.config.mappings &amp;&amp;
        stage.config.mappings.length
      ) {
        if (!this.newMappingObj.custom_script) {
          this.newMappingObj.custom_script &#x3D; {
            defaultValue: {
              script: &#x27;&#x27;,
            },
          };
        }
        /**04/03 code updates as per FLY-4519 */
        console.log(&#x27;***********&#x27;, this.pipeline);
        this.pipeline.forEach((pipeLineStage, index) &#x3D;&gt; {
          if (
            pipeLineStage.type &#x3D;&#x3D;&#x3D; &#x27;custom_script&#x27; &amp;&amp;
            pipeLineStage.config &amp;&amp;
            pipeLineStage.config.hasOwnProperty(&#x27;mappings&#x27;) &amp;&amp;
            pipeLineStage.config.mappings.length &amp;&amp;
            i &#x3D;&#x3D; index
          ) {
            this.newMappingObj.custom_script.defaultValue.script &#x3D;
              pipeLineStage.config.mappings[0].script;
          } else if (
            pipeLineStage.type &#x3D;&#x3D;&#x3D; &#x27;custom_script&#x27; &amp;&amp;
            i &#x3D;&#x3D; index &amp;&amp;
            !pipeLineStage.config.hasOwnProperty(&#x27;mappings&#x27;)
          ) {
            this.newMappingObj.custom_script.defaultValue.script &#x3D; &#x27;&#x27;;
          }
        });
        //this.newMappingObj.custom_script.defaultValue.script &#x3D; stage.config.mappings[0].script || &#x27;&#x27;;
        //this.newMappingObj.custom_script.defaultValue.script &#x3D; stage.config.mappings[stage.config.mappings.length-1].script || &#x27;&#x27;;
      } else {
        if (!this.newMappingObj.custom_script) {
          this.newMappingObj.custom_script &#x3D; {
            defaultValue: {
              script: &#x27;&#x27;,
            },
          };
        }
        /**04/03 code updates as per FLY-4519 */
        if (
          stage &amp;&amp;
          stage.type &#x3D;&#x3D;&#x3D; &#x27;custom_script&#x27; &amp;&amp;
          !stage.config.hasOwnProperty(&#x27;mappings&#x27;)
        ) {
          this.newMappingObj.custom_script.defaultValue.script &#x3D; &#x27;&#x27;;
        }
        //this.newMappingObj.custom_script.defaultValue.script &#x3D; &#x27;&#x27;;
      }
      this.selectedStage &#x3D; stage;
      if ((stage &amp;&amp; stage.type) !&#x3D; &#x27;custom_script&#x27;) {
        this.setResetNewMappingsObj(&#x27;remove_mapping&#x27;);
      }
    }
  }
  checkDuplicateTags(suggestion: string, alltTags): boolean {
    return alltTags.every((f) &#x3D;&gt; f !&#x3D;&#x3D; suggestion);
  }
  addCustomScript(script) {
    this.changesDetected &#x3D; true;
    if (!(this.selectedStage.config &amp;&amp; this.selectedStage.config.mappings)) {
      this.selectedStage.config.mappings &#x3D; [];
    }
    this.selectedStage.config.mappings[0] &#x3D; {
      script,
    };
  }
  addEntityList(event: MatChipInputEvent, map) {
    this.changesDetected &#x3D; true;
    const input &#x3D; event.input;
    const value &#x3D; event.value;
    if ((value || &#x27;&#x27;).trim()) {
      if (!this.checkDuplicateTags((value || &#x27;&#x27;).trim(), map.entity_types)) {
        this.notificationService.notify(
          &#x27;Duplicate tags are not allowed&#x27;,
          &#x27;warning&#x27;
        );
        return;
      } else {
        map.entity_types.push(value.trim());
      }
    }
    if (input) {
      input.value &#x3D; &#x27;&#x27;;
    }
  }
  removeEntityList(map, entity) {
    this.changesDetected &#x3D; true;
    const index &#x3D; map.entity_types.indexOf(entity);
    if (index &gt;&#x3D; 0) {
      map.entity_types.splice(index, 1);
    }
  }
  addTraitsList(event: MatChipInputEvent, map) {
    this.changesDetected &#x3D; true;
    const input &#x3D; event.input;
    const value &#x3D; event.value;
    if ((value || &#x27;&#x27;).trim()) {
      if (!this.checkDuplicateTags((value || &#x27;&#x27;).trim(), map.trait_groups)) {
        this.notificationService.notify(
          &#x27;Duplicate tags are not allowed&#x27;,
          &#x27;warning&#x27;
        );
        return;
      } else {
        map.trait_groups.push(value.trim());
      }
    }
    if (input) {
      input.value &#x3D; &#x27;&#x27;;
    }
  }
  removeKeyWordsList(map, trait) {
    this.changesDetected &#x3D; true;
    const index &#x3D; map.trait_groups.indexOf(trait);
    if (index &gt;&#x3D; 0) {
      map.trait_groups.splice(index, 1);
    }
  }
  addKeyWordsList(event: MatChipInputEvent, map) {
    this.changesDetected &#x3D; true;
    const input &#x3D; event.input;
    const value &#x3D; event.value;
    if ((value || &#x27;&#x27;).trim()) {
      if (!this.checkDuplicateTags((value || &#x27;&#x27;).trim(), map.trait_groups)) {
        this.notificationService.notify(
          &#x27;Duplicate tags are not allowed&#x27;,
          &#x27;warning&#x27;
        );
        return;
      } else {
        map.trait_groups.push(value.trim());
      }
    }
    if (input) {
      input.value &#x3D; &#x27;&#x27;;
    }
  }
  removeTraitsList(map, trait) {
    this.changesDetected &#x3D; true;
    const index &#x3D; map.trait_groups.indexOf(trait);
    if (index &gt;&#x3D; 0) {
      map.trait_groups.splice(index, 1);
    }
  }
  checkFieldsValidOrNot(map) {
    if (this.selectedStage.type &#x3D;&#x3D; &#x27;field_mapping&#x27;) {
      if (
        map.operation &#x3D;&#x3D;&#x3D; &#x27;rename&#x27; || map.operation &#x3D;&#x3D;&#x3D; &#x27;copy&#x27;
          ? !map.target_field || !map.source_field
          : map.operation &#x3D;&#x3D;&#x3D; &#x27;remove&#x27;
          ? !map.target_field
          : !map.target_field || !map.value
      ) {
        return false;
      }
    } else if (this.selectedStage.type &#x3D;&#x3D; &#x27;entity_extraction&#x27;) {
      if (!map.target_field || !map.source_field || !map.entity_types.length) {
        return false;
      }
    } else if (this.selectedStage.type &#x3D;&#x3D; &#x27;traits_extraction&#x27;) {
      if (!map.target_field || !map.source_field || !map.trait_groups.length) {
        return false;
      }
    } else if (
      this.selectedStage.type &#x3D;&#x3D; &#x27;keyword_extraction&#x27; ||
      this.selectedStage.type &#x3D;&#x3D; &#x27;semantic_meaning&#x27;
    ) {
      if (!map.target_field || !map.source_field) {
        // removing this &#x27; || !map.model &#x27; parameter to exectute the removal of choose model
        return false;
      }
    } else if (this.selectedStage.type &#x3D;&#x3D; &#x27;exclude_document&#x27;) {
      if (!map.target_field || !map.value) {
        return false;
      }
    } else if (this.selectedStage.type &#x3D;&#x3D; &#x27;snippet_extraction&#x27;) {
      if (!map.source_field) {
        return false;
      }
    }
    return true;
  }
  onSourcefieldChange(event, parent, no, e) {
    // console.log(event,parent,no)
    // e.stopPropagation();
    // $(this).next(&#x27;.dropdown-toggle&#x27;).find(&#x27;[data-toggle&#x3D;dropdown]&#x27;).dropdown(&#x27;toggle&#x27;);
    // parent.classList.add(&#x27;show&#x27;)
    // parent.children[1].classList.add(&#x27;show&#x27;);
    // parent.children[1].style.top &#x3D;&quot;0px&quot;;
  }
  addFiledmappings(map, isNotDefault?) {
    this.changesDetected &#x3D; true;
    if (!this.selectedStage.config) {
      this.selectedStage.config &#x3D; {
        mappings: [],
      };
    }
    if (!this.selectedStage.config.mappings) {
      this.selectedStage.config.mappings &#x3D; [];
    }
    if (isNotDefault &amp;&amp; !this.checkFieldsValidOrNot(map)) {
      return;
    }
    this.selectedStage.config.mappings.push(map);
    if (this.selectedStage.type !&#x3D;&#x3D; &#x27;custom_script&#x27;) {
      this.setResetNewMappingsObj(&#x27;remove_mapping&#x27;, true, true);
    }
  }
  closeNewStage() {
    this.showNewStageType &#x3D; false;
    if (this.pipeline &amp;&amp; this.pipeline.length) {
      this.selectedStage &#x3D; this.pipeline[0];
    }
  }
  switchStage(systemStage, i) {
    if (this.showNewStageType) {
      const obj: any &#x3D; new StageClass();
      const newArray &#x3D; [];
      obj.name &#x3D; this.defaultStageTypes[i].name;
      obj.enable &#x3D; true;
      obj.type &#x3D; this.defaultStageTypes[i].type;
      obj.category &#x3D; this.defaultStageTypes[i].category;
      newArray.push(obj);
      this.pipeline &#x3D; newArray.concat(this.pipeline || []);
      this.selectedStage &#x3D; this.pipeline[0];
      this.showNewStageType &#x3D; false;
      this.modifiedStages.createdStages.push(this.pipeline[0]);
      this.mixpanel.postEvent(&#x27;Workbench Stage added&#x27;, {
        &#x27;Stage Type&#x27;: obj.type,
      });
    }
    this.selectedStage.type &#x3D; this.defaultStageTypes[i].type;
    this.selectedStage.category &#x3D; this.defaultStageTypes[i].category;
    this.selectedStage.name &#x3D; this.defaultStageTypesObj[systemStage.type].name;
    this.selectedStage.config &#x3D; {};
    //if (systemStage?.type !&#x3D;&#x3D; &#x27;custom_script&#x27;) {
    this.selectedStage.condition &#x3D; {
      type: &#x27;basic&#x27;,
      mappings: [{ fieldId: &#x27;&#x27;, operator: &#x27;&#x27;, value: [] }],
    };
    //}
    /** Adding defaullt Configfor Custom Script */
    if (systemStage &amp;&amp; systemStage.type &#x3D;&#x3D;&#x3D; &#x27;custom_script&#x27;) {
      this.selectedStage.config &#x3D; { mappings: [{ script: &#x27;&#x27; }] };
    }
    if (systemStage &amp;&amp; systemStage.type &#x3D;&#x3D;&#x3D; &#x27;custom_script&#x27;) {
      if (!this.newMappingObj.custom_script) {
        this.newMappingObj.custom_script &#x3D; {
          defaultValue: {
            script: &#x27;&#x27;,
          },
        };
      }
      this.newMappingObj.custom_script.defaultValue.script &#x3D; &#x27;&#x27;;
      this.setResetNewMappingsObj();
    }
  }
  createNewMap() {
    if (this.changesDetected &amp;&amp; false) {
      this.confirmChangeDiscard();
    } else {
      this.changesDetected &#x3D; true;
      const obj: any &#x3D; new StageClass();
      const newArray &#x3D; [];
      obj.name &#x3D; this.defaultStageTypes[0].name;
      obj.enable &#x3D; true;
      obj.type &#x3D; this.defaultStageTypes[0].type;
      obj.category &#x3D; this.defaultStageTypes[0].category;
      newArray.push(obj);
      this.pipeline &#x3D; newArray.concat(this.pipeline);
      this.selectedStage &#x3D; this.pipeline[0];
    }
  }
  selectNewItem(defaultStage) {
    this.newStageObj &#x3D; JSON.parse(JSON.stringify(defaultStage));
  }
  errorToaster(errRes, message) {
    if (
      errRes &amp;&amp;
      errRes.error &amp;&amp;
      errRes.error.errors &amp;&amp;
      errRes.error.errors.length &amp;&amp;
      errRes.error.errors[0].msg
    ) {
      this.notificationService.notify(errRes.error.errors[0].msg, &#x27;error&#x27;);
    } else if (message) {
      this.notificationService.notify(message, &#x27;error&#x27;);
    } else {
      this.notificationService.notify(&#x27;Somthing went worng&#x27;, &#x27;error&#x27;);
    }
  }
  selectAll() {
    this.newfieldsData.forEach((element) &#x3D;&gt; {
      element.isActive &#x3D; this.isActiveAll;
    });
  }

  selectSingle(isActive) {
    if (isActive) {
      let fieldActive &#x3D; false;
      this.newfieldsData.forEach((element) &#x3D;&gt; {
        if (element.isActive &amp;&amp; !fieldActive) {
          this.isActiveAll &#x3D; true;
        } else {
          fieldActive &#x3D; true;
          this.isActiveAll &#x3D; false;
        }
      });
    } else {
      this.isActiveAll &#x3D; false;
    }
  }
  focusoutSearch() {
    if (this.activeClose) {
      this.searchSimulator &#x3D; &#x27;&#x27;;
      this.activeClose &#x3D; false;
      this.searchBySimulator();
    }
    this.showSearch &#x3D; !this.showSearch;
  }
  focusinSearch(inputSearch) {
    setTimeout(() &#x3D;&gt; {
      document.getElementById(inputSearch).focus();
    }, 100);
  }
  searchBySimulator() {
    const filtered &#x3D; this.getKeyByValue(
      this.simulateJson.simulate_docs,
      this.searchSimulator
    );
    this.filteredSimulatorRes &#x3D; JSON.stringify(filtered, null, &#x27; &#x27;);
  }
  getKeyByValue(object, searchSimulator) {
    searchSimulator &#x3D; searchSimulator.toLowerCase();
    const filteredObject: any &#x3D; {};
    Object.keys(object).forEach((key) &#x3D;&gt; {
      if (key.toLowerCase().search(searchSimulator) &gt; -1) {
        filteredObject[key] &#x3D; object[key];
      } else if (object[key].length &amp;&amp; this.checkIsArray(object[key])) {
        object[key].forEach((element, index) &#x3D;&gt; {
          Object.keys(element).forEach((key1) &#x3D;&gt; {
            if (key1.toLowerCase().search(searchSimulator) &gt; -1) {
              if (!((filteredObject || {})[key] || []).length) {
                filteredObject[key] &#x3D; [];
              }
              filteredObject[key].push({ [key1]: element[key1] });
            } else if (this.checkIsArray(element[key1])) {
              //
              element[key1].forEach((ele, index2) &#x3D;&gt; {
                Object.keys(ele).forEach((key2) &#x3D;&gt; {
                  if (key2.toLowerCase().search(searchSimulator) &gt; -1) {
                    if (!((filteredObject || {})[key] || []).length) {
                      filteredObject[key] &#x3D; [];
                    }
                    if (
                      !((filteredObject[key][index] || {})[key1] || []).length
                    ) {
                      filteredObject[key][index] &#x3D; { [key1]: [] };
                    }
                    filteredObject[key][index][key1].push({
                      [key2]: ele[key2],
                    });
                  }
                });
              });
              //
            }
          });
        });
      }
    });
    return filteredObject;
  }
  checkIsArray(value) {
    if (Array.isArray(value)) {
      return true;
    } else {
      return false;
    }
  }

  painlessScriptChanged(event) {
    const count &#x3D; this.codemirror.codeMirror.lineCount();
  }
  //matchip method
  add(event: MatChipInputEvent, index): void {
    const input &#x3D; event.input;
    const value &#x3D; event.value;
    if ((value || &#x27;&#x27;).trim()) {
      this.selectedStage.condition.mappings[index].value.push(value.trim());
    }
    if (input) {
      input.value &#x3D; &#x27;&#x27;;
    }
    this.containCtrl.setValue(null);
  }
  //remove matchip data
  remove(member: string, i): void {
    const index &#x3D;
      this.selectedStage.condition.mappings[i].value.indexOf(member);
    if (index &gt;&#x3D; 0)
      this.selectedStage.condition.mappings[i].value.splice(index, 1);
  }
  // selected(event: MatAutocompleteSelectedEvent): void {
  //   this.containCondition.push(event.option.viewValue);
  //   this.containInput.nativeElement.value &#x3D; &#x27;&#x27;;
  //   this.containCtrl.setValue(null);
  // }
  clearcontent() {
    if ($(&#x27;#searchBoxId&#x27;) &amp;&amp; $(&#x27;#searchBoxId&#x27;).length) {
      $(&#x27;#searchBoxId&#x27;)[0].value &#x3D; &#x27;&#x27;;
      this.search_basic_fieldName &#x3D; &#x27;&#x27;;
    }
  }
  // to clear source field content.
  clearcontentSrc() {
    if ($(&#x27;#searchBoxId1&#x27;) &amp;&amp; $(&#x27;#searchBoxId1&#x27;).length) {
      $(&#x27;#searchBoxId1&#x27;)[0].value &#x3D; &#x27;&#x27;;
      this.search_basic_fieldName1 &#x3D; &#x27;&#x27;;
    }
  }
  clearcontentSrcD() {
    if ($(&#x27;#searchBoxId2&#x27;) &amp;&amp; $(&#x27;#searchBoxId2&#x27;).length) {
      $(&#x27;#searchBoxId2&#x27;)[0].value &#x3D; &#x27;&#x27;;
      this.search_basic_fieldName2 &#x3D; &#x27;&#x27;;
    }
  }
  clearcontentSrcURL() {
    if ($(&#x27;#searchBoxId4&#x27;) &amp;&amp; $(&#x27;#searchBoxId4&#x27;).length) {
      $(&#x27;#searchBoxId4&#x27;)[0].value &#x3D; &#x27;&#x27;;
      this.search_basic_fieldName4 &#x3D; &#x27;&#x27;;
    }
  }
  clearcontentSrcField() {
    if ($(&#x27;#searchBoxId3&#x27;) &amp;&amp; $(&#x27;#searchBoxId3&#x27;).length) {
      $(&#x27;#searchBoxId3&#x27;)[0].value &#x3D; &#x27;&#x27;;
      this.search_basic_fieldName3 &#x3D; &#x27;&#x27;;
    }
  }

  openUserMetaTagsSlider() {
    this.appSelectionService.topicGuideShow.next(undefined);
  }

  ngOnDestroy() {
    const self &#x3D; this;
    if (this.pollingSubscriber) {
      this.pollingSubscriber.unsubscribe();
    }
    if (this.subscription) {
      this.subscription.unsubscribe();
    }
  }
}
class StageClass {
  name: string;
  category: string;
  type: string;
  enable: boolean;
  condition: string;
  config: any &#x3D; {};
}
</code></pre>
    </div>
</div>









                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'class';
            var COMPODOC_CURRENT_PAGE_URL = 'StageClass.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
