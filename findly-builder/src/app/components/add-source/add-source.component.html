<div class="contentContainer" *ngIf="loadFullComponent"
  [ngClass]="{'fullHeight':!selectedSourceType || (selectedSourceType && (selectedSourceType.resourceType === 'manual')),'modalBody':resourceIDToOpen}">
  <div class="modal-type-header" *ngIf="resourceIDToOpen">
    <div class="title">{{selectedSourceType?.name}}</div>
    <div class="close_icon" (click)='cancleSourceAddition()'><img src="assets/icons/modal-close.svg"></div>
  </div>
  <!-- <h4 *ngIf="resourceIDToOpen" class="header-title"><img src="assets/images/closeCross.png" class="closeCross" (click)='cancleSourceAddition()'></h4> -->
  <perfect-scrollbar
    [ngClass]="{'fullHeightPS':!selectedSourceType || (selectedSourceType && (selectedSourceType.resourceType === 'manual'))}">
    <div class="h-100 position-relative addNewSource">
      <!-- <div class="sources-content-box-list h-100 d-none" *ngIf="!selectedSourceType">
        <div class="crawlContent row m-0 mb-4" *ngFor="let sourceCatagory of availableSources">
          <div class="col-12 main-title label_text">{{sourceCatagory.title}}</div>
          <div class="col-4 webDomain" (click)="selectSource(source)" *ngFor="let source of sourceCatagory.sources">
            <div class="box-block-flat">
              <div class="row">
                <div class="col-3" class="imageDiv"> <img src="{{source.icon}}"></div>
                <div class="col-9 text-div">
                  <img src="assets/icons/gray_info.svg" class="icon-gray">
                  <div class="title label_text m-0">{{source.name}}</div>
                  <div >{{source.description}}</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>     -->
      <div class="source_content_boxes" *ngIf="!selectedSourceType">
        <div class="crawlContent row" *ngFor="let sourceCatagory of availableSources">
          <div class="main-title col-12 p-0">{{sourceCatagory.title}}</div>
          <div class="card-data" (click)="selectSource(source)" *ngFor="let source of sourceCatagory.sources">
            <div class="img-block"><img src="{{source.icon}}"></div>
            <div class="titles-sec">
              <div class="p-title text-truncate" title="{{source.name}}">{{source.name}}</div>
              <div class="s-title text-truncate" title="{{source.description}}">{{source.description}}</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </perfect-scrollbar>
</div>

<!--old model code-->
<!-- <kr-modal modalType="default" #statusModalPop>
  <div class="status-modal-popup">
    <div class="modal_content" *ngIf="selectedSourceType">
      <div class="modal-header">{{selectedSourceType.name}} <img src="assets/images/close.svg"
          (click)="closeStatusModal()"></div>
      <div class="modal-body">
        <div class="success-check  pb-4"
          *ngIf="(selectedSourceType.resourceType === 'document') || (statusObject.status ==='success') || ((statusObject && statusObject.validation && statusObject.validation.validated) && !(statusObject.status==='failed')) || (statusObject.status==='success')">
          <img src="assets/icons/successCheck.svg">
        </div>
        <div class="configInProgress"
          *ngIf="!(statusObject && statusObject.validation && statusObject.validation.validated) && !((statusObject.status==='success') || (statusObject.status==='failed')) && !(selectedSourceType.resourceType === 'document')">
          <img class="loadingConfigs" src="assets/icons/gear-spinner.svg">
        </div>
        <div class="error-check" *ngIf="(statusObject.status==='failed')">
          <img src="assets/images/exclamationCircle-Red.svg">
        </div>
        <div class="message-success text-center"
          *ngIf="(statusObject && statusObject.validation && statusObject.validation.validated) && !((statusObject.status==='success') || (statusObject.status==='failed'))">
          {{(statusObject.validation.urlValidation && statusObject.validation.validated)?'Successfully Configured':'Validation In Progress'}}
        </div>
        <div class="message-success text-center" *ngIf="(statusObject.status==='success')">
          Source added Successfully
        </div>
        <div class="message-success text-center" *ngIf="(statusObject.status==='failed')">
          Failed to add Source
        </div>
        <ng-container *ngIf="statusObject && statusObject.validation && !(statusObject.status==='failed')">
          <div class="status-identification-content"
            *ngIf="!((statusObject.status==='success') || (statusObject.status==='failed'))">
            <div class="content-title" *ngIf="selectedSourceType && (selectedSourceType.resourceType === 'webdomain')">
              <img src="assets/images/source-icos/inprogress-blue.svg" *ngIf="!statusObject.validation.urlValidation">
              <img *ngIf="statusObject.validation.urlValidation" src="assets/images/source-icos/check-green.svg"
                class="successfullyConnected">
              <span>Initial URL validation</span>
            </div>
            <div class="content-title" *ngIf="selectedSourceType && (selectedSourceType.resourceType === 'document')">
              <img src="assets/images/source-icos/check-green.svg" class="successfullyConnected">
              <span>Initial file validation </span> <!--  <span >done</span>
            </div>
            <div class="content-title" *ngIf="statusObject.validation && statusObject.validation.sitemaps">
              <img src="assets/images/source-icos/inprogress-blue.svg" *ngIf="!statusObject.validation.validated">
              <img *ngIf="statusObject.validation.sitemaps" src="assets/images/source-icos/check-green.svg"
                class="successfullyConnected">
              <span *ngIf="!statusObject.validation.sitemaps">Sitemaps</span>
              <span *ngIf="!statusObject.validation.sitemaps">No Sitemaps</span>
              <span *ngIf="statusObject.validation.sitemaps">{{statusObject.validation.sitemaps.length}} Sitemaps</span>
            </div>
          </div>
        </ng-container>
        <div class="progressNote"
          *ngIf="(selectedSourceType.sourceType === 'content') && !((statusObject.status==='success') || (statusObject.status==='failed'))">
          <div *ngIf="(selectedSourceType.resourceType === 'webdomain')">Crawling In-progress</div>
          <div *ngIf="(selectedSourceType.resourceType === 'document')">Crawling In-progress</div>
        </div>
        <div class="progressNote"
          *ngIf="(selectedSourceType.sourceType === 'faq') && !((statusObject.status==='success') || (statusObject.status==='failed'))">
          <div>Faq Extraction In Progress</div>
        </div>
        <div class="text-center" *ngIf="!((statusObject.status==='success') || (statusObject.status==='failed'))">
          <mat-progress-bar mode="indeterminate" class="mat_progress_bar"></mat-progress-bar>
          <div class="relaxNote">You will be notified when the extraction progress is done</div>
        </div>
        <div class="text-center" *ngIf="(statusObject.status==='failed')">
          <div class="relaxNote">{{statusObject.statusMessage}}</div>
        </div>
      </div>
      <div class="modal-footer text-right" [ngClass]="{'centerModel': resourceIDToOpen}">
        <button type="button" class="kr-sg-button-secondary btn_lg float-none ml-2 mr-0" [ngClass]="{'d-none': statusObject.status==='success'}" data-dismiss="modal"
        (click)="stopCrwaling()">Cancel Extraction</button>
        <button type="button" class="kr-sg-button-primary btn_lg float-none ml-2 mr-0" data-dismiss="modal" [disabled]="crawlOkDisable"
          (click)="closeStatusModal()">Ok</button>
          <button type="button" class="kr-sg-button-secondary btn_lg float-none ml-2 mr-0" [ngClass]="{'d-none': statusObject.status==='success'}" data-dismiss="modal"
          (click)="stopCrwaling()">Abort</button>
         </div>
    </div>
  </div>
</kr-modal> -->

<!--Status popup-->
<kr-modal modalType="default" #statusModalPop>
  <div class="status-modal-popup">
    <div class="modal_content" *ngIf="selectedSourceType">
      <div class="modal-header">{{selectedSourceType.name}} <img src="assets/images/close.svg"
          (click)="closeStatusModal()"></div>
      <div class="modal-body">
        <div class="success-check" *ngIf="statusObject.status==='success'">
          <img src="assets/icons/content/latest-content-icons/success-check-o.svg">
        </div>
        <div class="error-check" *ngIf="(statusObject.status==='failed')">
          <img src="assets/icons/content/latest-content-icons/failed-check-o.svg">
        </div>
        <div class="status-body-check" *ngIf="selectedSourceType.sourceType === 'content'&&statusObject.status!=='failed'">
          <div class="success-check status-type-img"
            *ngIf="(statusObject?.validation?.url?.validated)||(selectedSourceType.resourceType === 'file')">
            <img src="assets/icons/content/latest-content-icons/success-check-o.svg">
          </div>
          <div class="error-check status-type-img"
            *ngIf="!(statusObject?.validation?.url?.validated)&&!(selectedSourceType.resourceType === 'file')">
            <img src="assets/icons/content/latest-content-icons/failed-check-o.svg">
          </div>
          <div class="configInProgress">
            <h1 class="status-type-header"><strong>{{(statusObject?.validation?.url?.validated)||(selectedSourceType.resourceType ===
                'file')?"Validation Successful":"Validation Failed"}}</strong></h1>
          </div>

        </div>
        <div class="message-success text-center" *ngIf="(statusObject.status==='success')">
          Source added Successfully
        </div>
        <div class="message-success text-center" *ngIf="(statusObject.status==='failed')">
          Failed to add Source
        </div>
        <ng-container *ngIf="selectedSourceType.sourceType !== 'faq'&&statusObject.status!=='success'">
          <div class="status-identification-content">
            <perfect-scrollbar class="content-scroll">
              <div class="content-title">
                <img src="assets/images/source-icos/check-green.svg"
                  *ngIf="(statusObject?.validation?.url?.validated||selectedSourceType.resourceType=='file')"
                  class="successfullyConnected">
                <img src="assets/images/source-icos/Info-red.svg"
                  *ngIf="!(statusObject?.validation?.url?.validated)&&selectedSourceType.resourceType!=='file'"
                  class="successfullyConnected">
                <span *ngIf="selectedSourceType.resourceType!='file'">Initial URL validation</span>
                <span *ngIf="selectedSourceType.resourceType=='file'">File Validation</span>
              </div>
              <div class="content-title"><img class="successfullyConnected" src="assets/images/source-icos/check-green.svg"><span>Initial URL validation</span></div>
              <div class="content-title"><img class="successfullyConnected" src="assets/images/source-icos/check-green.svg"><span>Initial URL validation</span></div>
              <div class="content-title"><img class="successfullyConnected" src="assets/images/source-icos/check-green.svg"><span>Initial URL validation</span></div>
              <div class="content-title"><img class="successfullyConnected" src="assets/images/source-icos/check-green.svg"><span>Initial URL validation</span></div>
              <div class="content-title"><img class="successfullyConnected" src="assets/images/source-icos/check-green.svg"><span>Initial URL validation</span></div>
            </perfect-scrollbar>
     
            <!-- <div class="content-description"
              *ngIf="selectedSourceType.resourceType!='file'&&(statusObject?.validation?.url?.validated)"> Now you can
              choose to crawl immediately or later</div> -->
          </div>
        </ng-container>
        <div class="progressNote"
          *ngIf="selectedSourceType.sourceType === 'faq'&&!((statusObject.status==='success') || (statusObject.status==='failed'))">
          <div>{{importFaqInprogress?'Import':'Faq Extraction'}} In Progress</div>
          <div class="text-center">
            <mat-progress-bar mode="indeterminate" class="mat_progress_bar"></mat-progress-bar>
            <div class="relaxNote">You will be notified when the {{importFaqInprogress?'import':'extraction'}} progress
              is done</div>
          </div>
        </div>
        <div class="configInProgress"
          *ngIf="statusObject?.validation?.url?.validated&&selectedSourceType.sourceType === 'web'">
          <h4>Now you can choose to Crawl immediately or later</h4>
        </div>
      </div>
      <div class="modal-footer text-right" [ngClass]="{'centerModel': resourceIDToOpen}">
        <button type="button" class="kr-sg-button-secondary btn_lg float-none ml-2 mr-0 d-none" data-dismiss="modal"
          (click)="cancelExtraction()"
          *ngIf="selectedSourceType.sourceType==='faq'&&statusObject.status!=='success'||statusObject.status=='failed'">Cancel
          Extraction</button>
        <button type="button" class="kr-sg-button-primary btn_lg float-none ml-2 mr-0" data-dismiss="modal"
          [disabled]="crawlOkDisable" (click)="closeStatusModal()"
          *ngIf="selectedSourceType.sourceType==='faq'">Ok</button>
        <button type="button" class="kr-sg-button-secondary btn_lg kr-btn-primary float-none ml-2 mr-0" data-dismiss="modal"
          (click)="closeStatusModal()"
          *ngIf="selectedSourceType.sourceType==='content'&&(statusObject?.validation?.url?.validated)||(selectedSourceType.resourceType === 'file')"> <span class="pr-2 icon-calendar"><img src="assets/icons/content/latest-content-icons/blue-calendar.svg" /></span>Crawl Later</button>
        <button type="button" class="kr-sg-button-primary btn_lg float-none ml-2 mr-0" data-dismiss="modal"
          (click)="jobOndemand()"
          *ngIf="selectedSourceType.sourceType==='content'&&selectedSourceType.resourceType === 'web'&&(statusObject?.validation?.url?.validated)"
          [disabled]="crawlOkDisable">Crawl</button>
        <button type="button" class="kr-sg-button-secondary btn_lg float-none ml-2 mr-0" data-dismiss="modal"
          *ngIf="selectedSourceType.sourceType==='content'&&selectedSourceType.resourceType === 'web'&&!(statusObject?.validation?.url?.validated)"
          (click)="retryValidation()">Retry</button>
        <button type="button" class="kr-sg-button-primary btn_lg float-none ml-2 mr-0" data-dismiss="modal"
          (click)="editConfiguration()"
          *ngIf="selectedSourceType.sourceType==='content'&&selectedSourceType.resourceType === 'web'&&!(statusObject?.validation?.url?.validated)">Edit
          Configuration</button>
      </div>
    </div>
  </div>
</kr-modal>

<!-- Manual FAQ Modal -->
<kr-modal modalType="center" modalClass="modal_popups_ addfaq" #addManualFaqModalPop>
  <ng-container *ngIf="selectedSourceType && selectedSourceType.resourceType === 'manual'">
    <div class="modal-header">
      <div class="title">Add FAQ</div>
      <div class="close_icon"><img (click)="cancleSourceAddition()" src="assets/icons/modal-close.svg"></div>
    </div>
    <perfect-scrollbar class="perfect-scroll-modal-body" #perfectScroll3>
      <div class="modal-body">
        <app-add-faq [faqUpdate]="faqUpdate.asObservable()" (addFaq)="addManualFaq($event)"
          (cancelfaqEvent)="faqCancle()"></app-add-faq>
      </div>
    </perfect-scrollbar>
    <div class="modal-footer">
      <button class="kr-sg-button-primary btn_lg" (click)="faqUpdateEvent()">Save</button>
      <button class="kr-sg-button-secondary btn_lg" (click)="faqCancle();">Cancel</button>
    </div>
  </ng-container>
</kr-modal>

<!-- FAQ and content upload file modal -->
<kr-modal modalType="center" modalClass="modal_popups_ addfaq" #addSourceModalPop>
  <ng-container *ngIf="selectedSourceType">
    <form #sourceCreation="ngForm">
      <div class="modal-header">
        <div class="title">{{selectedSourceType.name}}</div>
        <div class="close_icon"><img (click)="cancleSourceAddition()" src="assets/icons/modal-close.svg"></div>
      </div>
      <perfect-scrollbar class="addSourceModalBody addNewSource" #perfectScroll>
        <div class="modal-body">
          <div *ngIf="selectedSourceType" class="crerateWebCrawl" [ngClass]="{'pr-0': resourceIDToOpen}">
            <div class="crawl-form-title" *ngIf="!resourceIDToOpen"></div>
            <div class="kr-sg-input-text mb-4"
              *ngIf="(selectedSourceType.sourceType==='faq') || (selectedSourceType.resourceType==='web')|| (showSourceTitle)">
              <div class="label-text">Source Title<sup class="field-mandatory">*</sup></div>
              <input type="url" autocomplete="off" maxlength="60" id="addSourceTitleInput" name="sourceTitle"
                placeholder="Enter Title" [(ngModel)]="newSourceObj.name" (change)="inputChanged('title')"
                class="input-text" required>
              <img id="infoWarning" src="assets/icons/warning_escalation.svg" style="display: none;" height="12"
                width="12" />
            </div>
            <div class="kr-sg-input-text-area mb-3 " *ngIf="(selectedSourceType.resourceType === 'web') || showDesc">
              <div class="label-text">Description</div>
              <textarea autocomplete="off" [(ngModel)]="newSourceObj.desc" name="sourceDesc" maxlength="250"
                placeholder="Enter Description" class="input-text"></textarea>
            </div>
            <div *ngIf="(selectedSourceType.resourceType === 'web')">
              <div class="kr-sg-input-text mb-4">
                <div class="label-text">Source URL</div>
                <input type="text" autocomplete="off" name="url" (keyup)="urlChange()" (change)="urlChange()"
                  [disabled]="fileObj.fileId || fileObj.fileName" placeholder="http(s)://"
                  [(ngModel)]="newSourceObj.url" class="input-text">
              </div>
            </div>
            <div class="container-import"
              *ngIf="(selectedSourceType.sourceType==='faq') && (selectedSourceType.id=== 'faqDoc')">
              <div class="import">IMPORT FROM FILE</div>
            </div>
            <!-- File uploader with Drag & Drop START HERE -->

            <div class="browse-file-tabs-container"
              *ngIf="(selectedSourceType.sourceType==='faq') || (selectedSourceType.resourceType==='file')">
              <ul class="nav nav-tabs" *ngIf=" (selectedSourceType.id !='faqDoc')" role="tablist">
                <li class="nav-item">
                  <a class="nav-link active" data-toggle="tab" href="#fromfile" (click)="selectExtract('file')">Extract
                    from file</a>
                </li>
                <li class="nav-item ">
                  <a class="nav-link" data-toggle="tab" href="#fromurl" (click)="selectExtract('url')">Extract from
                    url</a>
                </li>
              </ul>
              <!-- Tab panes -->
              <div class="tab-content">
                <div id="fromfile" class="tab-pane browsebyfile active">
                  <div class="col-12 row mb-3 top-sec p-0 ml-0 mr-0" *ngIf="(selectedSourceType.id==='faqDoc')">
                    <div class="title-data col-6 p-0">Browse File</div>
                    <div class="actions-data col-6 p-0 d-flex align-items-center justify-content-end">
                      <span class="sample-text pr-2" (click)='downloadSampleData("json")'><img class="image mr-2"
                          src="assets/icons/docker/download.svg">Sample JSON</span>
                      <span class="sample-text pl-2" (click)='downloadSampleData("csv")'><img class="image mr-2"
                          src="assets/icons/docker/download.svg">Sample CSV</span>
                    </div>
                    <div class="data">You can upload either JSON or CSV file here</div>
                  </div>
                  <div class="kr-sg-input-text-area mb-4">
                    <div class="note-info" *ngIf="selectedSourceType.resourceType === 'file'">
                      <img src="assets/images/warning.svg"><b>Note:</b> Source titles are derived from uploaded files.
                    </div>
                    <div class="kr-sg-file-drag-drop">
                      <div class="drag-drop-sec"
                        [ngClass]="{'after-selection-items':(fileObj.fileName && selectedSourceType.sourceType=='content')}">
                        <ng-container *ngIf="!fileObj.fileName">
                          <input *ngIf="(selectedSourceType.resourceType ==='')" type="file" id="sourceFileUploader"
                            class="custom-file-input " (change)="fileChangeListener($event)"
                            aria-describedby="inputGroupFileAddon01" accept=".pdf">
                          <input *ngIf="(selectedSourceType.resourceType ==='importfaq')" type="file"
                            id="sourceFileUploader" class="custom-file-input " (change)="fileChangeListener($event)"
                            aria-describedby="inputGroupFileAddon01" accept=".csv,.json">
                          <input
                            *ngIf="(selectedSourceType.sourceType=='content' && selectedSourceType.resourceType =='file')"
                            type="file" id="sourceFileUploader" class="custom-file-input "
                            (change)="fileChangeListener($event)" aria-describedby="inputGroupFileAddon01"
                            accept=".pdf,.doc,.ppt,.xlsx,.txt,.docx" multiple>
                          <div class="imageDiv">
                            <img src="assets/images/source-icos/drog_frop.svg">
                          </div>
                          <div class="info_text"
                            *ngIf="(selectedSourceType.resourceType !='importfaq'&&selectedSourceType.resourceType !='')">
                            Drag and drop file anywhere on this section</div>
                          <div class="info_text"
                            *ngIf="(selectedSourceType.sourceType=='faq'&&selectedSourceType.resourceType =='')">Drag
                            and drop a <strong>pdf file</strong> anywhere on this section</div>
                          <div class="info_text" *ngIf="(selectedSourceType.resourceType ==='importfaq')">Drag and drop
                            file anywhere in this section</div>
                          <div class="or-divider">- or -</div>
                          <div class="custom-file">

                            <!-- <input type="file" id="sourceFileUploader" class="custom-file-input "
                                (change)="fileChangeListener($event)" aria-describedby="inputGroupFileAddon01" accept=".csv,.pdf"> -->
                          </div>
                          <label for="sourceFileUploader" class="drag-label adjust_z_index">
                            <span class="browse">Browse File</span>
                          </label>
                          <br />
                          <div class="info_help_text"
                            *ngIf="(selectedSourceType.sourceType=='content' && selectedSourceType.resourceType =='file')">
                            <img src="assets/icons/info.svg"> Supports: pdf, docx, ppt, xlsx, txt file types
                          </div>
                          <div *ngIf="selectedSourceType.sourceType=='content'" class="not-limit-size">Note: Maximum
                            upload limit is 10 files not exceeding 15 MB per file.</div>
                        </ng-container>

                        <ng-container *ngIf="fileObj.fileName && selectedSourceType.sourceType=='faq'">
                          <div class="kr-sg-file-drag-drop w-100">
                            <div class="uploaded-file-name"
                              [ngClass]="{'error':(fileObj.fileUploadError && !fileObj.fileUploadInProgress)}">
                              <div class="file-close-text">
                                <div class="d-flex align-items-center">
                                  <img *ngIf="fileObj.fileName.substring(fileObj.fileName.lastIndexOf('.')) === '.pdf'"
                                    class="type_img" src="assets/icons/file_type_image.svg">
                                  <img *ngIf="fileObj.fileName.substring(fileObj.fileName.lastIndexOf('.')) === '.docx'"
                                    class="type_img" src="assets/icons/doc_logo.svg">
                                  <img *ngIf="fileObj.fileName.substring(fileObj.fileName.lastIndexOf('.')) === '.txt'"
                                    class="type_img" src="assets/icons/txt_icon.svg">
                                  <img *ngIf="fileObj.fileName.substring(fileObj.fileName.lastIndexOf('.')) === '.xlsx'"
                                    class="type_img" src="assets/icons/excel_logo.svg">
                                  <img *ngIf="fileObj.fileName.substring(fileObj.fileName.lastIndexOf('.')) === '.ppt'"
                                    class="type_img" src="assets/icons/ppt_logo.svg">
                                  <div class="file-name" [innerHTML]="fileObj.fileName"></div>
                                </div>
                                <img src="assets/images/close.svg" class="close-file adjust_z_index"
                                  (click)="removeFile()">
                              </div>
                              <div class="progress-status">
                                <img *ngIf="fileObj.fileUploadInProgress" class="progSpinner"
                                  src="assets/icons/spinner.svg">
                                <img *ngIf="fileObj.fileUploadError && !fileObj.fileUploadInProgress"
                                  src="assets/icons/info.svg">
                              </div>
                            </div>
                            <div class="error-text" *ngIf="fileObj.fileUploadError && !fileObj.fileUploadInProgress">
                              Error in uploading file</div>
                          </div>
                        </ng-container>
                        <ng-container *ngIf="fileObj.fileName && selectedSourceType.sourceType=='content'">
                          <div class="upload-files-radio-data">
                            <div class="title">Uploaded files</div>
                            <div class="sort-by-data d-none">
                              <div class="sort-by-title">Sort By:</div>
                              <div class="kr-sg-radiobutton">
                                <input id="radio-1" name="radio" class="radio-custom" type="radio" checked>
                                <label for="radio-1" class="radio-custom-label">Alphabetical</label>
                              </div>
                              <div class="kr-sg-radiobutton pr-0">
                                <input id="radio-2" name="radio" class="radio-custom" type="radio">
                                <label for="radio-2" class="radio-custom-label">Type</label>
                              </div>
                            </div>
                          </div>
                          <div class="kr-sg-file-drag-drop w-100">
                            <div class="uploaded-file-name" *ngFor="let file of filesListData;let index = index"
                              [ngClass]="{'error':(fileObj.fileUploadError && !fileObj.fileUploadInProgress)}">
                              <div class="file-close-text">
                                <div class="d-flex align-items-center img-block-data">
                                  <img *ngIf="file.name.substring(file.name.lastIndexOf('.'))=== '.pdf'"
                                    class="type_img" src="assets/icons/file_type_image.svg">
                                  <img *ngIf="file.name.substring(file.name.lastIndexOf('.')) === '.doc'"
                                    class="type_img" src="assets/icons/doc_logo.svg">
                                  <img *ngIf="file.name.substring(file.name.lastIndexOf('.')) === '.docx'"
                                    class="type_img" src="assets/icons/doc_logo.svg">
                                  <img *ngIf="file.name.substring(file.name.lastIndexOf('.')) === '.txt'"
                                    class="type_img" src="assets/icons/txt_icon.svg">
                                  <img *ngIf="file.name.substring(file.name.lastIndexOf('.')) === '.xlsx'"
                                    class="type_img" src="assets/icons/excel_logo.svg">
                                  <img *ngIf="file.name.substring(file.name.lastIndexOf('.')) === '.ppt'"
                                    class="type_img" src="assets/icons/ppt_logo.svg">
                                </div>
                                <div class="text-content">
                                  <div class="file-name" [innerHTML]="file.name"></div>
                                  <div *ngIf="file.showProgressBar" class="progress-bar-data">
                                    <img src="assets/images/progressBar.gif">
                                  </div>
                                  <!-- <mat-progress-bar mode="indeterminate" class="progress-bar-data"></mat-progress-bar> -->
                                </div>
                                <img src="assets/images/close.svg" class="close-file adjust_z_index"
                                  (click)="removeMultipleFile(index)">
                              </div>
                              <!-- <div class="progress-status">
                                <img *ngIf="fileObj.fileUploadInProgress" class="progSpinner"
                                  src="assets/icons/spinner.svg">
                                <img *ngIf="fileObj.fileUploadError && !fileObj.fileUploadInProgress"
                                  src="assets/icons/info.svg">
                              </div> -->
                            </div>
                            <div class="error-text" *ngIf="fileObj.fileUploadError && !fileObj.fileUploadInProgress">
                              Error in uploading file</div>
                          </div>
                        </ng-container>
                        <div class="drag-drop-text-info"
                          *ngIf="fileObj.fileName && selectedSourceType.sourceType=='content'">
                          <div class="main-text">Drag and drop file anywhere on this section</div>
                          <div class="secondary-text">Note: Maximum upload limit is 10 files not exceeding 15 MB per
                            file.</div>
                        </div>
                      </div>
                    </div>
                    <!-- Annotation Start Here -->
                    <div class="pt2 annotation" *ngIf="selectedSourceType.resourceType == ''">
                      <div class="kr-sg-checkbox">
                        <input id="checkbox-1" class="checkbox-custom" type="checkbox"
                          (change)="annotateChange($event)">
                        <label for="checkbox-1" class="checkbox-custom-label">Annotate & Extract
                        </label>
                        <span class="tooltip-text"><img src="assets/icons/help-annotation.svg">
                          <span class="tooltiptext">
                            <div class="t-text">Use the annotate option to extract only the desired FAQs by marking
                              question & answer pairs</div>
                            <div class="learn_more"><a
                                href="https://docs.kore.ai/searchassist/source-management/faqs/#Annotate_Extract"
                                target="_blank">Learn More</a></div>
                          </span>
                        </span>

                      </div>
                    </div>
                    <!-- Annotation End Here -->
                    <!-- <div class="kr-sg-input-text mb-4" *ngIf="(selectedSourceType.sourceType==='faq')">
                        <div class="label_text mt-3 text-center">or</div>
                      </div> -->
                  </div>
                </div>
                <div id="fromurl" class="tab-pane fade browserbyurl">
                  <div class="input-url-block">
                    <div class="kr-sg-input-text">
                      <div class="label-text">Enter URL<sup class="field-mandatory">*</sup></div>
                      <input type="text" id="extractUrl" placeholder="http(s)://" class="input-text" autocomplete="off"
                        name="url" (keyup)="urlChange()" (change)="urlChange();inputChanged('extractURL')"
                        [disabled]="fileObj.fileId || fileObj.fileName" placeholder="http(s)://"
                        [(ngModel)]="newSourceObj.url" class="input-text">
                      <img id="infoWarning1" src="assets/icons/warning_escalation.svg" style="display: none;"
                        height="12" width="12" />
                      <!-- <input type="text" placeholder="https://" class="input-text"> -->
                      <!-- <div class="error-msg">Error message here</div> -->
                    </div>
                    <div class="info-upload-pdf d-none"><img src="assets/icons/Info-pdf.svg">Upload PDF files only</div>
                  </div>
                </div>
              </div>
            </div>
            <div class="kr-sg-input-text-area mb-4 d-none"
              *ngIf="(selectedSourceType.sourceType==='faq') || (selectedSourceType.resourceType==='file')">
              <div class="kr-sg-file-drag-drop">
                <div class="drag-drop-sec">
                  <input type="file" id="sourceFileUploader" class="custom-file-input"
                    (change)="fileChangeListener($event)" aria-describedby="inputGroupFileAddon01"
                    accept=".csv,.pdf,.json">
                  <div _ngcontent-gpv-c11="" class="imageDiv">
                    <img _ngcontent-gpv-c11="" src="assets/images/source-icos/drog_frop.svg">
                  </div>
                  <div class="custom-file">
                    <!-- <input type="file" id="sourceFileUploader" class="custom-file-input "
                      (change)="fileChangeListener($event)" aria-describedby="inputGroupFileAddon01" accept=".csv,.pdf,.json"> -->
                  </div>
                  <label for="sourceFileUploader" class="drag-label">Drag and Drop<span class="or-divider">Or</span>

                    <button mat-button> <span class="browse adjust_z_index">Browse
                        File</span></button>
                    <!-- <mat-menu #browse="matMenu">
                      <li mat-menu-item> <img class="pr-3" src="assets/images/icons/Urlicon.svg">URL</li>
                      <li mat-menu-item (click)="gotoFileUpload()"><img class="pr-3"
                          src="assets/images/icons/localfileupload.svg">Local File Upload</li>
                    </mat-menu> -->



                    <!-- <span class="dropdown kr-sg-overflow-menu open">
                      <div class="dropdown-toggle browse" id="menu1" data-toggle="dropdown">Browse
                      </div>
                      <ul class="dropdown-menu" role="menu" aria-labelledby="menu1">
                        <li><a >Source URL</a></li>
                        <li><a >Annotate</a></li>
                      </ul>
                    </span> -->
                  </label>
                </div>
                <div class="kr-sg-file-drag-drop w-100" *ngIf="fileObj.fileName">
                  <div class="uploaded-file-name"
                    [ngClass]="{'error':(fileObj.fileUploadError && !fileObj.fileUploadInProgress)}">
                    <div class="file-close-text">
                      <div class="file-name" [innerHTML]="fileObj.fileName"></div>
                      <img src="assets/images/close.svg" class="close-file adjust_z_index" (click)="removeFile()">
                    </div>
                    <div class="progress-status">
                      <img *ngIf="fileObj.fileUploadInProgress" class="progSpinner" src="assets/icons/spinner.svg">
                      <img *ngIf="fileObj.fileUploadError && !fileObj.fileUploadInProgress" src="assets/icons/info.svg">
                    </div>
                  </div>
                  <div class="error-text" *ngIf="fileObj.fileUploadError && !fileObj.fileUploadInProgress">Error in
                    uploading file</div>
                </div>
              </div>
              <!-- Annotation Start Here -->
              <div class="pt2 annotation"
                *ngIf="selectedSourceType.sourceType==='faq' && fileObj.fileId && selectedSourceType.resourceType!='importfaq'">
                <div class="kr-sg-checkbox">
                  <input id="checkbox-1" class="checkbox-custom" type="checkbox" (change)="annotateChange($event)">
                  <label for="checkbox-1" class="checkbox-custom-label">Annotate & Extract
                    <span class="tooltip"><img src="assets/icons/help-annotation.svg">
                      <span class="tooltiptext">Tooltip text</span>
                    </span>
                  </label>
                </div>
              </div>
              <!-- Annotation End Here -->
              <div class="kr-sg-input-text mb-4" *ngIf="(selectedSourceType.sourceType==='faq')">
                <!-- <div class="label_text mt-3 text-center">or</div> -->
              </div>
            </div>
            <!-- File uploader with Drag & Drop ENDS HERE -->
            <div *ngIf="(selectedSourceType.sourceType==='faq') || (selectedSourceType.resourceType === 'web')">

              <div class="kr-sg-input-text-area mb-4 radio-pad"
                *ngIf="(selectedSourceType.sourceType==='faq') && (selectedSourceType.resourceAdded) && false">
                <!-- Not supporting for now-->
                <div class="kr-sg-radiobutton d-block">
                  <input id="radio-17" name="radio" class="radio-custom" type="radio">
                  <label for="radio-17" class="radio-custom-label">Index Automatically</label>
                </div>
                <div class="kr-sg-radiobutton d-block">
                  <input id="radio-18" name="radio" class="radio-custom" type="radio">
                  <label for="radio-18" class="radio-custom-label">Extraxt & Review</label>
                </div>
              </div>
            </div>

          </div>
        </div>
      </perfect-scrollbar>
      <div class="modal-footer">
        <!-- [disabled]="sourceCreation.invalid || !selectedSourceType.resourceAdded" -->
        <button class="kr-sg-button-primary btn_lg mr-3" (click)="validateSource()"
          [disabled]="btnDisabled">Proceed</button>
        <button class="kr-sg-button-secondary backbtn btn_md mr-2" (click)="cancleSourceAddition()">Cancel</button>
      </div>
    </form>
  </ng-container>
</kr-modal>

<!-- Content crawl authentication Modal -->
<kr-modal modalType="center" modalClass="modal_popups_ addfaq" #addSourceModalPopDummy>
    <div class="modal-header">
      <div class="title">New PopUp</div>
      <div class="close_icon"><img (click)="closeAddContentModal()" src="assets/icons/modal-close.svg"></div>
    </div>
    <perfect-scrollbar class="perfect-scroll-modal-body" #perfectScroll6>
      <div class="modal-body">
        <div class="new-crawl-web-form">

          <div class="new-crawl-web-form-details">
            <div class="new-crawl-details">
              <div class="new-crawl-details-header">DETAILS</div>
              <div class="details-form">
                <div class="details-left">
                  <div class="kr-sg-input-text mar-bot-15">
                    <div class="label-text">Source Title</div>
                    <input type="url" autocomplete="off" maxlength="60" id="addSourceTitleInput" name="sourceTitle" placeholder="Enter Title" class="input-text" [(ngModel)]="newSourceObj.name" required>
                    <img id="infoWarning" src="assets/icons/warning_escalation.svg" style="display: none;" height="12"
                      width="12" />
                  </div>
                  <div class="kr-sg-input-text mar-bot-15">
                    <div class="label-text">Source URL</div>
                    <input type="text" autocomplete="off" name="url" placeholder="http(s)://" class="input-text" [(ngModel)]="newSourceObj.url">
                  </div>
                </div>
                <div class="details-right">
                  <div class="kr-sg-input-text-area mar-bot-15">
                    <div class="label-text">Description</div>
                    <textarea autocomplete="off" name="sourceDesc" maxlength="250" placeholder="Enter Description" class="input-text" [(ngModel)]="newSourceObj.desc"></textarea>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="new-crawling">
            <div class="new-crawling-tab">
              <div class="new-crawling-tab-block">
                <div class="new-ccrawling-hding">CRAWLING</div>
              </div>
              <div class="new-crawling-tab-btn">
                <button type="button" class="btn" aria-expanded="false" data-toggle="collapse" data-target="#newCrawlingTab"><i class="si-carrotup"></i></button>
              </div>
            </div>
            <div id="newCrawlingTab" class="new-crawling-collapse collapse">
              <div class="crawl-option-ddl">
                <div class="kr-sg-dropdowns mar-bot-12">
                  <div class="label-text">Crawl Options</div>
                  <div class="dropdown dropdown-open">
                    <button class="dropdown-toggle dropdown-input" data-toggle="dropdown" aria-expanded="false">{{crwalOptionLabel}}</button>
                    <ul class="dropdown-menu content-menu">
                      <li (click)="crawlOption('any','Crawl Everything')"><a>Crawl Everything</a></li>
                      <li (click)="crawlOption('block','Crawl Everything Except Specific URLs')"><a>Crawl Everything Except Specific URLs</a></li>
                      <li (click)="crawlOption('allow','Crawl Only Specific URLs')"><a>Crawl Only Specific URLs</a></li>
                    </ul>
                  </div>
                </div>
              </div>
                   
              <!-- Allow URL -->
              <div class="crawl-opt-table" *ngIf="(!crwalObject?.advanceOpts?.crawlEverything&&crwalObject.advanceOpts.allowedOpt)">
                <div class="crawl-opt-row" *ngFor="let allow of allowURLArray;let i=index;">
                  <div class="crawl-opt-ddl">
                    <div class="kr-sg-dropdowns mar-bot-12">
                      <div class="label-text">Allow if URL</div>
                      <div class="dropdown dropdown-open">
                        <button class="dropdown-toggle dropdown-input" data-toggle="dropdown" aria-expanded="false">{{allow?.name}}</button>
                        <ul class="dropdown-menu content-menu">
                              <li *ngFor="let url of allowURLValues" (click)="allow.condition=url?.value;allow.name=url.key"><a>{{url?.key}}</a></li>
                        </ul>
                      </div>
                    </div>
                  </div>
                  <div class="crawl-opt-inp">
                    <div class="kr-sg-input-text mar-bot-15">
                      <div class="label-text no-label">Source URL</div>
                      <input type="text" autocomplete="off" name="url" placeholder="http(s)://" class="input-text" [(ngModel)]="allow.url">
                    </div>
                  </div>
                  <div class="crawl-opt-cls" *ngIf="allowURLArray.length>1">
                    <button class="btn" (click)="allowURLArray.splice(i,1)"><i class="si-close"></i></button>
                  </div>
                </div>
                <div class="crawl-add-row">
                  <button class="btn add-btn-primary" (click)="addAllowBlockObj('allow')"><span class="add-btn-img"><img _ngcontent-gxv-c13="" src="assets/icons/add_blue.svg"></span> Add</button>
                </div>
              </div>

              <!-- Block URL  -->
              <div class="crawl-opt-table" *ngIf="(!crwalObject?.advanceOpts?.crawlEverything&&crwalObject.advanceOpts.blockedOpt)">
                <div class="crawl-opt-row" *ngFor="let block of blockURLArray;let i=index;">
                  <div class="crawl-opt-ddl">
                    <div class="kr-sg-dropdowns mar-bot-12">
                      <div class="label-text">Block If URL</div>
                      <div class="dropdown dropdown-open">
                        <button class="dropdown-toggle dropdown-input" data-toggle="dropdown" aria-expanded="false">{{block.name}}</button>
                        <ul class="dropdown-menu content-menu">
                              <li *ngFor="let url of allowURLValues" (click)="block.condition=url?.value;block.name=url.key"><a>{{url.key}}</a></li>
                        </ul>
                      </div>
                    </div>
                  </div>
                  <div class="crawl-opt-inp">
                    <div class="kr-sg-input-text mar-bot-15">
                      <div class="label-text no-label">Source URL</div>
                      <input type="text" autocomplete="off" name="url" placeholder="http(s)://" class="input-text" [(ngModel)]="block.url">
                    </div>
                  </div>
                  <div class="crawl-opt-cls" *ngIf="blockURLArray.length>1">
                    <button class="btn" (click)="blockURLArray.splice(i,1)"><i class="si-close"></i></button>
                  </div>
                </div>
                <div class="crawl-add-row">
                  <button class="btn add-btn-primary" (click)="addAllowBlockObj('block')"><span class="add-btn-img"><img _ngcontent-gxv-c13="" src="assets/icons/add_blue.svg"></span> Add</button>
                </div>
              </div>

              <div class="crwal-checkbox-list">
              <div class="group-checkbox">
                <div class="kr-sg-checkbox">
                  <input class="checkbox-custom" id="checkbox_cook" name="useCookies" type="checkbox" [(ngModel)]="useCookies" [ngModelOptions]="{standalone: true}">
                  <label class="checkbox-custom-label" for="checkbox_cook">Use Cookies</label>
                </div>
                <div class="kr-sg-checkbox">
                  <input class="checkbox-custom" id="checkbox_grph" name="isJavaScriptRendered" type="checkbox" [(ngModel)]="isJavaScriptRendered" [ngModelOptions]="{standalone: true}">
                  <label class="checkbox-custom-label" for="checkbox_grph">Java Script Rendered</label>
                </div>
                <div class="kr-sg-checkbox">
                  <input class="checkbox-custom" id="checkbox_grpi" name="crawlBeyondSitemaps" type="checkbox" [(ngModel)]="crawlBeyondSitemaps" [ngModelOptions]="{standalone: true}">
                  <label class="checkbox-custom-label" for="checkbox_grpi">Crawl Beyond Sitemap</label>
                </div>
                <div class="kr-sg-checkbox">
                  <input class="checkbox-custom" id="checkbox_robot" name="respectRobotTxtDirectives" type="checkbox" [(ngModel)]="respectRobotTxtDirectives" [ngModelOptions]="{standalone: true}">
                  <label class="checkbox-custom-label" for="checkbox_robot">Respect robots.txt directives</label>
                </div>
              </div>
              </div>

              <div class="crwal-depth-form">
                <div class="crwal-depth-form-row">
                  <div class="crwal-depth-form-inp">
                    <div class="kr-sg-input-text">
                      <div class="label-text">Crawl Depth
                        <div class="tooltip-custom">
                          <img src="assets/icons/sidemenu/help.svg">
                          <span class="tooltiptext">
                            <div class="t-text">The maximum depth that will be allowed to crawl any site.</div>
                            <div class="v-text">Value = 0 (No limit)</div>
                          </span>
                        </div>
                      </div>
                    <input class="input-text" autocomplete="off" id="crawlDepth" maxlength="60" name="crawlDepth" placeholder="0" type="url" [(ngModel)]="crawlDepth" (keyup)="checkValue(crawlDepth ,'crawlDepth')">
                  </div>
                  </div>
                  <div class="crwal-max-form-inp">
                    <div class="kr-sg-input-text">
                      <div class="label-text">Max URL
                        <div class="tooltip-custom">
                          <img src="assets/icons/sidemenu/help.svg">
                          <span class="tooltiptext">
                            <div class="t-text">The maximum depth that will be allowed to crawl any site.</div>
                            <div class="v-text">Value = 0 (No limit)</div>
                          </span>
                        </div>
                      </div>
                    <input class="input-text maxUrlLimit-class" autocomplete="off" id="maxURL" maxlength="60" name="maxURL" placeholder="500" type="number" (keyup)="checkValue(maxUrlLimit ,'maxUrlLimit')" [(ngModel)]="maxUrlLimit">
                  </div>
                  </div>
                </div>
              </div>
           
            </div>

          </div>

          <div class="new-crawl-shedule">
            <div class="new-crawl-shedule-tab">
              <div class="shedual-header">
                <div class="shedual-hding">SCHEDULE</div>
                <div class="sr-toggle-btn">
                  <label class="kr-sg-toggle">
                    <input id="sa-shedularEnableDisable" type="checkbox" name="scheduleOpts" [(ngModel)]="crwalObject.advanceOpts.scheduleOpt">
                    <div class="slider"></div>
                  </label>
                </div>
              </div>
              <app-scheduler *ngIf="crwalObject.advanceOpts.scheduleOpt" [crwalObject]="crwalObject" [scheduleFlag]="crwalObject.advanceOpts.scheduleOpt"
              [schedule]="'set'" (scheduleData)="scheduleData($event)" (cronExpress)="cronExpress($event)">
            </app-scheduler>
            </div>
          </div>

          <div class="new-crawl-shedule authenticated-website">
            <div class="new-crawl-shedule-tab">
              <div class="shedual-header">
                <div class="d-block">
                  <div class="shedual-hding">Is this an Authenticated website?  <div class="tooltip-custom">
                    <img src="assets/icons/sidemenu/help.svg">
                    <span class="tooltiptext">
                      <div class="t-text">The maximum depth that will be allowed to crawl any site.</div>
                      <div class="v-text">Value = 0 (No limit)</div>
                    </span>
                  </div></div>
                </div>
                
                <div class="sr-toggle-btn">
                  <label class="kr-sg-toggle">
                    <input type="checkbox" name="authenticatedOpts" [(ngModel)]="crwalObject.authorizationEnabled">
                    <div class="slider"></div>
                  </label>
                </div>
              </div>

              <div class="crawl-opt-ddl mt-1">
                <div class="kr-sg-dropdowns mar-bot-12">
                  <div class="dropdown dropdown-open">
                    <button class="dropdown-toggle dropdown-input" data-toggle="dropdown" aria-expanded="false" [disabled]="!crwalObject.authorizationEnabled" [ngStyle]="{'background':crwalObject.authorizationEnabled?'':'#EFF0F1'}">{{crwalObject.authorizationProfle.sso_type===''?'Select Authentication Type':crwalObject.authorizationProfle.sso_type}}</button>
                    <ul class="dropdown-menu content-menu">
                      <li (click)="crwalObject.authorizationProfle.sso_type='basic'"><a>Basic HTTP Authentication</a></li>
                      <li (click)="crwalObject.authorizationProfle.sso_type='form'"><a>Form-based Authentication</a></li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="is-auth-form-block" *ngIf="crwalObject.authorizationEnabled">
            <!-- Basic Fields -->
            <div class="is-auth-form" *ngIf="crwalObject.authorizationProfle.sso_type==='basic'">
              <div class="is-auth-form-header-block">
                <div class="is-auth-form-header">
                  BASIC FIELD
                  <div class="tooltip-custom">
                    <img src="assets/icons/sidemenu/help.svg">
                    <span class="tooltiptext">
                      <div class="t-text">The maximum depth that will be allowed to crawl any site.</div>
                      <div class="v-text">Value = 0 (No limit)</div>
                    </span>
                  </div>
                </div>
                <!-- <div class="is-auth-form-add-field">
                  <span><img src="assets/icons/facets/add-blue.svg" class="add-icon-blue" /> <img src="assets/images/add.svg" class="add-icon-black" /></span>Add Field
                </div> -->
              </div>
              <div class="is-auth-form-table">
                <div class="kr-sg-data-table">
                  <section class="table-content">
                      <header class="table-header">
                          <div class="col-4">FIELD KEY</div> 
                          <div class="col-4">FIELD VALUE</div>
                          <!-- <div class="col-2"></div> -->
                          <div class="col-4 text-right">ACTIONS</div>
                      </header>
                      <div class="content-body" *ngFor="let form of crwalObject.authorizationProfle.basicFields">
                        <ng-container *ngIf="!form?.isEditable">
                          <div class="col-4">{{form?.key}}</div>
                          <div class="col-4">{{form?.type}}</div>
                          <!-- <div class="col-4">
                            <div class="d-flex">
                              <label class="kr-sg-toggle with-label">                                       
                                <input type="checkbox" [checked]="form.isEnabled">
                                <div class="slider"> <span class="no">Disable</span><span class="yes">Enable</span></div>
                            </label>
                            </div>
                          </div> -->
                          <div class="col-4 text-right">
                              <span class="actions-links" (click)="form.isEditable=true"><img class="action_icon arrow-icon" src="assets/images/edit-pencil.svg"></span>
                              <!-- <span class="actions-links"><img class="action_icon" src="assets/icons/delete-table.svg"></span> -->
                          </div>
                        </ng-container>

                        <!-- Editable html -->
                          <div class="is-auth-form-edit" *ngIf="form?.isEditable">
                            <div class="is-auth-col">
                              <div class="col-3">
                                <div class="crawl-opt-inp">
                                  <div class="kr-sg-input-text mar-bot-15">
                                    <div class="label-text no-label">Field Key</div>
                                    <input type="text" autocomplete="off" name="url" placeholder="Field Key" class="input-text" [value]="form.key" [disabled]="form.value!=='Username'">
                                  </div>
                                </div>
                              </div>
                              <div class="col-3">
                                <div class="crawl-opt-inp">
                                  <div class="kr-sg-input-text mar-bot-15">
                                    <div class="label-text no-label">Field Value</div>
                                    <input [type]="form.type" autocomplete="off" name="url" placeholder="Field Key" class="input-text" [(ngModel)]="form.type">
                                  </div>
                                </div>
                              </div>
                              <div class="col-3 d-flex align-items-center">
                                <div class="is-auth-btn-group">
                                <button class="kr-sg-button-secondary btn-no-bg btn_lg" (click)="form.isEditable=false">Cancel</button>
                                <button class="kr-sg-button-secondary btn_lg">Save</button>
                              </div>
                              </div>
                            </div>                
                          </div>
                      </div>
                  </section>                               
              </div>               
              </div>
            </div>

            <!-- Form based -->
            <div class="is-auth-form" *ngIf="crwalObject.authorizationProfle.sso_type==='form'">
              <div class="is-auth-form-header-block">
                <div class="is-auth-form-header">
                  FORM FIELD
                  <div class="tooltip-custom">
                    <img src="assets/icons/sidemenu/help.svg">
                    <span class="tooltiptext">
                      <div class="t-text">The maximum depth that will be allowed to crawl any site.</div>
                      <div class="v-text">Value = 0 (No limit)</div>
                    </span>
                  </div>
                </div>
                <div class="is-auth-form-add-field" (click)="addFormField('add')" *ngIf="!formFieldObj.isShow">
                  <span><img src="assets/icons/facets/add-blue.svg" class="add-icon-blue" /> <img src="assets/images/add.svg" class="add-icon-black" /></span>Add Field
                </div>
              </div>
              <div class="is-auth-form-table">
                <div class="kr-sg-data-table">
                  <section class="table-content">
                      <header class="table-header">
                          <div class="col-3">FIELD KEY</div> 
                          <div class="col-2">FIELD TYPE</div>
                          <div class="col-3">FIELD VALUE</div>
                          <div class="col-2"></div>
                          <div class="col-2 text-right">ACTIONS</div>
                      </header>
                      <div class="content-body" *ngFor="let form of crwalObject.authorizationProfle.formFields;let i=index;">
                          <ng-container *ngIf="!form?.isEditable">
                          <div class="col-3">{{form.key}}</div>
                          <div class="col-2">{{form.type}}</div>
                          <div class="col-3">{{form.value}}</div>
                          <div class="col-2">
                            <div class="d-flex">
                              <label class="kr-sg-toggle with-label">                                       
                                <input type="checkbox" [(ngModel)]="form.isEnabled">
                                <div class="slider"> <span class="no">Disable</span><span class="yes">Enable</span></div>
                            </label>
                            </div>
                          </div>
                          <div class="col-2 text-right">
                              <span class="actions-links" (click)="form.isEditable=true"><img class="action_icon arrow-icon" src="assets/images/edit-pencil.svg"></span>
                              <span class="actions-links" (click)="crwalObject.authorizationProfle.formFields.splice(i,1)" *ngIf="crwalObject.authorizationProfle.formFields.length>1"><img class="action_icon" src="assets/icons/delete-table.svg"></span>
                          </div>
                          </ng-container>

                          <!-- Edit Fields: -->
                          <div class="is-auth-form-edit" *ngIf="form.isEditable">
                            <div class="is-auth-col">
                              <div class="col-3">
                                <div class="crawl-opt-inp">
                                  <div class="kr-sg-input-text mar-bot-15">
                                    <div class="label-text no-label">Field Key</div>
                                    <input id="sa-addAuthFieldListItemKey" type="text" autocomplete="off" name="url" placeholder="Field Key" class="input-text" [value]="form.key" [(ngModel)]="form.key">
                                  </div>
                                </div>
                              </div>
                              <div class="col-3">
                                <div class="crawl-option-ddl">
                                  <div class="kr-sg-dropdowns mar-bot-12">
                                    <div class="label-text">Field Type</div>
                                    <div class="dropdown dropdown-open">
                                      <button id="sa-addAuthFieldListItemType" class="dropdown-toggle dropdown-input" data-toggle="dropdown" aria-expanded="false">{{form.type===''?'Select Field Type':form.type}}</button>
                                      <ul class="dropdown-menu content-menu">
                                        <li (click)="form.type='textbox'"><a>Textbox</a></li>
                                        <li (click)="form.type='password'"><a>Password</a></li>
                                      </ul>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="col-3">
                                <div class="crawl-opt-inp">
                                  <div class="kr-sg-input-text mar-bot-15">
                                    <div class="label-text no-label">Field Value</div>
                                    <input id="sa-addAuthFieldListItemValue" type="text" autocomplete="off" name="url" placeholder="Field Value" class="input-text" [value]="form.type" [(ngModel)]="form.type">
                                  </div>
                                </div>
                              </div>
                              <div class="col-3 d-flex align-items-center">
                                <div class="is-auth-btn-group">
                                  <button id="sa-cancelAddAuthFieldToTable" class="kr-sg-button-secondary btn-no-bg btn_lg" (click)="form.isEditable=false">Cancel</button>
                                  <button id="sa-addAuthFieldToTable" class="kr-sg-button-secondary btn_lg" (click)="form.isEditable=false">Add</button>
                                </div>
                              </div>
                            </div>
                          </div> 
                      </div>
                  </section>
                  
                  <!-- Add Form Fields -->
                  <div class="is-auth-form-edit" *ngIf="formFieldObj.isShow">
                    <div class="is-auth-col">
                      <div class="col-3">
                        <div class="crawl-opt-inp">
                          <div class="kr-sg-input-text mar-bot-15">
                            <div class="label-text no-label">Field Key</div>
                            <input id="sa-addAuthFieldListItemKey" type="text" autocomplete="off" name="url" placeholder="Field Key" class="input-text" [(ngModel)]="formFieldObj.key">
                          </div>
                        </div>
                      </div>
                      <div class="col-3">
                        <div class="crawl-option-ddl">
                          <div class="kr-sg-dropdowns mar-bot-12">
                            <div class="label-text">Field Type</div>
                            <div class="dropdown dropdown-open">
                              <button id="sa-addAuthFieldListItemType" class="dropdown-toggle dropdown-input" data-toggle="dropdown" aria-expanded="false">Select Field Type</button>
                              <ul class="dropdown-menu content-menu">
                                <li (click)="formFieldObj.type='textbox'"><a>Textbox</a></li>
                                <li (click)="formFieldObj.type='password'"><a>Password</a></li>
                              </ul>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-3">
                        <div class="crawl-opt-inp">
                          <div class="kr-sg-input-text mar-bot-15">
                            <div class="label-text no-label">Field Value</div>
                            <input id="sa-addAuthFieldListItemValue" type="text" autocomplete="off" name="url" placeholder="Field Value" class="input-text" [(ngModel)]="formFieldObj.type">
                          </div>
                        </div>
                      </div>
                      <div class="col-3 d-flex align-items-center">
                        <div class="is-auth-btn-group">
                          <button id="sa-cancelAddAuthFieldToTable" class="kr-sg-button-secondary btn-no-bg btn_lg" (click)="addFormField('cancel')">Cancel</button>
                          <button id="sa-addAuthFieldToTable" class="kr-sg-button-secondary btn_lg" (click)="addFormField('save')">Add</button>
                        </div>
                      </div>
                    </div>
                  </div>  
              </div> 
              </div>
            </div>

            <!-- Authentication URL common for both fields types -->
            <div class="is-auth-form">
              <div class="is-auth-form-header-block">
                <div class="is-auth-form-header">
                  AUTHORISATION FIELD <span class="optional-hding">(Optional)</span>
                  <div class="tooltip-custom">
                    <img src="assets/icons/sidemenu/help.svg">
                    <span class="tooltiptext">
                      <div class="t-text">The maximum depth that will be allowed to crawl any site.</div>
                      <div class="v-text">Value = 0 (No limit)</div>
                    </span>
                  </div>
                </div>
                <div class="is-auth-form-add-field" (click)="addAuthorizationField('add')" *ngIf="!authorizationFieldObj.isShow">
                  <span><img src="assets/icons/facets/add-blue.svg" class="add-icon-blue" /> <img src="assets/images/add.svg" class="add-icon-black" /></span>
                  Add
                </div>
              </div> 
              
              <div class="is-auth-form-table">
                <div class="kr-sg-data-table" [ngClass]="{'text-center':crwalObject.authorizationProfle.authorizationFields.length===0}">
                  <section class="table-content" *ngIf="crwalObject.authorizationProfle.authorizationFields.length>0">
                      <header class="table-header">
                          <div class="col-3">FIELD KEY</div> 
                          <div class="col-2">FILED TYPE</div>
                          <div class="col-3">FIELD VALUE</div>
                          <div class="col-2"></div>
                          <div class="col-2 text-right">ACTIONS</div>
                      </header>
                      <div class="content-body" *ngFor="let auth of crwalObject.authorizationProfle.authorizationFields;let i=index;">
                         <ng-container *ngIf="!auth?.isEditable">
                         <div class="col-3">{{auth?.key}}</div>
                          <div class="col-2">{{auth?.type}}</div>
                          <div class="col-3">{{auth?.value}}</div>
                          <div class="col-2">
                            <div class="d-flex">
                              <label class="kr-sg-toggle with-label">                                       
                                <input id="sa-formFieldListItemEnableDisable" type="checkbox" checked>
                                <div class="slider"> <span class="no">Disable</span><span class="yes">Enable</span></div>
                            </label>
                            </div>
                          </div>
                          <div class="col-2 text-right">
                              <span id="sa-editAuthFieldListItem" class="actions-links" (click)="auth.isEditable=true"><img class="action_icon arrow-icon" src="assets/images/edit-pencil.svg"></span>
                              <span id="sa-deleteAuthFieldListItem" class="actions-links" (click)="crwalObject.authorizationProfle.authorizationFields.splice(i,1)"><img class="action_icon" src="assets/icons/delete-table.svg"></span>
                          </div>
                        </ng-container> 

                        <!-- Edit Division Starts -->
                      <div class="is-auth-form-edit" *ngIf="auth?.isEditable">
                        <div class="is-auth-col">
                          <div class="col-3">
                            <div class="crawl-opt-inp">
                              <div class="kr-sg-input-text mar-bot-15">
                                <div class="label-text no-label">Field Key</div>
                                <input id="sa-addAuthFieldListItemKey" type="text" autocomplete="off" name="url" placeholder="Field Key" class="input-text" [value]="auth.key" [(ngModel)]="auth.key">
                              </div>
                            </div>
                          </div>
                          <div class="col-3">
                            <div class="crawl-option-ddl">
                              <div class="kr-sg-dropdowns mar-bot-12">
                                <div class="label-text">Field Type</div>
                                <div class="dropdown dropdown-open">
                                  <button id="sa-addAuthFieldListItemType" class="dropdown-toggle dropdown-input" data-toggle="dropdown" aria-expanded="false">{{auth.type===''?'Select Field Type':auth?.type}}</button>
                                  <ul class="dropdown-menu content-menu">
                                    <li *ngFor="let item of autorizationFieldTypes" (click)="auth.type=item"><a>{{item}}</a></li>
                                  </ul>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="col-3">
                            <div class="crawl-opt-inp">
                              <div class="kr-sg-input-text mar-bot-15">
                                <div class="label-text no-label">Field Value</div>
                                <input id="sa-addAuthFieldListItemValue" type="text" autocomplete="off" name="url" placeholder="Field Value" class="input-text" [value]="auth.value" [(ngModel)]="auth.value">
                              </div>
                            </div>
                          </div>
                          <div class="col-3 d-flex align-items-center">
                            <div class="is-auth-btn-group">
                              <button id="sa-cancelAddAuthFieldToTable" class="kr-sg-button-secondary btn-no-bg btn_lg" (click)="auth.isEditable=false">Cancel</button>
                              <button id="sa-addAuthFieldToTable" class="kr-sg-button-secondary btn_lg" (click)="auth.isEditable=false">Add</button>
                            </div>
                          </div>
                        </div>
                      </div>  
                      <!-- Edit Division Ends -->
                      </div>
                  </section>  

                  <span class="font-weight-bold" *ngIf="(crwalObject.authorizationProfle.authorizationFields.length===0&&!authorizationFieldObj.isShow)">No authorization fields found</span>

                  <!-- ADD DIVISION SATRTS -->
                  <div class="is-auth-form-edit" *ngIf="authorizationFieldObj.isShow">
                    <div class="is-auth-col">
                      <div class="col-3">
                        <div class="crawl-opt-inp">
                          <div class="kr-sg-input-text mar-bot-15">
                            <div class="label-text no-label">Field Key</div>
                            <input id="sa-addAuthFieldListItemKey" type="text" autocomplete="off" name="url" placeholder="Field Key" class="input-text" [(ngModel)]="authorizationFieldObj.key">
                          </div>
                        </div>
                      </div>
                      <div class="col-3">
                        <div class="crawl-option-ddl">
                          <div class="kr-sg-dropdowns mar-bot-12">
                            <div class="label-text">Field Type</div>
                            <div class="dropdown dropdown-open">
                              <button id="sa-addAuthFieldListItemType" class="dropdown-toggle dropdown-input" data-toggle="dropdown" aria-expanded="false">{{(authorizationFieldObj.type==='')?'Select Field Type':(authorizationFieldObj.type)}}</button>
                              <ul class="dropdown-menu content-menu">
                                <li *ngFor="let item of autorizationFieldTypes" (click)="authorizationFieldObj.type=item"><a>{{item}}</a></li>
                              </ul>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-3">
                        <div class="crawl-opt-inp">
                          <div class="kr-sg-input-text mar-bot-15">
                            <div class="label-text no-label">Field Value</div>
                            <input id="sa-addAuthFieldListItemValue" type="text" autocomplete="off" name="url" placeholder="Field Value" class="input-text" [(ngModel)]="authorizationFieldObj.value">
                          </div>
                        </div>
                      </div>
                      <div class="col-3 d-flex align-items-center">
                        <div class="is-auth-btn-group">
                          <button id="sa-cancelAddAuthFieldToTable" class="kr-sg-button-secondary btn-no-bg btn_lg" (click)="addAuthorizationField('cancel')">Cancel</button>
                          <button id="sa-addAuthFieldToTable" class="kr-sg-button-secondary btn_lg" (click)="addAuthorizationField('save')">Add</button>
                        </div>
                      </div>
                    </div>
                  </div>  
                  <!-- ADD DIVISION ENDS -->
              </div> 
              </div>
            </div>
            
            <!-- Authentication fields -->
            <ng-container *ngIf="['basic','form'].includes(crwalObject.authorizationProfle.sso_type)">
            <div class="row col-12 border-top-row">
              <div class="col-4 pl-0">
                <div class="kr-sg-input-text">
                  <div class="label-text">Authentication URL</div>
                  <input id="sa-addAuthURL" type="text" placeholder="Authentication Url" class="input-text" [(ngModel)]="crwalObject.authorizationProfle.authCheckUrl">
                </div>
              </div>
            </div>
            <div class="row col-12 border-top-row">
              <div class="col-4 pl-0">
                <div class="kr-sg-dropdowns">
                  <div class="label-text">Test Type</div>
                  <div class="dropdown dropdown-open">
                      <button id="sa-addAuthenticationTestType" class="dropdown-toggle dropdown-input" data-toggle="dropdown">{{(crwalObject.authorizationProfle.testType==='')?'Choose an option':(crwalObject.authorizationProfle.testType)}}</button>                                            
                      <ul class="dropdown-menu content-menu">                                              
                        <li *ngFor="let item of testTypes" (click)="crwalObject.authorizationProfle.testType=item"><a>{{item}}</a></li>
                      </ul>
                  </div>
                </div>
              </div>
              <div class="col-4">
                <div class="kr-sg-input-text">
                  <div class="label-text">Test Value</div>
                  <input id="sa-addAuthenticationTestValue" type="text" placeholder="Test Value" class="input-text" [(ngModel)]="crwalObject.authorizationProfle.testValue">
                </div>
              </div>
            </div>
          </ng-container>
          </div>
        </div>
      </div>
    </perfect-scrollbar>
    <div class="modal-footer">
      <button id="sa-validateCrawl" class="kr-sg-button-primary btn_lg mr-3" (click)="validateSource()">Save & Test </button>
      <button  id="sa-cancelCrawl" class="kr-sg-button-secondary backbtn btn_md mr-2" (click)="closeAddContentModal()">Cancel</button>
    </div>
</kr-modal>

<!-- Link Bot modal -->
<kr-modal modalType="center" modalClass="botsModal modal_popups_ linkExistingBotsModal" #linkBotsModalPop>
  <ng-container *ngIf="selectedSourceType && selectedSourceType.resourceType === 'linkBot'">
    <div class="modal-header">
      <div class="title">Link Bots</div>
      <div class="close_icon"><img (click)="cancleSourceAddition()" src="assets/icons/modal-close.svg"></div>
    </div>
    <perfect-scrollbar class="perfect-scroll-modal-body" #perfectScroll4>
      <div class="modal-body">
        <div class="bots-modal-empty-bots-container" *ngIf="noAssociatedBots">
          <img src="assets/images/icons/empty_ill.svg">
          <h2>No Bots</h2>
          <h4>Please add bots</h4>
        </div>
        <ng-container *ngIf="!noAssociatedBots">
          <div class="info-link-text">Choose any bot from the list to link it to your SearchAssist app.</div>
          <div class="kr-sg-input-text">
            <input type="text" placeholder="Search" [(ngModel)]="searchAssociatedBots" name="searchAssociatedBots"
              class="input-text" maxlength="60">
            <img class="search-icon" src="assets/images/search_gray.svg">
          </div>
          <ng-container>
            <div class="link-bot-table">
              <div class="table-header col-12 row">
                <div class="col-6 title">Bot Name</div>
                <div class="col-6 title">Owner</div>
              </div>
              <div class="table-body-link-bot row col-12"
                *ngFor="let bot of associatedBots | filter: [searchAssociatedBots, 'name']">
                <div class="col-6 bot-name-data row m-0">
                  <div class="col-8 name-with-type text-truncate">
                    {{bot.name}} <span class="bot-type" *ngIf="bot.type==='universalbot'">Universal Bot</span>
                  </div>
                  <div class="col-4 shares-data">
                    <img src="assets/icons/actions/shares.svg">{{bot.publishedTasksCount}} Tasks
                  </div>
                </div>
                <div class="col-3 owner-name">{{bot.createdBy.firstName}} {{bot.createdBy.lastName}}</div>
                <div class="col-3 link-bot-actions">
                  <div class="link-bot-btn" (click)="openBotsConfigurationModalElement(bot,linkedBotID)"
                    placement="left" [ngbTooltip]="(linkedBotID ?'Please Unlink the linked bot':null)" container='body'
                    [ngClass]="{'link-bot-disable':linkedBotID}" *ngIf="streamID !== bot._id">
                    <img
                      src="{{!linkedBotID?'assets/icons/actions/link-bot.svg':'assets/icons/actions/link-bot-disable.svg'}}">Link
                    Bot
                  </div>
                  <div class="link-bot-btn" (click)="unlinkBot(bot._id)" *ngIf="streamID == bot._id">
                    <img src="assets/icons/actions/link-bot.svg">Unlink Bot
                  </div>
                  <!-- <img src="assets/icons/actions/external-link.svg" class="ext-link" placement="top-right" ngbTooltip="Open this bot in Kore.ai Platform" container='body' tooltipClass="train-icon-tooltip ml-12"> -->
                </div>
              </div>

            </div>
            <!-- <div class="bots-modal-list-container">
              <ngb-accordion #accordionList="ngbAccordion" (panelChange)="toggleDisable($event)">
                <ng-container
                  *ngFor="let bot of associatedBots | filter: [searchAssociatedBots, 'name']; let i = index">
                  <ngb-panel id="{{'bot' + i}}">
                    <ng-template ngbPanelHeader>
                      <div class="bots-modal-accordion-header-container">
                        <img class="bots-modal-bot-icon" src="assets/images/botIcon.svg">
                        <span class="bots-modal-accordion-header-title">{{bot.name}}</span>
                        <button *ngIf="streamID != bot._id" class="kr-sg-button-primary bots-modal-button-link"
                          (click)="linkBot(bot._id)" [disabled]="streamID != null">Link Bot</button>
                        <span *ngIf="streamID == bot._id" class="bots-modal-span-link">
                          <div class="bots-modal-check-icon-container"><img
                              src="assets/images/source-icos/check-green.svg"></div>&nbsp;Bot is linked
                        </span>
                        <div *ngIf="streamID == bot._id" class="bots-modal-dropdown-control"><img class="ellipse-icon"
                            src="assets/icons/elipse.svg">
                          <div class="bots-modal-dropdown-content">
                            <ul class="bots-modal-dropdown-content-list">
                              <li class="bots-modal-dropdown-content-list-item" (click)="unlinkBot(bot._id)">
                                <span>Unlink Bot</span></li>
                            </ul>
                          </div>
                        </div>
                      </div>
                    </ng-template>
                  </ngb-panel>
                </ng-container>
              </ngb-accordion>
            </div> -->
          </ng-container>
        </ng-container>
      </div>
    </perfect-scrollbar>
  </ng-container>
</kr-modal>

<!-- Bot Link Existing Modal -->
<kr-modal modalType="center" #botsConfigurationModalElement modalClass="modal_popups_ linkExistingBotsModal">
  <div class="modal-header">
    <div class="title"> <span class="gray-text-link"> Link Bot </span><img src="assets/icons/carrotright.svg">
      Configuration | {{this.selectedLinkBotConfig?.name}}</div>
    <div class="close_icon" (click)="closeBotsConfigurationModalElement()"><img src="assets/icons/modal-close.svg">
    </div>
  </div>
  <perfect-scrollbar class="perfect-scroll-modal-body" #perfectScroll9>
    <div class="modal-body">
      <div class="info-link-text lh-20">You can link a Virtual Assistant built on the Kore.ai Platform with your
        SearchAssist app. To link, you will need to enable the Webhook channel on the Virtual Assistant and complete the
        integration.<a (click)="showMore=!showMore" class="show-how-btn"> {{showMore?'Show less':'Show how'}}</a> </div>
      <div class="more-info-link-text" *ngIf="showMore">
        <div class="more-info-data"><span class="step-text">Step 1:</span> Enable Webhook channel for your Virtual
          Assistant using the Access Token & Post URL provided below.</div>
        <div class="more-info-data"><span class="step-text">Step 2:</span> Get the Client ID & Secret ID from the
          Channel configuration page of the Virtual Assistant and provide here.</div>
        <div class="more-info-data"><span class="step-text">Step 3:</span> The SearchAssist app can interact with the
          Virtual Assistant only after the Webhook channel is published.</div>
      </div>
      <div class="kr-sg-input-text">
        <label class="label-text label-text-bot-link">Access Token</label>
        <div class="w-75 position-relative d-inline-block">
          <input type="text" placeholder="Enter access token" [(ngModel)]="configurationLink.accessToken"
            name="accessToken" class="input-text bot-link-input"
            [ngClass]="{'err-block' : (!configurationLink?.accessToken?.length && submitted)}" maxlength="60">
          <img *ngIf="!configurationLink?.accessToken?.length && submitted" id="fieldNameWarning"
            src="assets/icons/warning_escalation.svg" style="top: 56%; position: absolute; right: 1.5%; display: block;"
            height="12" width="12" />
        </div>
        <div class="copy-btn" (click)="copy(configurationLink.accessToken)"><img src="assets/images/icons/copy.svg">Copy
        </div>
      </div>
      <div class="kr-sg-input-text">
        <label class="label-text label-text-bot-link">Post URL</label>
        <div class="w-75 position-relative d-inline-block">
          <input type="text" placeholder="Enter post url" [(ngModel)]="configurationLink.postUrl" name="postUrl"
            class="input-text bot-link-input"
            [ngClass]="{'err-block' : (!configurationLink?.postUrl?.length && submitted)}">
          <img *ngIf="!configurationLink?.postUrl?.length && submitted" id="fieldNameWarning"
            src="assets/icons/warning_escalation.svg" style="top: 56%; position: absolute; right: 1.5%; display: block;"
            height="12" width="12" />
        </div>
        <div class="copy-btn" (click)="copy(configurationLink.postUrl)"><img src="assets/images/icons/copy.svg">Copy
        </div>
      </div>
      <div class="kr-sg-input-text">
        <div class="w-75 position-relative">
          <label class="label-text label-text-bot-link">Webhook URL</label>
          <input type="text" placeholder="http(s)://" [(ngModel)]="configurationLink.webhookUrl" name="webhookUrl"
            class="input-text bot-link-input"
            [ngClass]="{'err-block' : (!configurationLink?.webhookUrl?.length && submitted)}">
          <img *ngIf="!configurationLink?.webhookUrl?.length && submitted" id="fieldNameWarning"
            src="assets/icons/warning_escalation.svg" style="top: 56%; position: absolute; right: 1.5%; display: block;"
            height="12" width="12" />
        </div>
      </div>
      <div class="kr-sg-input-text">
        <div class="w-75 position-relative">
          <label class="label-text label-text-bot-link">Bot Client ID</label>
          <input type="text" placeholder="Enter bot client ID" [(ngModel)]="configurationLink.clientId"
            name="botClientId" class="input-text bot-link-input"
            [ngClass]="{'err-block' : (!configurationLink?.clientId?.length && submitted)}" maxlength="60">
          <img *ngIf="!configurationLink?.clientId?.length && submitted" id="fieldNameWarning"
            src="assets/icons/warning_escalation.svg" style="top: 56%; position: absolute; right: 1.5%; display: block;"
            height="12" width="12" />
        </div>
      </div>
      <div class="kr-sg-input-text">
        <label class="label-text label-text-bot-link">Bot Secret ID</label>
        <div class="w-75 position-relative">
          <input type="password" id="password" placeholder="Enter bot secret ID"
            [(ngModel)]="configurationLink.clientSecret" name="botSecreatId" class="input-text bot-link-input"
            [ngClass]="{'err-block' : (!configurationLink?.clientSecret?.length && submitted)}" maxlength="60">
          <img (click)="showPasword()" *ngIf="!showPassword && configurationLink?.clientSecret?.length"
            src="assets/images/icons/eye.svg" class="eye" type="eye">
          <img (click)="showPasword()" *ngIf="showPassword && configurationLink?.clientSecret?.length"
            src="assets/images/icons/viewPw.svg.svg" class="eye" type="eye">
          <img *ngIf="!configurationLink?.clientSecret?.length && submitted" id="fieldNameWarning"
            src="assets/icons/warning_escalation.svg" style="top: 31%; position: absolute; right: 1.5%; display: block;"
            height="12" width="12" />
        </div>
      </div>
    </div>
  </perfect-scrollbar>
  <div class="modal-footer">
    <button class="kr-sg-button-primary btn_lg" (click)='saveLink()'>Link</button>
    <button class="kr-sg-button-secondary btn_lg" (click)="closeBotsConfigurationModalElement()">Back</button>
  </div>
</kr-modal>

<!-- Add Structure Data Modal -->
<kr-modal modalType="center" modalClass="modal_popups_  addfaq" #addStructuredDataModalPop>
  <app-add-structured-data [selectedSourceType]="selectedSourceType"
    (closeStructuredDataModal)="cancleSourceAddition($event)"></app-add-structured-data>
</kr-modal>

<!-- Structure Data Status Modal -->
<kr-modal modalType="default" #structuredDataStatusModalPop>
  <app-structured-data-status-modal (closeStructuredDataStatusModal)="closeStructuredDataStatusModal()"
    [structuredDataDocPayload]="structuredDataDocPayload"></app-structured-data-status-modal>
</kr-modal>

<!--crawl popup-->
<kr-modal modalType="default" #crawlModalPop>
  <div class="status-modal-popup">
    <div class="modal_content" *ngIf="selectedSourceType">
      <div class="modal-header">{{selectedSourceType.name}} <img src="assets/images/close.svg"
          (click)="closeStatusModal()"></div>
      <div class="modal-body">
        <ng-container *ngIf="!(statusObject.status==='success' || statusObject.status==='failed')">
          <!-- <div class="progressNote">
            <div>Crawling In-progress</div>
          </div>
          <div class="text-center">
            <mat-progress-bar mode="indeterminate" class="mat_progress_bar"></mat-progress-bar>
            <div class="relaxNote">You will be notified when the Crawling process is done.</div>
          </div> -->

          <div>
            <!-- <div>{{importFaqInprogress?'Import':'Faq Extraction'}} In Progress</div>
            <div class="text-center">
              <mat-progress-bar mode="indeterminate" class="mat_progress_bar"></mat-progress-bar>
              <div class="relaxNote">You will be notified when the {{importFaqInprogress?'import':'extraction'}} progress
                is done</div>
            </div> -->
  
            <div class="status-body-check">
              <div class="success-check status-type-img">
                <img src="assets/icons/content/latest-content-icons/green-loading-in-progress.svg">
              </div>
              <div class="configInProgress">
                <h1 class="status-type-header"><strong>{{importFaqInprogress?'Import':'Faq Extraction'}} In Progress</strong></h1>
              </div>
            </div>
            <div class="progressNote">
              <div class="crwal-in-progress-status">
                <div class="crwal-in-progress-mat">
                  <mat-progress-bar mode="indeterminate" class="mat_progress_bar"></mat-progress-bar>
                </div>
                <div class="crwal-in-progress-mat-close">
                  <span class="mat-close-icon"><i class="si-close"></i></span>
                </div>
              </div>
              <div class="progress-protip">
                <div class="pro-tip-icon">
                <i class="si-info"></i> 
                </div>
                <div class="pro-tip-text">
                  This might take a while based on the content size. You will be notified when the extraction process is done.
                </div>
              </div>
            </div>
          </div>

        </ng-container>
        <div class="success-check  pb-4" *ngIf="(statusObject.status==='success')">
          <img src="assets/icons/successCheck.svg">
        </div>
        <div class="error-check" *ngIf="(statusObject.status==='failed')">
          <img src="assets/images/exclamationCircle-Red.svg">
        </div>
        <div class="message-success text-center" *ngIf="(statusObject.status==='success')">
          Source added Successfully
        </div>
        <div class="message-success text-center" *ngIf="(statusObject.status==='failed')">
          Failed to add Source
        </div>
      </div>
      <div class="modal-footer text-right" [ngClass]="{'centerModel': resourceIDToOpen}">
        <button type="button" class="kr-sg-button-secondary btn_lg float-none ml-2 mr-0" data-dismiss="modal"
          (click)="stopCrwaling($event)" [ngClass]="{'d-none': statusObject.status==='success'}">Abort</button>
        <button type="button" class="kr-sg-button-primary btn_lg float-none ml-2 mr-0" data-dismiss="modal"
          [disabled]="crawlOkDisable" (click)="closeStatusModal()">OK</button>
      </div>
    </div>
  </div>
</kr-modal>

<app-upgrade-plan #plans></app-upgrade-plan>