<div class="main-metrics-container">
    <div class="header-sec row m-0 col-12">
        <app-useronboarding-journey [componentType]='componentType'></app-useronboarding-journey>
        <div class="bread-cum-sec col-3 p-0 d-flex align-items-center">
            <div class="bread-name">{{'metrics.analytics'| translate}}</div>
            <img
                src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAMCAYAAABBV8wuAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAClSURBVHgBbU+xDcIwEPQ7ibIGI8AIGQNREJepYAMYAQoUkSC9U9iUFhNkFNgAWoTsByNhKQ5XnPR3uv971khtasQJi8At2X0CeR+b4KlGVSYAq4yehRDi8U14qsRCEtHlBblh/3BEtW2kwrBqaGrJOVz5qA2wu3NuGGi786ZBvRuJrdT9b049nTq9dETlp+4s/HFANc0AjCUoKjG/hVspg3UserwBA09CgWDEywYAAAAASUVORK5CYII=">
            <div class="bread-name active-name">{{'dash_board_view_dashboard'| translate}}
                <span class="module-topic" tooltipClass="tooltip-global-" [container]="'body'" ngbTooltip='Topic Guide' 
 placement="right-center"(click)="openUserMetaTagsSlider()">
                    <i class="si-topic-guide-1"></i>
                </span>
            </div>
        </div>
        <div class="d-flex justify-content-end align-items-center col-9 p-0">
            <div class="custom_date_picker_sec">
                <input type="text" class="d-none" readonly ngxDaterangepickerMd style="width: 320px" [timePicker]="true"
                    showCancel="true" [locale]="{format: 'DD/MM/YYYY hh:mm', displayFormat: 'MM/DD/YYYY hh:mm A'}"
                    [(ngModel)]="selected" (datesUpdated)="onDatesUpdated($event)" />
                <button type="button" class="ngx-daterangepicker-action invisible custom_date_picker"
                    style="position: absolute; width: 0; height: 0;" (click)="openDateTimePicker($event)"
                    #datetimeTrigger></button>
            </div>
            <!-- <div class="date-info">All conversation sessions between <span class="bold-text">01-08-2020 to 07-08-2020</span></div>                 -->
            <div class="date-select">
                <span class="day time " (click)="getDateRange(1)"
                    [ngClass]="{'selected': defaultSelectedDay === 1}">{{'dash_board_view_24_Hrs'|
                    translate}}</span>
                <span class="week time" (click)="getDateRange(7)"
                    [ngClass]="{'selected': defaultSelectedDay === 7}">{{'dash_board_view_7_Days'|
                    translate}}</span>
                <span class="custom time" (click)="getDateRange(-1)"
                    [ngClass]="{'selected': defaultSelectedDay === -1}">{{'dash_board_view_Custom'|
                    translate}}</span>
            </div>
            <div class="export d-none"><img src="assets/icons/share.svg"></div>
        </div>
    </div>

    <perfect-scrollbar class="scroll_content">
        <div class="analy-dropdown-header">
            <app-analytics-dropdown *ngIf="indexConfigs.length" [indexarray]="indexConfigs" (dropdownpipelineid)="getAllgraphdetails($event)"></app-analytics-dropdown>
        </div>
        <div *ngIf="slider === 0" class="main-dashbord-metrics">
            <div class="top-cards-section row m-0" *ngIf="totalUsersStats && totalSearchesStats">
                <div class="col cards-data">
                    <div class="content">
                        <div class="title-info">{{'dash_board_view_total_user'| translate}}
                            <img src="assets/icons/gray_info.svg" placement="top-center"
                                ngbTooltip="Number of unique users performed search during the selected period"
                                [container]="'body'" tooltipClass="dashboard-custom-tooltips" class="pl-1">
                        </div>
                        <div class="bottom-sec">
                            <div class="left-sec">
                                <div class="count">{{ totalUsersStats.totalUsers}}</div>
                                <div class="data-percentage"
                                    [ngClass]="{'failed' : totalUsersStats.percentageIncrease < 0}">
                                    <img src="assets/icons/arrow-increase.svg"
                                        *ngIf="totalUsersStats.percentageIncrease >= 0">
                                    <img src="assets/icons/arrow-decrease.svg"
                                        *ngIf="totalUsersStats.percentageIncrease < 0">
                                    <span class="percentage">{{ math.abs(totalUsersStats.percentageIncrease) }}%</span>
                                </div>
                            </div>
                            <div class="right-sec">
                                <img *ngIf="totalUsersStats.percentageIncrease >= 0"
                                    src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEQAAAATCAYAAAApmKv9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAATESURBVHgB3Vd9TJVVGH/OuRcTFG6IM8VQpHDl2FgY4TQNwRj+oSP6chouCA2clF+0YDjuVlMIYwsiJ8OYMBIzy7XUJQpGQuooQ+nDQrOxRiskYCjc957zPD0vX3OsCXFpdvndvfec933Pe857fs/v+Z33CHARGeff9fMAZ5qSom5X+JYqcHNIcBEWqaYTQIAgjIMJAJcJIRJ+QvI/gKe9Yc90cHO4rhAQfmY3hCR6lQwDN4cVXIQFaLo2S2khSWoOuCkCSyPvNUuXCSFAVogA5B8JGQBuiIcORgYCeNSYddc9BCxeQggaOJuTceHtDdvdyEseroiay2RUczWQBH0rwAWYS66nFbM00VQhxSFlGLEaaAYRSQR91ql1g0L5a+GyzD/hf4iQypVpJDAbEachQaPD4Vw+ZkLsTSXTLA7HNiQ9gxDb7Y9ted1cZQwNcTxAJAq2FI1SC2THhTZF6nDB49k1MM6IOZoQQVK8ytENQMLzDgNL6545+N3wdgs/XGFD56Q+n0CrdSmB2slJHsjLpEUB1vb2GPHXE890jImQXY37Iniyz2pUU5Co3YEyf3fE5huD982UkQqfIKAFqDGISHuzx/DiTN+DpMqCJfYmcBGrzyZ5qw6Rowlj2Mckq1QSMP08QR6nisfOro2rbDHbLjoSv4QnX8GB8uVSMnF9B1tfCynacHntiS8G+x0VIfZfSid7dPU+2Haz56rNx8dzkqHsiJoHxmbdemOffbX91p2e3/HVG5FODWv4hWaa1guC2jidrrMVn7vla9SXh+65+U/PrT35SrChjdko8MrHscWtQ2Sc3OyvnD1FYBJO1M33D2inPEXSSOL+F/M4c5kQMwDneOImSUvNgHC9hfoJ6eJjb+Nzx8uHjzkiIbnf7PefZJUpGtFLga4SRIu4M3OpPZMVlnoERomUOvsMi4YoKSFaEc0k1BxRtGgB1zp1x2uHl7/XPdj2hdNbCxHEfNTa1q8sUwF4kdt/zXTO1hpWsBps/B6tEtX6z1aV/Tb4bOTxdfejU23nT8XnTRUwARYmSDItb12I/yR3pPe8IyG7L1X4eoLaiKT82HTMTh2sjCkcBcdkD4/cbSHJ7TAGpH5pD1JKBUkBCRr0LI50VUlkTl4/GTsSAfGlPiIE/Y4AzRyMcCbQ1h/lAckD/SS0kXY7Gbdj2dE1AU7eUpA22O89OuvjD40qTUXR5fLFTtSzOnzomH1eYq95sbCpLIoHDBKK/JXUXqzyH1gdXFJwH+tIHRkLU+3gIpJPZd4nrCKP+/QfkPYfrAL/vgmjJemDmLyfB9s+/fmmVXx/Nmhs1VL++OnKvVfgP4AovFS+k3P6Hq52KKBj/E2xgM3hkT7tsCo06U6bN7zzVxeEK3I+ZV5TpK9lhqUWwDhg4+msB7TU6ZwWwawWTg/+NkI8UPZk/vtwF2BV3qrQ2m1N5sj4WoVYxyowd2wOtuCPEKHX5gOtiayc/Pr8BjnFFqtJeUmwEIwTiqPfvMpFill/sSZ9plVYpu6PzmmGu4QhDzHThKM/jxO31zCgeuujCa3DG+deLN7ETMxn/27KCH25BCYghvYyaSHrq0dqLKWuZcMORqXGZKbugH+1l0kPTW1isyua7HCcgAmKvwFcV7Lg9qECxgAAAABJRU5ErkJggg==">
                                <img *ngIf="totalUsersStats.percentageIncrease < 0"
                                    src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEQAAAAPCAYAAABdjGkdAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAASbSURBVHgB7VZbTFxVFN373HuHx4BtQVKKtbyLEGyLMCBgBQrMiGliouHDRBP98MvEtCZGg2mi/tQPTfth4ncTY2Ki8aNGO1AKqRY6TAdtw6uFGaA8Sqa2oWXIMPdxtvuS0hBLeNRignb93HvOuXc/1l575wA8xn8X155rKAyWu4eDLs/b8JBA2AQMVVcnO2JJhRYZt0CNu5nv++Uu/AtgMtoJMJOTUiXGXsj3dU7CBvFICQkX1SbNO7VSCVhEJBVUFBWBVCKKICpdOb4zV2CTEKpofJNIfAxICi/ZJ/iJjE/z/R39G7GzYUImKisT9GjSbk41TwqM5PR4f70fVLnnIFiygARqAHSNz3dwYLsUBCcScKA4gQLPZ188Mwb/EH1MfkKi4x1CFCCgF0l+BIR7BMLnXICjvJ8CxMQg+Pj5Xp6/dWI9dtdFSEdtrZo2n/hkPJgaV3wvBxCHFstSgDJr3f6pLBAwZva5nZE4ahYoVF2LfPfMhQtzS/+PlLmLBVANKiJVSlBQ0BwHH1ZBDkxOR/qrJrujK/mdrjqUuaBrO6VOY3lXWsNL+6Ou2nQA7bhELOSlrQht8UlwOtff2jJc0bQbyHpfEFRzhll2CzExX+T6Wo+vleuahEyVHk7UVWsfSctBQBrXQ4kZeEsVMpmrkZKgOQIZXT+Pj7jcVayKvULDUE5X6/m/2wmWNmwTDu2AaZml7DQVQTAfUuWenwnPzH21nBRWWgv7yuXvkmlR/qSwwgYRoU+iyECQLwLidpAQBhS/EcpyJmOPpZjNBd3nppb75WJ8wAX80CaF45vi1n19tdZdlZC+omaH0zlbZCng1AgXLMFTwTD/zLzUHrpaVp+jCLHfIjlZ4G/3h1yNb0h2ujBvfF880BlZze7YQc8uU6cMQejhZNMkUCDf3/aNfTZa4XmFbb7GncCEwW2O0Jb6fk5mGwIqPJu42qgi4WhMQktRwHsD1sBIWWM1k/k1CMy224htfou6+VnO7+fGHyBkuKQpTQgjIRqdnikeGNAXg3K9nK6qVpJhgdMUFE8G3CkItA4t/3FROYrutuyFCl1oQKMicCHL5/0B1om+Sk9KvCnfRSF2gj2EEXWSlMzyVoVhHVsecLCsvoFJSudqh6UQobxu7whsEPeUd8xWHfuaY9XV8Qy8vPwbZCk/KzkAULSYMA2WW/w2IWIphmGAiHMoXEVzPDHWX9fZaT7goKLJTZaRbM8NEqRZRDfze856YQOYqDz8lGkZrC6ZxUEqTIhqIpwu6Gn7ETYBoZJDmaCqXzIxr7K/8Tu6XlLyR+fs0jnabRGXHMkjaTq0e5tSkl3460Z8oryh3Y2uRIYNWyVR1GtYgk8sDi6B03k+bwc8JAbL61MdFjpzA2evwyZi9EDtdulw9PIrtxCezPV7jy6d3Z8hdptY3CaqRZaizM083b3y5F8JYxWeOktSBt8Brub2tF2CLYDB51/KipOyl9tnhxDiLb4KnLL3H8nFbKjcna2BrFQlXbQHLmwRBCs8R4DoBL/aLXNS1/VTm3J130oIutwnWBZH7HcmY+x/T4iNUVdjDQ/NT0CIy38B1Y7+DvOnkW4AAAAASUVORK5CYII=">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col cards-data">
                    <div class="content">
                        <div class="title-info">{{'dash_board_view_total_searches'| translate}}
                            <img src="assets/icons/gray_info.svg"
                                ngbTooltip="Total number of searches performed during the selected period"
                                placement="top-center" [container]="'body'" tooltipClass="dashboard-custom-tooltips"
                                class="pl-1">
                        </div>
                        <div class="bottom-sec">
                            <div class="left-sec">
                                <div class="count">{{ totalSearchesStats.totalSearches}}</div>
                                <!-- {{totalSearchSum}} -->
                                <div class="data-percentage" [ngClass]="{'failed' : totalSearchesStats.searchRate < 0}">
                                    <img src="assets/icons/arrow-increase.svg"
                                        *ngIf="totalSearchesStats.searchRate >= 0">
                                    <img src="assets/icons/arrow-decrease.svg"
                                        *ngIf="totalSearchesStats.searchRate < 0">
                                    <span class="percentage">{{ math.abs(totalSearchesStats.searchRate)}}%</span>
                                </div>
                            </div>
                            <div class="right-sec">
                                <img *ngIf="totalSearchesStats.searchRate >= 0"
                                    src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEQAAAATCAYAAAApmKv9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAATESURBVHgB3Vd9TJVVGH/OuRcTFG6IM8VQpHDl2FgY4TQNwRj+oSP6chouCA2clF+0YDjuVlMIYwsiJ8OYMBIzy7XUJQpGQuooQ+nDQrOxRiskYCjc957zPD0vX3OsCXFpdvndvfec933Pe857fs/v+Z33CHARGeff9fMAZ5qSom5X+JYqcHNIcBEWqaYTQIAgjIMJAJcJIRJ+QvI/gKe9Yc90cHO4rhAQfmY3hCR6lQwDN4cVXIQFaLo2S2khSWoOuCkCSyPvNUuXCSFAVogA5B8JGQBuiIcORgYCeNSYddc9BCxeQggaOJuTceHtDdvdyEseroiay2RUczWQBH0rwAWYS66nFbM00VQhxSFlGLEaaAYRSQR91ql1g0L5a+GyzD/hf4iQypVpJDAbEachQaPD4Vw+ZkLsTSXTLA7HNiQ9gxDb7Y9ted1cZQwNcTxAJAq2FI1SC2THhTZF6nDB49k1MM6IOZoQQVK8ytENQMLzDgNL6545+N3wdgs/XGFD56Q+n0CrdSmB2slJHsjLpEUB1vb2GPHXE890jImQXY37Iniyz2pUU5Co3YEyf3fE5huD982UkQqfIKAFqDGISHuzx/DiTN+DpMqCJfYmcBGrzyZ5qw6Rowlj2Mckq1QSMP08QR6nisfOro2rbDHbLjoSv4QnX8GB8uVSMnF9B1tfCynacHntiS8G+x0VIfZfSid7dPU+2Haz56rNx8dzkqHsiJoHxmbdemOffbX91p2e3/HVG5FODWv4hWaa1guC2jidrrMVn7vla9SXh+65+U/PrT35SrChjdko8MrHscWtQ2Sc3OyvnD1FYBJO1M33D2inPEXSSOL+F/M4c5kQMwDneOImSUvNgHC9hfoJ6eJjb+Nzx8uHjzkiIbnf7PefZJUpGtFLga4SRIu4M3OpPZMVlnoERomUOvsMi4YoKSFaEc0k1BxRtGgB1zp1x2uHl7/XPdj2hdNbCxHEfNTa1q8sUwF4kdt/zXTO1hpWsBps/B6tEtX6z1aV/Tb4bOTxdfejU23nT8XnTRUwARYmSDItb12I/yR3pPe8IyG7L1X4eoLaiKT82HTMTh2sjCkcBcdkD4/cbSHJ7TAGpH5pD1JKBUkBCRr0LI50VUlkTl4/GTsSAfGlPiIE/Y4AzRyMcCbQ1h/lAckD/SS0kXY7Gbdj2dE1AU7eUpA22O89OuvjD40qTUXR5fLFTtSzOnzomH1eYq95sbCpLIoHDBKK/JXUXqzyH1gdXFJwH+tIHRkLU+3gIpJPZd4nrCKP+/QfkPYfrAL/vgmjJemDmLyfB9s+/fmmVXx/Nmhs1VL++OnKvVfgP4AovFS+k3P6Hq52KKBj/E2xgM3hkT7tsCo06U6bN7zzVxeEK3I+ZV5TpK9lhqUWwDhg4+msB7TU6ZwWwawWTg/+NkI8UPZk/vtwF2BV3qrQ2m1N5sj4WoVYxyowd2wOtuCPEKHX5gOtiayc/Pr8BjnFFqtJeUmwEIwTiqPfvMpFill/sSZ9plVYpu6PzmmGu4QhDzHThKM/jxO31zCgeuujCa3DG+deLN7ETMxn/27KCH25BCYghvYyaSHrq0dqLKWuZcMORqXGZKbugH+1l0kPTW1isyua7HCcgAmKvwFcV7Lg9qECxgAAAABJRU5ErkJggg==">
                                <img *ngIf="totalSearchesStats.searchRate < 0"
                                    src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEQAAAAPCAYAAABdjGkdAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAASbSURBVHgB7VZbTFxVFN373HuHx4BtQVKKtbyLEGyLMCBgBQrMiGliouHDRBP98MvEtCZGg2mi/tQPTfth4ncTY2Ki8aNGO1AKqRY6TAdtw6uFGaA8Sqa2oWXIMPdxtvuS0hBLeNRignb93HvOuXc/1l575wA8xn8X155rKAyWu4eDLs/b8JBA2AQMVVcnO2JJhRYZt0CNu5nv++Uu/AtgMtoJMJOTUiXGXsj3dU7CBvFICQkX1SbNO7VSCVhEJBVUFBWBVCKKICpdOb4zV2CTEKpofJNIfAxICi/ZJ/iJjE/z/R39G7GzYUImKisT9GjSbk41TwqM5PR4f70fVLnnIFiygARqAHSNz3dwYLsUBCcScKA4gQLPZ188Mwb/EH1MfkKi4x1CFCCgF0l+BIR7BMLnXICjvJ8CxMQg+Pj5Xp6/dWI9dtdFSEdtrZo2n/hkPJgaV3wvBxCHFstSgDJr3f6pLBAwZva5nZE4ahYoVF2LfPfMhQtzS/+PlLmLBVANKiJVSlBQ0BwHH1ZBDkxOR/qrJrujK/mdrjqUuaBrO6VOY3lXWsNL+6Ou2nQA7bhELOSlrQht8UlwOtff2jJc0bQbyHpfEFRzhll2CzExX+T6Wo+vleuahEyVHk7UVWsfSctBQBrXQ4kZeEsVMpmrkZKgOQIZXT+Pj7jcVayKvULDUE5X6/m/2wmWNmwTDu2AaZml7DQVQTAfUuWenwnPzH21nBRWWgv7yuXvkmlR/qSwwgYRoU+iyECQLwLidpAQBhS/EcpyJmOPpZjNBd3nppb75WJ8wAX80CaF45vi1n19tdZdlZC+omaH0zlbZCng1AgXLMFTwTD/zLzUHrpaVp+jCLHfIjlZ4G/3h1yNb0h2ujBvfF880BlZze7YQc8uU6cMQejhZNMkUCDf3/aNfTZa4XmFbb7GncCEwW2O0Jb6fk5mGwIqPJu42qgi4WhMQktRwHsD1sBIWWM1k/k1CMy224htfou6+VnO7+fGHyBkuKQpTQgjIRqdnikeGNAXg3K9nK6qVpJhgdMUFE8G3CkItA4t/3FROYrutuyFCl1oQKMicCHL5/0B1om+Sk9KvCnfRSF2gj2EEXWSlMzyVoVhHVsecLCsvoFJSudqh6UQobxu7whsEPeUd8xWHfuaY9XV8Qy8vPwbZCk/KzkAULSYMA2WW/w2IWIphmGAiHMoXEVzPDHWX9fZaT7goKLJTZaRbM8NEqRZRDfze856YQOYqDz8lGkZrC6ZxUEqTIhqIpwu6Gn7ETYBoZJDmaCqXzIxr7K/8Tu6XlLyR+fs0jnabRGXHMkjaTq0e5tSkl3460Z8oryh3Y2uRIYNWyVR1GtYgk8sDi6B03k+bwc8JAbL61MdFjpzA2evwyZi9EDtdulw9PIrtxCezPV7jy6d3Z8hdptY3CaqRZaizM083b3y5F8JYxWeOktSBt8Brub2tF2CLYDB51/KipOyl9tnhxDiLb4KnLL3H8nFbKjcna2BrFQlXbQHLmwRBCs8R4DoBL/aLXNS1/VTm3J130oIutwnWBZH7HcmY+x/T4iNUVdjDQ/NT0CIy38B1Y7+DvOnkW4AAAAASUVORK5CYII=">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col cards-data">
                    <div class="content">
                        <div class="title-info">{{'dash_board_view_result_rate'| translate}}
                            <img src="assets/icons/gray_info.svg" placement="top-center"
                                ngbTooltip="Total number of searches that returned at least one result"
                                [container]="'body'" tooltipClass="dashboard-custom-tooltips" class="pl-1">
                        </div>
                        <div class="bottom-sec if-ctr-value-available">
                            <div class="left-sec">
                                <div class="count text-truncate" title="{{totalSearchesStats.searchesWithResults }}%">
                                    {{totalSearchesStats.searchesWithResults==null?0:totalSearchesStats.searchesWithResults}}
                                </div>
                                <!-- <div class="count">{{totalSearchesStats.searchesWithResults }}<span class="ctr">{{'dash_board_view_Result_Rate'| translate}}: <span class="ctr-count">{{totalSearchesStats.resultRate}}%</span></span></div> -->
                                <div class="data-percentage"
                                    [ngClass]="{'failed' : totalSearchesStats.increasedResultRate < 0}">
                                    <img src="assets/icons/arrow-increase.svg"
                                        *ngIf="totalSearchesStats.increasedResultRate >= 0">
                                    <img src="assets/icons/arrow-decrease.svg"
                                        *ngIf="totalSearchesStats.increasedResultRate < 0">
                                    <span class="percentage">{{math.abs(totalSearchesStats.increasedResultRate)}}%</span>
                                </div>
                            </div>
                            <div class="right-sec">
                                <div class="ctr">Result rate:
                                    <span class="ctr-count">{{totalSearchesStats.resultRate}}%</span>
                                </div>
                                <div class="graph-img">
                                    <img *ngIf="totalSearchesStats.increasedResultRate >= 0"
                                        src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEQAAAATCAYAAAApmKv9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAATESURBVHgB3Vd9TJVVGH/OuRcTFG6IM8VQpHDl2FgY4TQNwRj+oSP6chouCA2clF+0YDjuVlMIYwsiJ8OYMBIzy7XUJQpGQuooQ+nDQrOxRiskYCjc957zPD0vX3OsCXFpdvndvfec933Pe857fs/v+Z33CHARGeff9fMAZ5qSom5X+JYqcHNIcBEWqaYTQIAgjIMJAJcJIRJ+QvI/gKe9Yc90cHO4rhAQfmY3hCR6lQwDN4cVXIQFaLo2S2khSWoOuCkCSyPvNUuXCSFAVogA5B8JGQBuiIcORgYCeNSYddc9BCxeQggaOJuTceHtDdvdyEseroiay2RUczWQBH0rwAWYS66nFbM00VQhxSFlGLEaaAYRSQR91ql1g0L5a+GyzD/hf4iQypVpJDAbEachQaPD4Vw+ZkLsTSXTLA7HNiQ9gxDb7Y9ted1cZQwNcTxAJAq2FI1SC2THhTZF6nDB49k1MM6IOZoQQVK8ytENQMLzDgNL6545+N3wdgs/XGFD56Q+n0CrdSmB2slJHsjLpEUB1vb2GPHXE890jImQXY37Iniyz2pUU5Co3YEyf3fE5huD982UkQqfIKAFqDGISHuzx/DiTN+DpMqCJfYmcBGrzyZ5qw6Rowlj2Mckq1QSMP08QR6nisfOro2rbDHbLjoSv4QnX8GB8uVSMnF9B1tfCynacHntiS8G+x0VIfZfSid7dPU+2Haz56rNx8dzkqHsiJoHxmbdemOffbX91p2e3/HVG5FODWv4hWaa1guC2jidrrMVn7vla9SXh+65+U/PrT35SrChjdko8MrHscWtQ2Sc3OyvnD1FYBJO1M33D2inPEXSSOL+F/M4c5kQMwDneOImSUvNgHC9hfoJ6eJjb+Nzx8uHjzkiIbnf7PefZJUpGtFLga4SRIu4M3OpPZMVlnoERomUOvsMi4YoKSFaEc0k1BxRtGgB1zp1x2uHl7/XPdj2hdNbCxHEfNTa1q8sUwF4kdt/zXTO1hpWsBps/B6tEtX6z1aV/Tb4bOTxdfejU23nT8XnTRUwARYmSDItb12I/yR3pPe8IyG7L1X4eoLaiKT82HTMTh2sjCkcBcdkD4/cbSHJ7TAGpH5pD1JKBUkBCRr0LI50VUlkTl4/GTsSAfGlPiIE/Y4AzRyMcCbQ1h/lAckD/SS0kXY7Gbdj2dE1AU7eUpA22O89OuvjD40qTUXR5fLFTtSzOnzomH1eYq95sbCpLIoHDBKK/JXUXqzyH1gdXFJwH+tIHRkLU+3gIpJPZd4nrCKP+/QfkPYfrAL/vgmjJemDmLyfB9s+/fmmVXx/Nmhs1VL++OnKvVfgP4AovFS+k3P6Hq52KKBj/E2xgM3hkT7tsCo06U6bN7zzVxeEK3I+ZV5TpK9lhqUWwDhg4+msB7TU6ZwWwawWTg/+NkI8UPZk/vtwF2BV3qrQ2m1N5sj4WoVYxyowd2wOtuCPEKHX5gOtiayc/Pr8BjnFFqtJeUmwEIwTiqPfvMpFill/sSZ9plVYpu6PzmmGu4QhDzHThKM/jxO31zCgeuujCa3DG+deLN7ETMxn/27KCH25BCYghvYyaSHrq0dqLKWuZcMORqXGZKbugH+1l0kPTW1isyua7HCcgAmKvwFcV7Lg9qECxgAAAABJRU5ErkJggg==">
                                </div>
                                <div class="graph-img">
                                    <img *ngIf="totalSearchesStats.increasedResultRate < 0"
                                        src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEQAAAAPCAYAAABdjGkdAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAASbSURBVHgB7VZbTFxVFN373HuHx4BtQVKKtbyLEGyLMCBgBQrMiGliouHDRBP98MvEtCZGg2mi/tQPTfth4ncTY2Ki8aNGO1AKqRY6TAdtw6uFGaA8Sqa2oWXIMPdxtvuS0hBLeNRignb93HvOuXc/1l575wA8xn8X155rKAyWu4eDLs/b8JBA2AQMVVcnO2JJhRYZt0CNu5nv++Uu/AtgMtoJMJOTUiXGXsj3dU7CBvFICQkX1SbNO7VSCVhEJBVUFBWBVCKKICpdOb4zV2CTEKpofJNIfAxICi/ZJ/iJjE/z/R39G7GzYUImKisT9GjSbk41TwqM5PR4f70fVLnnIFiygARqAHSNz3dwYLsUBCcScKA4gQLPZ188Mwb/EH1MfkKi4x1CFCCgF0l+BIR7BMLnXICjvJ8CxMQg+Pj5Xp6/dWI9dtdFSEdtrZo2n/hkPJgaV3wvBxCHFstSgDJr3f6pLBAwZva5nZE4ahYoVF2LfPfMhQtzS/+PlLmLBVANKiJVSlBQ0BwHH1ZBDkxOR/qrJrujK/mdrjqUuaBrO6VOY3lXWsNL+6Ou2nQA7bhELOSlrQht8UlwOtff2jJc0bQbyHpfEFRzhll2CzExX+T6Wo+vleuahEyVHk7UVWsfSctBQBrXQ4kZeEsVMpmrkZKgOQIZXT+Pj7jcVayKvULDUE5X6/m/2wmWNmwTDu2AaZml7DQVQTAfUuWenwnPzH21nBRWWgv7yuXvkmlR/qSwwgYRoU+iyECQLwLidpAQBhS/EcpyJmOPpZjNBd3nppb75WJ8wAX80CaF45vi1n19tdZdlZC+omaH0zlbZCng1AgXLMFTwTD/zLzUHrpaVp+jCLHfIjlZ4G/3h1yNb0h2ujBvfF880BlZze7YQc8uU6cMQejhZNMkUCDf3/aNfTZa4XmFbb7GncCEwW2O0Jb6fk5mGwIqPJu42qgi4WhMQktRwHsD1sBIWWM1k/k1CMy224htfou6+VnO7+fGHyBkuKQpTQgjIRqdnikeGNAXg3K9nK6qVpJhgdMUFE8G3CkItA4t/3FROYrutuyFCl1oQKMicCHL5/0B1om+Sk9KvCnfRSF2gj2EEXWSlMzyVoVhHVsecLCsvoFJSudqh6UQobxu7whsEPeUd8xWHfuaY9XV8Qy8vPwbZCk/KzkAULSYMA2WW/w2IWIphmGAiHMoXEVzPDHWX9fZaT7goKLJTZaRbM8NEqRZRDfze856YQOYqDz8lGkZrC6ZxUEqTIhqIpwu6Gn7ETYBoZJDmaCqXzIxr7K/8Tu6XlLyR+fs0jnabRGXHMkjaTq0e5tSkl3460Z8oryh3Y2uRIYNWyVR1GtYgk8sDi6B03k+bwc8JAbL61MdFjpzA2evwyZi9EDtdulw9PIrtxCezPV7jy6d3Z8hdptY3CaqRZaizM083b3y5F8JYxWeOktSBt8Brub2tF2CLYDB51/KipOyl9tnhxDiLb4KnLL3H8nFbKjcna2BrFQlXbQHLmwRBCs8R4DoBL/aLXNS1/VTm3J130oIutwnWBZH7HcmY+x/T4iNUVdjDQ/NT0CIy38B1Y7+DvOnkW4AAAAASUVORK5CYII=">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col cards-data">
                    <div class="content">
                        <div class="title-info">{{'dash_board_view_searches_with_click'| translate}}
                            <img src="assets/icons/gray_info.svg" placement="top-center"
                                ngbTooltip="No. of searches where at least one result was clicked on by the search user"
                                [container]="'body'" tooltipClass="dashboard-custom-tooltips" class="pl-1">
                        </div>
                        <div class="bottom-sec if-ctr-value-available view-clicks">
                            <div class="left-sec col-12 p-0">
                                <div class="count-data">
                                    <div class="count text-truncate" title="{{totalSearchesStats.clicks}}">
                                        {{totalSearchesStats.clicks }}</div>
                                    <div class="ctr">{{'dash_board_view_CTR'| translate}}:
                                        <span class="ctr-count">{{math.abs(totalSearchesStats.ctr)}}%</span>
                                    </div>
                                </div>
                                <div class="data-percentage " [ngClass]="{'failed' : totalSearchesStats.clickRate < 0}">
                                    <img src="assets/icons/arrow-increase.svg"
                                        *ngIf="totalSearchesStats.clickRate >= 0">
                                    <img src="assets/icons/arrow-decrease.svg" *ngIf="totalSearchesStats.clickRate < 0">
                                    <span class="percentage">{{math.abs(totalSearchesStats.clickRate)}}%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col cards-data">
                    <div class="content">
                        <div class="title-info">{{'dash_board_view_avg_click_position'| translate}}
                            <img src="assets/icons/gray_info.svg" placement="top-right"
                                ngbTooltip="Average position of the clicks performed on the search results"
                                [container]="'body'" tooltipClass="dashboard-custom-tooltips ml_12" class="pl-1">
                        </div>
                        <div class="bottom-sec">
                            <div class="left-sec">
                                <div class="count">{{totalSearchesStats.avgPosition }}</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="data-information-content col-12 m-0 row split-tables">
                <div class="col-12 box-content">
                    <div class="full-card pb-4">
                        <div class="legends-info">
                            <div class="content">
                                <div class="title">{{'dash_board_view_search_trends'| translate}}</div>
                            </div>
                        </div>
                        <div echarts [options]="chartOption" class="demo-chart-graphMode"></div>
                        <div class="legends-info mt-2 mb-2">
                            <div class="content">
                                <div class="title">{{'dash_board_view_total_searches'| translate}} <span
                                        class="toatlsearches"></span></div>
                            </div>
                            <div class="content">
                                <div class="title">{{'dash_board_view_searches_with_result'| translate}} <span
                                        class="withresults"></span></div>
                            </div>
                            <div class="content">
                                <div class="title">{{'dash_board_view_searches_with_click'| translate}} <span
                                        class="clicks"></span></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="data-information-content col-12 m-0 row split-tables">
                <div class="col-6 box-content">
                    <div class="full-card">
                        <div class="title-card">{{'dash_board_view_Top_Search_Queries'| translate}} </div>
                        <div class="table-content-data">
                            <div class="table_header row m-0">
                                <div class="col-10 header-title pl-0">{{'dash_board_view_Searched_Intent'|
                                    translate}}</div>
                                <div class="col-2 header-title text-right"
                                    (click)="sortByApi('MostSearchedQuries','count')">
                                    <span class="d-flex align-items-center flex-column mr-1">
                                        <img src="assets/icons/caretDown.svg"
                                            (click)="getSortIconVisibility('count','asc')" class="sortImg downArrow">
                                        <img src="assets/icons/caretDown.svg"
                                            (click)="getSortIconVisibility('count','asc')" class="sortImg upArrow">
                                    </span>
                                    {{'dash_board_view_Count'| translate}}
                                </div>
                            </div>
                            <div *ngIf="mostSearchedQuries">
                                <div class="table_body row m-0" *ngFor="let top of mostSearchedQuries;let i = index">
                                    <div class="col-10 body-title pr-3  pl-0">{{top.query}}</div>
                                    <div class="col-2 body-title text-center">{{top.count}}</div>
                                </div>
                            </div>
                        </div>
                        <div class="create_new_link" (click)="viewAll('/searchInsights','Top_Search_Queries')">View all
                        </div>
                    </div>
                </div>
                <div class="col-6 box-content">
                    <div class="full-card">
                        <div class="title-card">{{'dash_board_view_Top_Search_Queries_with_No_Result'|
                            translate}} </div>
                        <div class="table-content-data">
                            <div class="table_header row m-0">
                                <div class="col-10 header-title  pl-0">{{'dash_board_view_Searched_Intent'|
                                    translate}}</div>
                                <div class="col-2 header-title text-right"
                                    (click)="sortByApi('TopQuriesWithNoResults','count')">
                                    <span class="d-flex align-items-center flex-column mr-1">
                                        <img src="assets/icons/caretDown.svg"
                                            (click)="getSortIconVisibility('count','asc')" class="sortImg downArrow">
                                        <img src="assets/icons/caretDown.svg"
                                            (click)="getSortIconVisibility('count','desc')" class="sortImg upArrow">
                                    </span>
                                    {{'dash_board_view_Count'| translate}}
                                </div>
                            </div>
                            <div *ngIf="topQuriesWithNoResults">
                                <div class="table_body row m-0"
                                    *ngFor="let top of topQuriesWithNoResults;let i = index">
                                    <div class="col-10 header-title pr-3  pl-0">{{top.query}}</div>
                                    <div class="col-2 header-title text-center" id="topcount">{{top.count}}</div>
                                </div>
                            </div>

                        </div>
                        <div class="create_new_link"
                            (click)="viewAll('/searchInsights','Top_Search_Queries_with_No_Result')">View all</div>
                    </div>
                </div>
            </div>
            <div class="data-information-content col-12 m-0 row split-tables">
                <div class="col-12 box-content">
                    <div class="full-card">
                        <div class="kr-sg-dropdowns filter-dropdown d-none" ngbDropdown [placement]="'bottom-right'">
                            <div class="dropdown dropdown-open">
                                <button class="dropdown-toggle dropdown-input" ngbDropdownToggle><img
                                        src="assets/icons/filter.svg"></button>
                                <ul class="dropdown-menu content-menu m-0" ngbDropdownMenu>
                                    <div class="kr-sg-checkbox d-block p-0">
                                        <input id="checkbox_1" class="checkbox-custom" type="checkbox" checked>
                                        <label for="checkbox_1" class="checkbox-custom-label">FAQs</label>
                                    </div>
                                    <div class="kr-sg-checkbox d-block p-0">
                                        <input id="checkbox_12" class="checkbox-custom" type="checkbox" checked>
                                        <label for="checkbox_12" class="checkbox-custom-label">Actions</label>
                                    </div>
                                    <div class="kr-sg-checkbox d-block p-0 m-0">
                                        <input id="checkbox_12" class="checkbox-custom" type="checkbox" checked>
                                        <label for="checkbox_12" class="checkbox-custom-label">Content</label>
                                    </div>
                                </ul>
                            </div>
                        </div>
                        <div class="title-card">{{'dash_board_view_Top_Search_Results'| translate}} </div>
                        <div class="table-content-data">
                            <div class="table_header row m-0">
                                <div class="col-4 header-title  pl-0">
                                    <!-- As per FLY-4691, as per PM review points  Top search results board, sorting symbols and sorting functionality beside Query should be removed commented below code -->
                                   <!-- <div class="col-4 header-title  pl-0" (click)="sortByApi('TopSearchResults','answer')"> -->
                                    <!-- <span class="d-flex align-items-center flex-column mr-1">
                                        <img src="assets/icons/caretDown.svg"
                                            (click)="getSortIconVisibility('answer','asc')" class="sortImg downArrow">
                                        <img src="assets/icons/caretDown.svg"
                                            (click)="getSortIconVisibility('answer','desc')" class="sortImg upArrow">
                                    </span> -->
                                    <!-- As per FLY-4691 Query title has to be updated to Search results -->
                                    {{'dash_board_view_Search_Results'|translate}}
                                </div>
                                <div class="col-2 header-title" (click)="sortByApi('TopSearchResults','appearances')">
                                    <span class="d-flex align-items-center flex-column mr-1">
                                        <img src="assets/icons/caretDown.svg"
                                            (click)="getSortIconVisibility('appearances','asc')"
                                            class="sortImg downArrow">
                                        <img src="assets/icons/caretDown.svg"
                                            (click)="getSortIconVisibility('appearances','desc')"
                                            class="sortImg upArrow">
                                    </span>
                                    {{'dash_board_view_Appearances'| translate}}
                                </div>
                                <div class="col-2 header-title" (click)="sortByApi('TopSearchResults','clicks')">
                                    <span class="d-flex align-items-center flex-column mr-1">
                                        <img src="assets/icons/caretDown.svg"
                                            (click)="getSortIconVisibility('clicks','asc')" class="sortImg downArrow">
                                        <img src="assets/icons/caretDown.svg"
                                            (click)="getSortIconVisibility('clicks','desc')" class="sortImg upArrow">
                                    </span>
                                    {{'dash_board_view_Clicks'| translate}}
                                </div>
                                <div class="col-2 header-title"
                                    (click)="sortByApi('TopSearchResults','clickThroughRate')">
                                    <span class="d-flex align-items-center flex-column mr-1">
                                        <img src="assets/icons/caretDown.svg"
                                            (click)="getSortIconVisibility('clickThroughRate','asc')"
                                            class="sortImg downArrow">
                                        <img src="assets/icons/caretDown.svg"
                                            (click)="getSortIconVisibility('clickThroughRate','desc')"
                                            class="sortImg upArrow">
                                    </span>
                                    {{'dash_board_view_ctr'| translate}}
                                </div>
                                <!--  ngbTooltip='Click-Through Rate' -->
                                <div class="col-2 header-title" (click)="sortByApi('TopSearchResults','avgPosition')">
                                    <span class="d-flex align-items-center flex-column mr-1">
                                        <img src="assets/icons/caretDown.svg"
                                            (click)="getSortIconVisibility('avgPosition','asc')"
                                            class="sortImg downArrow">
                                        <img src="assets/icons/caretDown.svg"
                                            (click)="getSortIconVisibility('avgPosition','desc')"
                                            class="sortImg upArrow">
                                    </span>{{'dash_board_view_Avg_Position'| translate}}
                                </div>
                            </div>
                            <div class="table_body row m-0"
                                *ngFor="let topSearchResult of topSearchResults;let i = index">
                                <div class="col-4 body-title  pl-0">{{topSearchResult.answer}}</div>
                                <div class="col-2 body-title" id="search-results">{{topSearchResult.appearances}}</div>
                                <div class="col-2 body-title" id="search-results-clicks">{{topSearchResult.clicks}}</div>
                                <div class="col-2 body-title" id="search-results">{{topSearchResult.clickThroughRate | number : '1.2-2'}}%
                                </div>
                                <div class="col-2 body-title" id="search-results">{{topSearchResult.avgPosition | number : '1.2-2'}}</div>
                            </div>
                        </div>
                        <div class="create_new_link" (click)="viewAll('/resultInsights')">View all</div>
                    </div>
                </div>
            </div>
            <div class="data-information-content col-12 m-0 row split-tables">
                <div class="col-6 box-content">
                    <div class="full-card pb-4"
                        [ngStyle]="{'opacity':isyAxisMostClickPostiondata?'unset':'0.3','pointer-events':isyAxisMostClickPostiondata?'auto':'none'}">
                        <div class="title-card">{{'dash_board_view_Most_Clicked_Position'| translate}}
                            <img src="assets/icons/gray_info.svg" placement="top-center"
                                ngbTooltip="Position at which the search results were clicked on by the end - users most number of times."
                                [container]="'body'" tooltipClass="dashboard-custom-tooltips" class="pl-1">
                        </div>
                        <div echarts [options]="mostClickBar" class="demo-chart-graphMode bottom"></div>
                        <div class="text-center">{{'dash_board_view_Number_of_Clicks'| translate}}</div>
                    </div>
                </div>
                <div class="col-6 box-content">
                    <div class="full-card pb-4">
                        <div class="row col-12">
                            <div class="title-card">{{'dash_board_view_Feedback'| translate}}
                                <img src="assets/icons/help.svg" placement="top-center"
                                    ngbTooltip="{{'dash_board_view_feedback_tooltip' | translate}}"
                                    [container]="'body'" tooltipClass="dashboard-custom-tooltips" />
                            </div>
                        </div>
                        <div class="empty-feedback"
                            *ngIf="!feedbackStats?.feedBackReceivedCount">
                            <div class="position-relative">
                                <img src="assets/icons/dashboard/feedback_empty.png">
                            </div>
                            <div class="title-empty">
                                <span>No user Feedback available as of now.</span>
                                <p *ngIf="!(searchExperienceConfig?.interactionsConfig?.feedbackExperience?.queryLevel)">Try enabling Feedback to start receiving Feedback.</p>
                            </div>
                        </div>
                        <div class="row col-12 m-0 p-0"
                            *ngIf="(searchExperienceConfig?.interactionsConfig?.feedbackExperience?.queryLevel && feedbackStats?.feedBackReceivedCount )">
                            <div class="col-6 m-0 p-0 legends_sec_piechart">
                                <div echarts [options]="feedbackPieSearches" class="pie-chart-graph"></div>
                                <div class="legend-data col-12 p-0">
                                    <div class="d-flex align-items-center mb-2">
                                        <span class="indication total"></span>
                                        <span class="title">{{'dash_board_view_total_searches'|
                                            translate}}</span>
                                    </div>
                                    <div class="d-flex align-items-center mb-2">
                                        <span class="indication feedback"></span>
                                        <span class="title">{{'dash_board_view_Feedback_Received'|
                                            translate}}</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-6 m-0 p-0 legends_sec_piechart">
                                <div echarts [options]="feedbackPieResult" class="pie-chart-graph"></div>
                                <div class="legend-data col-12 p-0">
                                    <div class="d-flex align-items-center mb-2">
                                        <span class="indication usefull"></span><span
                                            class="title">{{'dash_board_view_Useful_Result'| translate}}</span>
                                    </div>
                                    <div class="d-flex align-items-center mb-2">
                                        <span class="indication notusefull"></span><span
                                            class="title">{{'dash_board_view_Not_Useful_Result'|
                                            translate}}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </perfect-scrollbar>
</div>