<div class="experiment-container">
    <div class="header-sec row">
        <div class="col-8 left-sec p-0">
            <div class="tab-sec d-flex">
                <div class="tab_title" [ngClass]="{'active':setTab==='all'}" (click)='selectedTab("all")'>All<span>({{allExp}})</span></div>
                <div class="tab_title" [ngClass]="{'active':setTab==='configured'}" (click)='selectedTab("configured")'>Configured<span>({{confExp}})</span></div>
                <div class="tab_title" [ngClass]="{'active':setTab==='active'}" (click)='selectedTab("active")'>Active<span>({{actExp}})</span></div>
                <div class="tab_title" [ngClass]="{'active':setTab==='paused'}" (click)='selectedTab("paused")'>Paused<span>({{pauExp}})</span></div>
                <div class="tab_title" [ngClass]="{'active':setTab==='completed'}" (click)='selectedTab("completed")'>Completed<span>({{compExp}})</span></div>
            </div>
        </div>
        <div class="col-4 p-0 right-sec">
            <div (click)="addExperiment()" class="title"><img src="assets/icons/add_plus.svg">Add Experiment</div>
        </div>
    </div>
    <perfect-scrollbar class="scroll-table">
        <div class="kr-sg-data-table accordion-table">
            <section class="table-content">
                <header class="table-header">
                    <div class="col">EXPERIMENT NAME</div>
                    <div class="col">VARIANTS</div>
                    <div class="col">STATUS</div>
                    <div class="col">DURATION</div>
                </header>
                <div *ngFor='let exp of listOfExperiments'>             
                <div class="content-body collapsed-default collapsed" data-toggle="collapse" attr.data-target="#{{exp._id}}">    
                    <div class="col">{{exp.name}}</div>
                    <div class="col">{{exp.variants.length}}</div>
                    <div class="col">{{exp.state}}</div>
                    <div class="col">Start Date: 20 Dec 2020</div>
                </div>
                <div id={{exp._id}} class="collapse accordion-table">
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                </div>
            </div>
            </section>                               
        </div> 
        <div class="no-experiments" *ngIf='listOfExperiments.length===0'>
            <div class ="title">No results found</div>
        </div>
        <div class="no-experiments" *ngIf='filterExperiments.length===0'>
            <img src="assets/icons/experiment/empty_experiments.svg" >
            <div class ="title">You haven't added any Experiment yet</div>
            <div class ="dec">Fortunately , it is very easy  to add one by clicking on the Add experiments</div>
        </div>
    </perfect-scrollbar>
</div>

<kr-modal modalType="center" modalClass="modal_popups_ addFieldModalPop smallModal"  #addExperiments>   
    <div class="modal-header">
        <div class="title">New Experiment</div>
        <div class="close_icon" (click)="closeModalPopup()"><img src="assets/icons/modal-close.svg"></div>
    </div>
    <perfect-scrollbar class="perfect-scroll-modal-body">
    <div class="modal-body textAlignLeft">

        <div class="row ml-0 mr-0 mb-3 col-12 p-0">
            <div class="kr-sg-input-text col-6 pl-pr-5">
                <div class="label-text">Name of Experiment</div>
                <input type="text" autocomplete="off"  placeholder="Enter Experiment Name" class="input-text" [(ngModel)]='experiment.name'>
            </div>
        </div>

        <div class="row ml-0 mr-0 mb-3 col-12 p-0" *ngFor='let variant of varientArray'>
            <div class="kr-sg-input-text col-6 pl-pr-5 ifvariant">
                <div class="label-text">Variant Name</div>
                <input type="text" autocomplete="off" #varName  placeholder="Enter Variant Name" class="input-text" (blur)="fetchVariant(variant,varName.value,'name')">
                <span class="v-name" [style.background-color]="variant.color">{{variant.code}}</span>
            </div>
            <div class="kr-sg-dropdowns col-6 pl-pr-5">
                <div class="label-text">Search Configuration</div>
                <div class="dropdown dropdown-open">
                    <button class="dropdown-toggle dropdown-input" data-toggle="dropdown">{{variant.select_config?variant.select_config:'Select Configuration'}}</button>                                            
                    <ul class="dropdown-menu content-menu">                                                                
                      <li *ngFor="let query of queryPipeline" (click)="fetchVariant(variant,query._id,'queryid');variant.select_config=query.name">
                       {{query.name}}
                      </li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="mb-3 variant-add" (click)="addVarient()"><img src="assets/icons/add_blue.svg" />Add Variant</div>    
        
        <div class="duration-sec">
            <div class="kr-sg-input-text">
                <div class="label-text">Duration</div>
                <input type="number" autocomplete="off" class="input-text" [(ngModel)]='experiment.duration'>
                <img src="assets/icons/minus.svg" class="minus" (click)='experiment.duration=experiment.duration-1'>
                <img src="assets/icons/plus_gray.svg" class="plus" (click)='experiment.duration=experiment.duration+1'>
            </div>
            Days
        </div>
        
        <!-- <div class="row m-0 mb-3">
            <div class="kr-sg-input-text col-6 p-0">
                <div class="label-text">Name of Experiment</div>
                <input type="text" autocomplete="off"  placeholder="Enter Experiment Name" class="input-text" [(ngModel)]='experiment.fieldName'>
            </div>
        </div>
    
        <div class="row m-0 mb-3 d-none" *ngFor='let varient of varientArray'>
            <div class="kr-sg-input-text col-6 p-0">
                <div class="label-text">Variant Name</div>
                <div class="input-icons"> 
                <span [style.background-color]="varient.color" class="varient">{{varient.code}}</span>
                <input type="text"  placeholder="Enter Variant Name" class="input-text">
                </div>
            </div>
            <div class="kr-sg-input-text col-6 p-0">
                <div class="label-text">Search Configuration</div>
                <div class="kr-sg-dropdowns">                                        
                    <div class="dropdown dropdown-open">
                        <button class="dropdown-toggle dropdown-input" data-toggle="dropdown">Choose an option</button>                                            
                        <ul class="dropdown-menu content-menu">
                          <li>Option 1</li>
                          <li>Option 2</li>
                          <li>Option 3</li>
                        </ul>
                      </div>
                </div>
             </div>
             <div class="close_icon" (click)=closeVariant(varient)><img src="assets/icons/modal-close.svg"></div>
        </div>
        <div class="row m-0 mb-3 d-none">
            <span (click)="addVarient()"><img src="assets/icons/add_plus.svg" />Add Variant</span>
        </div> -->
    </div>
    </perfect-scrollbar> 
    <div class="modal-footer text-left">
        <button type="button"  class="kr-sg-button-primary btn_lg float-right" [disabled]="!experiment.name" (click)="createExperiment()">Add</button>                   
        <button type="button" class="kr-sg-button-secondary btn_lg float-right" (click)="closeModalPopup()">Cancel</button>
    </div>    
</kr-modal>
