<header>
    <nav class="findlyHeader navbar fixed-top navbar-expand-lg navbar-light white scrolling-navbar">
        <div class="container-fluid p-0">
            <div class="logoTabsContainer align-items-center">
                <img src="assets/images/logos/findly-logo.svg" class="logoKoreIcon landing-screen" [routerLink]="['/apps']" routerLinkActive="active" skipLocationChange (click)="analyticsClick('apps',true)">
                <img src="assets/images/logos/findly-logo-small.svg" class="logoKoreIcon no-landing-screen" [routerLink]="['/apps']" routerLinkActive="active" skipLocationChange (click)="analyticsClick('apps',true)">
                <!-- <div class="myappname" *ngIf="appName">
                    <div container="body" ngbTooltip="{{appName}}" class="name">{{appName}}</div>
                </div> -->
                <div class="headerTabsContainer">
                    <div class="headerMenuTab" [ngClass]="{'active' : mainMenu == '/summary'}" skipLocationChange routerLinkActive="active" (click)="analyticsClick('/summary')">Overview</div>
                    <div class="headerMenuTab" id="sourceTab" [ngClass]="{'active' : mainMenu == '/source'}" skipLocationChange routerLinkActive="active" (click)="analyticsClick('/source')">
                        <span>Indices</span>
                        <span routerLink="/content" class="d-none"></span>
                        <span routerLink="/faqs" class="d-none"></span>
                        <span routerLink="/indices" class="d-none"></span>
                        <span routerLink="/botActions" class="d-none"></span>
                        <span routerLink="/ml-threshold" class="d-none"></span>
                        <span routerLink="/traits" class="d-none"></span>
                        <span routerLink="/rules" class="d-none"></span>
                        <span routerLink="/index" class="d-none"></span>
                        <span routerLink="/query" class="d-none"></span>
                        <span routerLink="/attributes" class="d-none"></span>

                    </div>
                    <div class="kr-sg-dropdowns headerMenuTab" [ngClass]="{'active' : (mainMenu == '/dashboard'
                     || mainMenu == '/userEngagement' || mainMenu == '/searchInsights' ||mainMenu == '/resultInsights')}">
                        <div class="dropdown dropdown-open">
                            <button class="dropdown-toggle dropdown-input cust-repeat-type" data-toggle="dropdown"> Analytics</button>
                            <ul class="dropdown-menu content-menu content-width">
                                <li (click)="analyticsClick('/dashboard')" id="dashboardTab" [ngClass]="{'active' : mainMenu == '/dashboard'}"><a>Dashboard</a></li>
                                <li (click)="analyticsClick('/userEngagement')" [ngClass]="{'active' : mainMenu == '/userEngagement'}"><a>User Engagement</a></li>
                                <li (click)="analyticsClick('/searchInsights')" [ngClass]="{'active' : mainMenu == '/searchInsights'}"><a>Search Insights</a></li>
                                <li (click)="analyticsClick('/resultInsights')" [ngClass]="{'active' : mainMenu == '/resultInsights'}"><a>Results Insights</a></li>
                            </ul>
                        </div>
                    </div>
                    <!-- <div class="headerMenuTab" [routerLink]="['/dashboard']" skipLocationChange routerLinkActive="active" (click)="analyticsClick('metrics')">Analytics</div> -->
                    <div class="headerMenuTab" id='experimentsTab' [ngClass]="{'active' : mainMenu == '/experiments'}" (click)="analyticsClick('/experiments')">Experiments</div>
                    <div class="headerMenuTab" id='channelsTab' [ngClass]="{'active' : mainMenu == '/settings'}" (click)="analyticsClick('/settings')">Settings </div>
                </div>
            </div>
            <ul class="navbar-nav nav-flex-icons align-items-center right-menu-content flex-row justify-content-end">
                <ng-template #rt let-r="result" let-t="term">
                    <ngb-highlight (click)="triggerRoute(null,r)" [result]="r.displayName" [term]="t"></ngb-highlight>
                </ng-template>
                <li class="nav-item autoSearchTools d-none">
                    <img src="assets/icons/sidemenu/search.svg" (click)="toggleSearch(true)" [ngClass]="{'d-none': searchActive}">
                    <!-- <div class="kr-sg-input-search" [ngClass]="{'d-none': !searchActive}" >                               
                        <input type="text" placeholder="Search" class="input-search" (keydown.enter)="triggerRoute(searchText)" [(ngModel)]="searchText" [ngbTypeahead]="search" [resultTemplate]="rt"  [inputFormatter]="formatter">
                        <img src="assets/images/close.svg" class="search-icon" (click)="toggleSearch(false)">
                    </div> -->
                    <div class="kr-sg-input-search" [ngClass]="{'d-none': !searchActive}">
                        <input type="text" placeholder="Search" class="input-search" (keyup.enter)="triggerRoute(searchText)" [ngClass]="{'pl-33':!searchText}" autocomplete="off" [(ngModel)]="searchText" (focusout)="toggleSearch(false)" (mouseover)="searchImgSrc = (searchFocusIn ? 'assets/icons/search_gray.svg' :'assets/icons/search_gray_dark.svg')"
                            (mouseout)="searchFocusIn=false;searchImgSrc = 'assets/icons/search_gray.svg'" (focus)="searchFocusIn=true;searchImgSrc = 'assets/icons/search_gray.svg'" [ngbTypeahead]="search" [resultTemplate]="rt" [inputFormatter]="formatter">
                        <img [src]="searchImgSrc" class="search-icon" *ngIf="!searchText">
                        <img class="close-icon" *ngIf="searchText" src="assets/icons/close_icon.svg" [ngClass]="{'pr-22':searchText}" (click)="searchText ='';toggleSearch(false)">
                    </div>
                </li>
                <!-- <div class="text-right nav-item trainBlock d-none">
                    <button class="kr-sg-button-primary btn_lg" [disabled]='training' (click)="train()">{{(training)?'Training...':'Train'}}</button>
                </div> -->
                <li class="nav-item app-dropdown">
                    <div class="kr-sg-dropdowns" ngbDropdown [placement]="'bottom-center'">
                        <div class="dropdown dropdown-open">
                            <button class="dropdown-toggle dropdown-input" id="dropdownBasic1" ngbDropdownToggle>Banking App</button>
                            <ul class="dropdown-menu content-menu" ngbDropdownMenu>
                                <div class="search-assist-apps">
                                    <div class="main-title">SearchAssist Apps</div>
                                    <div class="apps-block">
                                        <div class="title-secondary">Recent Apps</div>
                                        <div class="app-name-block">
                                            <div class="app-name">Banking App</div>
                                            <div class="shared-name">Shared by Santhosh</div>
                                        </div>
                                        <div class="app-name-block">
                                            <div class="app-name">Banking App</div>
                                            <div class="shared-name">My App</div>
                                        </div>
                                        <div class="app-name-block">
                                            <div class="app-name">Banking App</div>
                                            <div class="shared-name">My App</div>
                                        </div>
                                        <div class="app-name-block">
                                            <div class="app-name">Banking App</div>
                                            <div class="shared-name">My App</div>
                                        </div>
                                        <div class="app-name-block">
                                            <div class="app-name">Banking App</div>
                                            <div class="shared-name">My App</div>
                                        </div>                                        
                                    </div>
                                    <div class="view-app-apps">View all Apps</div>
                                    <div class="create-new-app">Create New App</div>
                                </div>
                            </ul>
                        </div>                                            
                    </div>
                </li>
                <li class="nav-item test-button">
                    <button class="kr-sg-button-secondary btn_lg" (click)="openOrCloseSearchSDK()">Test</button>
                </li>
                <li class="nav-item search-block">
                    <div class="search_icon">
                        <img src="assets/icons/sidemenu/search.svg">
                    </div>
                    <div class="global-searc-container">
                        <div class="kr-sg-input-search">     
                            <input type="text" placeholder="Search" class="input-search" (keyup.enter)="triggerRoute(searchText)" autocomplete="off" [(ngModel)]="searchText" [ngbTypeahead]="search" [resultTemplate]="rt" [inputFormatter]="formatter">                                                      
                            <img src="assets/icons/search_gray.svg" class="search-icon">
                        </div>
                    </div>
                </li>
                <li class="nav-item notification-block">                                      
                    <div class="kr-sg-dropdowns" ngbDropdown>
                        <div class="dropdown dropdown-open">
                            <button class="dropdown-toggle dropdown-input" id="dropdownBasic1" ngbDropdownToggle>
                                <img src="assets/icons/sidemenu/notification.svg">
                                <sup *ngIf="isAnyRecordFailed" class="red-notification"></sup>
                                <sup *ngIf="isAnyRecordCompleted" class="completed-notification"></sup>
                                <img src="assets/icons/notification-ring.svg" class="inProgress notification-icon" *ngIf="isAnyRecordInprogress" placement="top" container='body'>
                            </button>
                            <ul class="dropdown-menu content-menu notification-dropdown" ngbDropdownMenu>
                                <div class="notification-dropdown-status">
                                    <ul class="nav nav-tabs" role="tablist">
                                        <li class="nav-item">
                                          <a class="nav-link active" data-toggle="tab" href="#statusupdates">Status Updates</a>
                                        </li>
                                        <li class="nav-item">
                                          <a class="nav-link" data-toggle="tab" href="#activities">Activities</a>
                                        </li>                                       
                                    </ul>
                                    <div class="tab-content">
                                        <div id="statusupdates" class="tab-pane active">
                                            <div class="statusDocker">
                                                <div class="statusDockerBody">
                                                    <perfect-scrollbar class="perfect-scroll-modal-body docker">
                                                        <div class="docker-list" *ngIf="!statusDockerLoading">
                                                            <div class="row ml-0 mr-0 col-12 p-0 row-content" *ngFor="let task of dockersList; let index = index">
                                                                <div class="col-9 pl-0 task_content">
                                                                    <div class="heading">{{task.message}}</div>
                                                                    <div class="desc" *ngIf="getStatusView(task.status)">{{task.status | titlecase}} <span class="tooltip-data" ngbTooltip='{{task.createdOn}}' tooltipClass="date-tooltip" placement="right-center" [container]="'body'"><img src="assets/icons/docker/clock.svg"></span></div>
                                                                    <div class="desc" *ngIf="!getStatusView(task.status)">{{getStatusView(task.status, 'other')}} <span class="tooltip-data" ngbTooltip='{{task.createdOn}}' tooltipClass="date-tooltip" placement="right-center" [container]="'body'"><img src="assets/icons/docker/clock.svg"></span></div>
                                                                </div>
                                                                <div class="col-3 d-flex p-0 align-items-center justify-content-end">
                                                                    <div class="img-block" [class.mr-3]="(task.status == 'IN_PROGRESS' || task.status == 'validation') && (task.extractionSourceId && (task.jobType == 'webdomain' || task.jobType == 'faq' ))">
                                                                        <img src="assets/icons/docker/info.svg" *ngIf="task.status === 'FAILURE'">
                                                                        <img src="assets/icons/docker/return.svg" *ngIf="task.status === 'HALTED'" (click)="recrawl(task)">
                                                                        <!-- <img src="assets/icons/docker/download.svg" *ngIf="(task.status === 'SUCCESS') && (task.jobType === 'faq')"> -->
                                                                        <img src="assets/icons/docker/check.svg" *ngIf="(task.status === 'SUCCESS')">
                                                                        <img src="assets/icons/docker/external-link.svg" (click)="navigateTo(task)" *ngIf="(task.status == 'IN_PROGRESS' || task.status == 'validation') && (task.extractionSourceId && (task.jobType == 'webdomain' || task.jobType == 'faq'))">                        
                                                                    </div>
                                                                    <div class="status-blcok">                        
                                                                        <img src="assets/icons/ringLoading.svg" class="inProgress" *ngIf="task.status === 'IN_PROGRESS' || task.status === 'validation'" placement="top" container='body'>
                                                                        <span *ngIf="(task.status == 'IN_PROGRESS') && (task.percentageComplete > 0)" class="run-percentageDone">{{task.percentageComplete}}</span>
                                                                        <img src="assets/icons/docker/close.svg" (click)="removeRecord(task, index)" *ngIf="(task.status !== 'IN_PROGRESS')">
                                                                    </div>
                                                                </div>
                                                            </div>         
                                                            <div *ngIf="!dockersList.length" class="recordsEmpty">
                                                                You got no records in StatusDocker.
                                                            </div>
                                                        </div>
                                                        <div class="statusDockerLoadingSpinner row m-0" *ngIf="statusDockerLoading" >
                                                            <mat-spinner diameter="18" strokeWidth="2"></mat-spinner>
                                                            <span class="please-wait-message ml-3">{{'please_wait' | translate}}</span>
                                                        </div>
                                                    </perfect-scrollbar>
                                                    <div class="clear_icon text-right" [class.disabled]="!dockersList.length" (click)="clearAllRecords()">{{'clear_all' | translate}}</div>
                                                </div>
                                            </div>                                        
                                        </div>
                                        <div id="activities" class="tab-pane fade">
                                          <h3>Activities</h3>                                          
                                        </div>                                        
                                    </div>
                                </div>
                            </ul>
                        </div>                                            
                    </div>
                </li>
                <li class="nav-item help-icon">
                    <img src="assets/icons/sidemenu/help.svg">
                </li>
                <li class="nav-item user_icon">
                    <button mat-button [matMenuTriggerFor]="menu" class="headerIcons p-0"><img src="assets/images/avatar.svg"></button>
                    <mat-menu #menu="matMenu" class="headerDropDown">
                        <div class="accountsSwitchDiv">
                            <div class="titleaccounts">Accounts</div>
                            <button mat-menu-item class="accountName"><img src="assets/images/tick-icon-green.svg" class="tick-icon-green"> account one</button>
                            <button mat-menu-item class="accountName"><img src="assets/images/tick-icon-green.svg" class="tick-icon-green"> account two</button>
                        </div>
                        <button mat-menu-item (click)="switchAccount()" class="switchAccount" *ngIf="showSwichAccountOption">Switch Account</button>
                        <button mat-menu-item (click)="logoutClick()" class="logOut"><img src="assets/images/poweroffIcon.svg" class="poweroffIcon">Logout</button>
                    </mat-menu>
                </li>
            </ul>
        </div>
    </nav>
</header>