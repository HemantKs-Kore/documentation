<div class="presentable-table-block" id="sa_presentable-table">
    <div class="p-table-filter-block" id="sa_filter-block">
        <div class="pt-add" id="sa_pt-add">
            <div class="add-field-link-btn" id="add-field" (click)="openModalPopup()"><span class="icon-add-span"><i class="si-add-plus icon-add"></i></span>
               {{"fields_add_field" |translate}}</div>
        </div>
        <!-- Search -->
        <app-search-filter (searchkey)="getsearchvalue($event,'datatable')"></app-search-filter>
        <!-- Search ends-->
    </div>

    <div class="mainLoadingSpinner" *ngIf="isLoading">
        <mat-spinner diameter="18" strokeWidth="2"></mat-spinner>
        <span class="please-wait-message">{{'sa_please_wait'| translate}}</span>
    </div>

    <ng-container *ngIf="!isLoading">
        <!-- table header start from here -->
        <div class="index-config-lang-table row m-0" id="sa_lang-table">
            <div class="table_data_content col-12" id="sa_table_data_content">
                <!-- table header start from here -->
                    <div class="table_header row m-0" id="sa_table_header">
                        <div class="col_ col-5 title d-flex align-items-center justify-content-start" (click)="sortByApi('fieldName','datatable')">
                            <span class="d-flex align-items-center flex-column mr-2 filter-sort" id="filter-sort">
                                <i class="si-chev-up icon-up" [ngClass]="getSortIconVisibility('fieldName', 'up','datatable')" id="sa_icon-up"></i>
                                <i class="si-chev-down icon-down" [ngClass]="getSortIconVisibility('fieldName', 'down','datatable')" id="sa_icon-down"></i>
                            </span>
                            {{"search_settings_field_name_caps" |translate}}
                        </div>
                        <div class="col_ col-5 title d-flex align-items-center justify-content-start" id="title"> 
                            <span class="d-flex align-items-center flex-column mr-2 filter-sort" id="sa_filter-sort" (click)="sortByApi('fieldDataType','datatable')">
                                <i class="si-chev-up icon-up" [ngClass]="getSortIconVisibility('fieldDataType', 'up','datatable')" id="sa_icon-up1"></i>
                                <i class="si-chev-down icon-down" [ngClass]="getSortIconVisibility('fieldDataType', 'down','datatable')" id="sa_icon-icon-down1"></i>
                            </span>
                            {{"search_settings_type" |translate}}
                        </div>
                        <div class="col_ col-2 title d-flex align-items-center justify-content-start"> 
                        </div>
                    </div>
                <!-- table header end from here -->
                
                <!-- Table Records/Body -->
                <!-- <perfect-scrollbar class="table_body_content" id="sa_table_body_ps" (psYReachStart)="onYReachStart($event)" (psYReachEnd)="onYReachEnd($event)"> -->
                    <perfect-scrollbar class="table_body_content" id="sa_table_body_ps">
                        <div class="empty-table" *ngIf="!tablefieldvalues.length">
                            <!-- <img src="assets/images/icons/empty_ill.svg"> -->
                            <div class="heading">{{'search_settings_empty_table_data'| translate}}</div>
                            <div class="desc">{{'search_settings_empty_table_data_please_add_Fields'| translate}}</div>
                        </div>
                            <div class="table_body row m-0" *ngFor="let fields of tablefieldvalues;let i = index" >
                        
                                <div class="col-5 title text-left text-truncate" title="">
                                    {{fields.fieldName}}
                                </div>
                                <div class="col-5 title text-left p-0">
                                    {{'sa_'+fields.fieldDataType | translate}}
                                </div>
                                <div class="col-2 p-0 text-left">
                                    <div class="action_links">
                                        <!-- <span class="action_link-icon">
                                            <i class="si-pencil-edit"></i> Edit
                                        </span> -->
                                        <span class="action_link-icon link-delete" (click)="deletefieldsDataPopup(fields)">
                                            <i class="si-delete1 mr-1" container="body" ngbTooltip="{{'sa_remove'| translate}}" placement="auto"  ></i> 
                                        </span>
                                    </div>
                                </div>
                            </div>
                </perfect-scrollbar>
            </div>
        </div>
   </ng-container>

</div>



<kr-modal modalType="center" modalClass="modal_popups_ addFieldModalPop addFieldModalPopup addLanguageModal"
    #addFieldModalPop>
    <div class="modal-header" id="sa_modal-header">
        <div class="title" id="sa_title">{{"fields_add_field" |translate}}</div>
        <div class="close_icon" id="sa_close_icon" (click)="closeModalPopup()"><img src="assets/icons/modal-close.svg"></div>
    </div>
    <ng-container>        
            <div class="modal-body">
                <app-search-filter [shouldClear]="shouldClear" (searchkey)="getsearchvalue($event,'addFieldModalPop')"></app-search-filter>
                <div class="index-config-lang-table" id="sa_index_config_lang_table">
                    <div class="table_data_content">
                        <div class="table_header row m-0" id="sa_table_data_content">
                            <div class="col_ col-2 title d-flex align-items-center justify-content-start">
                                <div class="d-none">checkbox</div>
                            </div>
                            <div class="col_ col-7 title d-flex align-items-center justify-content-start p-0">
                                <span class="d-flex align-items-center flex-column mr-2 filter-sort" id="sa_filter_sort" (click)="sortByApi('fieldName','addpopup')">
                                    <i class="si-chev-up icon-up" [ngClass]="getSortIconVisibility('fieldName', 'up','addpopup')" id="sa_icon_up_2"></i>
                                    <i class="si-chev-down icon-down" [ngClass]="getSortIconVisibility('fieldName', 'down','addpopup')" id="sa_icon_up_3"></i>
                                </span>
                                {{"search_settings_field_name_caps" |translate}}
                            </div>
                            <div class="col_ col-3 title d-flex align-items-center justify-content-start p-0" id="sa_title" >
                                <span class="d-flex align-items-center flex-column mr-2 filter-sort" (click)="sortByApi('fieldDataType','addpopup')" id="filter-sort-1">
                                    <i class="si-chev-up icon-up" [ngClass]="getSortIconVisibility('fieldDataType', 'up','addpopup')" id="sa_icon_up_4"></i>
                                    <i class="si-chev-down icon-down" [ngClass]="getSortIconVisibility('fieldDataType', 'down','addpopup')" id="sa_icon_up_5"></i>
                                </span>
                                {{"search_settings_type" |translate}}
                            </div>
                        </div>
                        <perfect-scrollbar class="table_body_content" id="sa_table_body">
                                    <div class="table_body row m-0" *ngFor="let fields of checkValues();let i = index" >
                                        <div class="col-2">
                                            <div class="kr-sg-checkbox" id="sa_checkbox" >
                                                <input id="{{ fields._id }}"  class="checkbox-custom" [checked]="fields.isChecked" type="checkbox" (click)="addRecord(fields,$event)">
                                                <label for="{{ fields._id }}" class="checkbox-custom-label"></label>
                                            </div>
                                        </div>
                                        <div class="col-7 title text-left p-0 text-truncate" title="" >
                                            {{fields.fieldName}} 
                                        </div>
                                        <div class="col-3 title text-left p-0" >
                                            {{'sa_'+fields.fieldDataType | translate}}
                                        </div>
                                    </div>
                        </perfect-scrollbar>
                    </div>
                </div>
            </div>

        <div class="modal-footer">
            <div class="modal-footer-with-selected-count" id="sa_selected-count">
                <!-- <span class="loader-spin-inside-btn" *ngIf=true></span> -->
                <div>
                    <button type="button" class="kr-sg-button-primary btn_lg float-right" id="sa_primary_button" (click)="add()" ><span class="loader-spin-inside-btn" *ngIf="isaddLoading"></span>{{"search_settings_add" |translate}}</button>
                    <button type="button" class="kr-sg-button-secondary btn_lg float-right" id="sa_secondary_button" (click)="closeModalPopup()">{{"search_settings__cancel" |translate}}</button>
                </div>
            </div>
           
        </div>
    </ng-container>
</kr-modal>
