<div class="contentContainer p-0">
  <div class="mainLoadingSpinner" *ngIf="loadingContent" [@fadeInOutAnimation]>
    <mat-spinner diameter="18" strokeWidth="2"></mat-spinner>
    <span class="please-wait-message">{{'Please Wait!' | translate}}</span>
  </div>
  <!-- <div class="table-list-content">
    <div class="kr-sg-data-table" *ngIf="!loadingContent">
      <div class="header-sec col-12 row m-0">
        <div class="col-4 p-0">Content Management</div>
      </div>
    </div>
  </div> -->
  <ng-container *ngIf="!(resources && resources.length) && loadingContent1">
    <app-useronboarding-journey [componentType]='componentType'></app-useronboarding-journey>
    <div class="title-content">{{"contentSource_content" | translate}}
      <span class="module-topic" tooltipClass="tooltip-global-" [container]="'body'" ngbTooltip='Topic Guide' placement="right-center"(click)="openUserMetaTagsSlider()">
        <i class="si-topic-guide-1"></i>
      </span>
    </div>    
    <perfect-scrollbar class="scoll-empty-screen">
      <div class="empty-landing-screen">
        <div class="img-block" *ngIf="!emptyItems"><img class="action_icon" (load)="imageLoad()"
            src="assets/images/contentmanag-empty.png"></div>
        <ng-container *ngIf="loadImageText">
          <div class="empty-title">{{"contentSource_no_content" | translate}}</div>
          <div class="desc-text"> {{"contentSource_no_content_info" | translate}}</div>
          <div class="kr-sg-dropdowns" ngbDropdown [container]="'body'">
            <div class="dropdown dropdown-open">
              <button class="dropdown-toggle dropdown-input" ngbDropdownToggle>{{"contentSource_add_content" |
                translate}}</button>
              <ul class="dropdown-menu content-menu faq-filter-add" ngbDropdownMenu>
                <li class="webDomain" (click)="addNewContentSource('contentWeb')">{{"contentSource_craw_web_domain" |
                  translate}}</li>
                <li class="webDomain" (click)="addNewContentSource('contentDoc')">{{"contentSource_upload_file" |
                  translate}}</li>
              </ul>
            </div>
          </div>
        </ng-container>
        <ng-container *ngIf="noItems && emptySearchResults">
          <div class="desc-text">{{"contentSource_no_search_query" | translate}}</div>
        </ng-container>
      </div>
    </perfect-scrollbar>
  </ng-container>

  <div class="table-list-content" *ngIf="!loadingData">
    <app-useronboarding-journey [componentType]='componentType'></app-useronboarding-journey>
    <div class="kr-sg-data-table with-checkbox">
      <div class="table-action-header">
        <div class="title-main">
          {{"contentSource_content_management" | translate}}
          <span class="module-topic" tooltipClass="tooltip-global-" [container]="'body'" ngbTooltip='Topic Guide' placement="right-center"(click)="openUserMetaTagsSlider()">
            <i class="si-topic-guide-1"></i>
          </span>
        </div>
        <div>
          <div class="kr-sg-input-search m-0"  [ngClass]="{'d-none': !showSearch}">
            <input type="text" maxlength="60" placeholder="Search" class="input-search" name='searchSources' placeholder="Search" [ngClass]="{'pl-2':searchSources}"
              id="searchContentSources" [(ngModel)]="searchSources" (keyup)="getSourceList(null,searchSources,'search')"
              autocomplete="off"  (mouseover)="searchImgSrc = (searchFocusIn ? 'assets/icons/search_gray.svg' :'assets/icons/search_gray_dark.svg')"
              (mouseout)="searchFocusIn=false;searchImgSrc = 'assets/icons/search_gray.svg'" (focus)="searchFocusIn=true;searchImgSrc = 'assets/icons/search_gray.svg'">
              <img [src]="searchImgSrc" class="search-icon" *ngIf="!searchSources">
              <img class="close-icon" src="assets/icons/close_icon.svg" [ngClass]="{'pr-22':searchSources}"  (mouseover)="activeClose=true" (mouseout)="activeClose=false" (click)="focusoutSearch(true);">
          </div>

          <div class="search-block">
            <span [ngClass]="{'d-none': showSearch}" class="mr-3" id="btn_toggle_search_structured_data"
              (click)="showSearch = !showSearch;focusinSearch('searchContentSources')"><img
                src="assets/icons/search.svg" [ngClass]="{'d-none': showSearch}">{{'search' | translate}}</span>
          </div>

          <div class="kr-sg-dropdowns">
            <div class="dropdown dropdown-open">
              <button class="dropdown-toggle dropdown-input" data-toggle="dropdown"><img
                  src="assets/icons/sidemenu/plus-table.svg">{{"contentSource_add_content" | translate}}</button>
              <ul class="dropdown-menu content-menu">
                <li (click)="addNewContentSource('contentWeb')">{{"contentSource_craw_web_domain" | translate}}</li>
                <li (click)="addNewContentSource('contentDoc')">{{"contentSource_upload_file" | translate}}</li>
              </ul>
            </div>
          </div>
          <div *ngIf="currentView === 'list'" class="grid-list-view-table" (click)="currentView='grid'"
            ngbTooltip='Grid'><img src="assets/icons/grid-view.svg"></div>
          <div *ngIf="currentView === 'grid'" class="grid-list-view-table" (click)="currentView='list'"
            ngbTooltip='List'><img src="assets/icons/list-view.svg"></div>
        </div>
      </div>
      <ng-container  *ngIf="resources && resources.length">
        <section class="table-content" *ngIf="currentView === 'list'">
          <header class="table-header">
            
            <div class="col_ col-3 d-flex align-items-center" (click)="sortByApi('name')">
              <!-- <img src="assets/icons/caretDown.svg"
                [ngClass]="{'assending': (selectedSort==='name') && isAsc,'decending':(selectedSort==='name') && !isAsc}"
                class="ml-1 sortImg"> -->
              <span class="d-flex align-items-center flex-column mr-1">
                <img [ngClass]="getSortIconVisibility('name', 'down')" src="assets/icons/caretDown.svg"
                  class="ml-1 sortImg downArrow">
                <img [ngClass]="getSortIconVisibility('name', 'up')" src="assets/icons/caretDown.svg"
                  class="ml-1 sortImg upArrow">
              </span>
              {{"contentSource_source_title_caps" | translate}}
            </div>
            <div class="col_ col-2 d-flex align-items-center" (click)="sortByApi('triggeredBy')">
              <!-- <img src="assets/icons/caretDown.svg"
                [ngClass]="{'assending': (selectedSort==='createdOn') && isAsc,'decending':((selectedSort==='createdOn') && !isAsc)}"
                class="ml-1 sortImg"> -->
                <span class="d-flex align-items-center flex-column mr-1">
                  <img [ngClass]="getSortIconVisibility('triggeredBy', 'down')" src="assets/icons/caretDown.svg" class="ml-1 sortImg downArrow">
                  <img [ngClass]="getSortIconVisibility('triggeredBy', 'up')" src="assets/icons/caretDown.svg" class="ml-1 sortImg upArrow">
                </span>
                {{"contentSource_triggered_by_caps" | translate}}
            </div>
            <div class="col_ col-2 d-flex align-items-center" (click)="sortByApi('numOfDocs')">
              <span class="d-flex align-items-center flex-column mr-1">
                <img [ngClass]="getSortIconVisibility('numOfDocs', 'down')" src="assets/icons/caretDown.svg" class="ml-1 sortImg downArrow">
                <img [ngClass]="getSortIconVisibility('numOfDocs', 'up')" src="assets/icons/caretDown.svg" class="ml-1 sortImg upArrow">
              </span>
              {{"contentSource_no_of_pages_caps" | translate}}
            </div>
            <div class="col_ col-4 d-flex align-items-center" (click)="sortByApi('recentStatus')"><span
              class="selected-length-doc-web hide">({{this.filterSystem.statusFilter}})</span>
            <span class="d-flex align-items-center flex-column mr-1">
              <img [ngClass]="getSortIconVisibility('recentStatus', 'down')" src="assets/icons/caretDown.svg"
                class="ml-1 sortImg downArrow">
              <img [ngClass]="getSortIconVisibility('recentStatus', 'up')" src="assets/icons/caretDown.svg"
                class="ml-1 sortImg upArrow">
            </span>
            {{"contentSource_status_caps" | translate}}
            <div class="kr-sg-dropdowns type_sort_dropdown" #statusFilter="ngbDropdown" ngbDropdown [container]="'body'"
              [autoClose]="true" [placement]="'bottom-right'">
              <div class="dropdown dropdown-open">
                <button class="dropdown-toggle dropdown-input" ngbDropdownToggle (click)="$event.stopPropagation()">
                  <!-- <img src="assets/icons/caretDown.svg"
                    [ngClass]="{'assending': (selectedSort==='recentStatus') && isAsc,'decending':(selectedSort==='recentStatus') && !isAsc}"
                    class="ml-1 sortImg"> -->
                  <img class="custom-dropdown-toggle-icon" src="assets/icons/filter-content.svg">
                </button>
                <ul class="dropdown-menu content-menu type_sort_dropdown-content" ngbDropdownMenu>
                  <li (click)="statusFilter.close();filterTable('all','recentStatus')"><span
                      class="list-name">All</span><img [ngClass]="{'hide': filterSystem.statusFilter !== 'all'}"
                      src="assets/icons/check-blue.svg"></li>
                  <li *ngFor="let status of statusArr"
                    (click)="statusFilter.close();filterTable(status,'recentStatus')">
                    <span class="list-name">{{status.toLowerCase()
                      == 'success' ? 'Success' :
                      (status.toLowerCase() == 'failed' ? 'Failed' :
                      (status.toLowerCase() == 'queued' ? 'In-Queue' :
                      (status.toLowerCase() == 'configured' ? 'Validated' :
                      (status.toLowerCase() == 'halted' ? 'Stopped' :
                      (status.toLowerCase() == 'scheduled' ? 'Configured' : 'In-progress')))))}}</span>
                    <img [ngClass]="{'hide': filterSystem.statusFilter !== status}" src="assets/icons/check-blue.svg">
                  </li>
                </ul>
              </div>
            </div>
          </div>
            <!-- <div class="col_ col-2 d-flex align-items-center pr-0" (click)="sortByApi('contentSource')"><span
                class="selected-length-doc-web d-none">({{filterSystem.typefilter}})</span>
              <span class="d-flex align-items-center flex-column mr-1">
                <img [ngClass]="getSortIconVisibility('contentSource', 'down')" src="assets/icons/caretDown.svg"
                  class="ml-1 sortImg downArrow">
                <img [ngClass]="getSortIconVisibility('contentSource', 'up')" src="assets/icons/caretDown.svg"
                  class="ml-1 sortImg upArrow">
              </span>
              {{"contentSource_type_caps" | translate}}
              <div class="kr-sg-dropdowns type_sort_dropdown" #sourceFilter="ngbDropdown" ngbDropdown [container]="'body'"
                [autoClose]="true" [placement]="'bottom-right'">
                <div class="dropdown dropdown-open">
                  <button class="dropdown-toggle dropdown-input" ngbDropdownToggle
                    (click)="$event.stopImmediatePropagation()">
                    <img src="assets/icons/caretDown.svg"
                      [ngClass]="{'assending': (selectedSort==='type') && isAsc,'decending':(selectedSort==='type') && !isAsc}"
                      class="ml-1 sortImg">
                    <img class="custom-dropdown-toggle-icon" src="assets/icons/Vector.svg">
                  </button>
                  <ul class="dropdown-menu content-menu type_sort_dropdown-content" ngbDropdownMenu>
                    <li (click)="sourceFilter.close();filterTable('all','contentSource')"><span class="list-name">All</span><img
                        [ngClass]="{'hide': filterSystem.typefilter !== 'all'}" src="assets/icons/check-blue.svg"></li>
                    <li *ngFor="let docType of docTypeArr" (click)="sourceFilter.close();filterTable(docType,'contentSource')">
                      <span
                        class="list-name">{{docType == 'web' ? 'Web' :(docType == 'file'? 'File': '')}}</span><img
                        [ngClass]="{'hide': filterSystem.typefilter !== docType}" src="assets/icons/check-blue.svg"></li>
                  </ul>
                </div>
              </div>
            </div> -->
            <!-- <div class="col" (click)="sortBy('collection')">Collection <img src="assets/icons/caretDown.svg" class="ml-1"></div> -->
           
        
            
          </header>
          <perfect-scrollbar class="table-scroll-perfect">
            <ng-container *ngIf="sectionShow">
              <div class="content-body" *ngFor="let source of resources| filter: [ searchSources, 'name','title'];let i = index"
                (click)="openStatusSlider(source)"
                [ngClass]="{'cursor-pointer':statusObj[source.recentStatus]?.name == 'Success' }">

                <div class="col_ col-3">
                    <div class="media-block">
                      <div class="media-logo">
                        <img *ngIf="source.extractionType == 'web'" src="assets/icons/content/latest-content-icons/blue-internet.svg">
                        <img *ngIf="source.extractionType == 'file'" src="assets/icons/content/latest-content-icons/green-check-document.svg">
                      </div>
                      <div class="media-right">
                        <div class="media-name text-truncate"  title="{{source.title || source.name}}">{{source.title || source.name}}
                          <span class="ml-2" *ngIf="source.advanceSettings">
                            <img [title]="source.schedule_title" *ngIf="source.advanceSettings.scheduleOpt" class="search-icon"
                             src="assets/icons/schedule_timer.svg">
                         </span>
                        </div>
                        <!-- <div class="media-time-stamp" (click)="openScheduler($event,source,i)" *ngIf="source.advanceSettings?.scheduleOpt" ><span class="pr-1"><img src="assets/icons/content/latest-content-icons/blue-calendar.svg"></span>{{source.schedule_title}}</div>
                        <div class="media-up-time-stamp d-none"><span class="pr-1"><img src="assets/icons/content/latest-content-icons/gray-time.svg"></span>Upcoming schedule - Tommorow @ 10:30 AM</div> -->
                      </div>
                    </div>
                </div>
                <div class="col_ col-2" *ngIf="source?.advanceSettings">
                  <span *ngIf="!source.advanceSettings.scheduleOpt">{{source?.jobInfo?.userDetails?.fullName ||
                    source?.userDetails?.fullName}}</span>
                  <span *ngIf="source.advanceSettings.scheduleOpt">{{source?.jobInfo?.userDetails?.fullName}}</span>
                </div>

                <div class="col_ col-2" *ngIf="!source.advanceSettings">
                        <span>{{source?.userDetails?.fullName}}</span>
                </div>
              
                <div class="col_ col-2">
                  <span>{{source?.recentStatus==='configured'?'--':source?.numPages}}</span>
                </div>
                <div class="col_ col-4">
                         <!-- Status==='success' -->
                    <div class="media-block media-success" *ngIf="source.recentStatus === 'success'">
                      <div class="media-logo"><img src="assets/icons/content/latest-content-icons/green-check-circle.svg"></div>
                      <div class="media-right">
                        <div class="media-name">Successful</div>
                        <div class="media-up-time-stamp" *ngIf="source.schedule_createdOn">{{ source.schedule_createdOn }}<span class="pl-1"><img src="assets/icons/content/latest-content-icons/gray-time-change-logs.svg">{{source.schedule_duration}}</span></div>
                      </div>
                    </div>
                         
                    <!-- status==='configured' -->
                    <div class="media-block media-success" *ngIf="statusObj[source.recentStatus]?.name == 'Validated'">
                      <div class="media-right">
                        <div class="media-name">Validated</div>
                      </div>
                    </div>

                    <!-- status==='In progress' -->
                    <div class="media-block media-inprogress" *ngIf="statusObj[source.recentStatus]?.name == 'In Progress'">
                      <div class="media-logo"><img src="assets/icons/content/latest-content-icons/blue-loading.svg"></div>
                      <div class="media-right">
                        <div class="media-name">In-Progress</div>
                        <!-- <div class="media-up-time-stamp">{{ source.schedule_createdOn }}; <span>{{source.schedule_duration}}</span></div> -->
                      </div>
                    </div>

                    <!-- status==='falies' -->
                    <div class="media-block media-failed" *ngIf="source.recentStatus === 'failed'">
                      <div class="media-logo"><img src="assets/icons/content/latest-content-icons/red-warning-circle.svg"></div>
                      <div class="media-right">
                        <div class="media-name">Failed</div>
                        <div class="media-list" *ngIf="source?.isURLValid===false">
                          <div class="media-list-header">Following may be the reason to fail</div>
                          <ul class="media-list-ul">
                            <li *ngIf="source?.validations?.url?.validated===false">{{source?.validations?.url?.msg}}</li>
                            <li *ngIf="!source?.validations?.networkConnectivity?.validated&&source?.validations?.networkConnectivity?.msg">{{source?.validations?.networkConnectivity?.msg}}</li>
                          </ul>
                          <!-- <div class="media-show-more">Show more</div> -->
                        </div>
                      </div>
                    </div>

                    <!-- status==='queue' -->
                    <div class="media-block media-inQueue" *ngIf="statusObj[source.recentStatus]?.name == 'In-Queue'">
                      <div class="media-logo"><img src="assets/icons/content/latest-content-icons/blue-progress-indicator.svg"></div>
                      <div class="media-right">
                        <div class="media-name">In-Queue</div>
                        <!-- <div class="media-up-time-stamp">1 out of 3</div> -->
                      </div>
                    </div>
                </div>
                
                <!-- <div class="col_ col-2 pr-0">
                  {{(source.extractionType == 'web' ? 'Web' :(source.extractionType == 'file'? 'File': '')) | titlecase }}
                </div> -->
               
                <!-- <div class="col_ col-2">{{source.createdOn | dateFormatPipe: 'MM-DD-YYYY hh:mm A' }}</div> -->
                <div class="col_ col-1 text-right p-0">
                  <!-- <span class="actions-links re-crawl" *ngIf="source.extractionType == 'web' && statusObj[source.recentStatus]?.name != 'In Progress' &&  (['success'].includes(source.recentStatus)) || (source.recentStatus === 'failed'&&source?.validations?.url?.validated) || source.recentStatus === 'halted'"
                  (click)="recrwal('source',source,$event)"><img class="action_icon" src="assets/icons/content/latest-content-icons/blue-return.svg" ngbTooltip='Crawl' container="body">
                  </span> -->

                  <!-- <span class="actions-links re-validate" *ngIf="source.extractionType == 'web' && (!source.isURLValid)"
                  (click)="retryValidation(source,$event)">
                    <img class="action_icon" src="assets/icons/content/latest-content-icons/green-validate.svg" ngbTooltip='Validate' container="body">
                  </span> -->


                  <span class="actions-links"
                    *ngIf="source.extractionType == 'web' && ['Success','Stopped'].includes(statusObj[source.recentStatus]?.name) && (source.isURLValid)"
                    (click)="recrwal('source',source,$event)"><img class="action_icon" src="assets/icons/refresh-table.svg" ngbTooltip='Recrawl' container="body"></span>

                  <span class="actions-links"
                    *ngIf="source.extractionType == 'web' && source.recentStatus == 'configured'"
                    (click)="jobOndemand(source,$event)"><img class="action_icon" src="assets/icons/refresh-table.svg"
                      ngbTooltip='Crawl' container="body"></span>

                  <!-- <span class="actions-links"*ngIf="source.extractionType == 'web' && (source.recentStatus === 'failed'&&!(source?.validations?.url?.validated))"
                  (click)="retryValidation(source,$event)"><img class="action_icon" src="assets/icons/validate.svg"
                      ngbTooltip='Revalidate' container="body"></span> -->

                  <span class="actions-links"
                    *ngIf="statusObj[source.recentStatus]?.name == 'In Progress'&&source.recentStatus != 'queued'"
                    (click)="stopCrwaling(source,$event)"><img class="action_icon" src="assets/icons/content/stop.svg"
                      ngbTooltip='Stop' container="body"></span>
                      
                  <span class="actions-links" (click)="deletePages('source',source,$event)"><img class="action_icon"
                      src="assets/icons/delete-table.svg" ngbTooltip='Delete' container="body"></span>
                </div>
              </div>
            </ng-container>
            <div style="margin-right: 10px;"> <app-record-pagination *ngIf="totalRecord > 10" [totalRecord]='totalRecord' [limitpage]='10' (pageChanged)="paginateContent($event)"></app-record-pagination></div>
            <div class="empty">{{"contentSource_no_results_found" | translate}}</div>
          </perfect-scrollbar>
        </section>

        <ng-container *ngIf="currentView === 'grid'">
          <perfect-scrollbar class="table-scroll-perfect list">
            <!-- <div class="list-view-data">
              <div class="row row_list">
                <div class="box-content" *ngFor="let source of resources | filter: [ searchSources , 'name']"
                  (click)="openStatusSlider(source)">
                  <div class="box">
                    <div class="title">{{source.title || source.name}}</div>
                    <div class="type" [ngClass]="{'doc': (source.type==='document')}">
                      {{contentTypes[source.type] | titlecase}}</div>
                    <div class="status-data">
                      <div class="count-pages" *ngIf="statusObj[source.recentStatus]?.name == 'Success'"><span
                          class="pagelength">{{source.numPages}}</span> Pages</div>
                      <div class="status-info"
                        *ngIf="source.recentStatus && statusObj[source.recentStatus] && (source.recentStatus !== 'success') "
                        [ngStyle]="{color: (source.recentStatus && statusObj[source.recentStatus])?statusObj[source.recentStatus].color:'#202124'}">
                        <img src="assets/icons/failed-status.svg" *ngIf="statusObj[source.recentStatus]?.name == 'Failed'"
                          placement="top"
                          ngbTooltip="{{(resourcesStatusObj && resourcesStatusObj[source.jobId] && resourcesStatusObj[source.jobId].statusMessage)?resourcesStatusObj[source.jobId].statusMessage:''}}"
                          container="body">
                        <img class="inprogressLoader" src="assets/icons/ringLoading.svg"
                          *ngIf="statusObj[source.recentStatus]?.name == 'In Progress'" placement="top" container='body'
                          ngbTooltip="{{(resourcesStatusObj && resourcesStatusObj[source.jobId] && resourcesStatusObj[source.jobId].statusMessage)?resourcesStatusObj[source.jobId].statusMessage:statusObj[source.recentStatus]?.name}}">
                        <div class="status-name" *ngIf="statusObj[source.recentStatus]?.name !== 'Success'">
                          {{statusObj[source.recentStatus]?.name}}</div>
                      </div>
                      <div *ngIf="!(source.recentStatus && statusObj[source.recentStatus])">---</div>
                      <div class="created-date" *ngIf="statusObj[source.recentStatus]?.name == 'Success'">
                        {{source.createdOn | dateFormatPipe: 'MM-DD-YYYY hh:mm A'}}</div>
                    </div>
                    <div class="actions-delete">
                      <span class="actions-links d-none"><img class="action_icon" ngbTooltip='Refresh'
                          src="assets/icons/sidemenu/table-refresh.svg"></span>
                      <span class="actions-links" (click)="deletePages('source',source,$event)" ngbTooltip='Delete'><img
                          class="action_icon" src="assets/icons/sidemenu/delete-table.svg"></span>
                    </div>
                  </div>
                </div>
              </div>
            </div> -->
            <!-- New Design -->
            <div class="row col-12 p-0 grid-data-sec">
              <div class="col-4 grid-card" *ngFor="let source of resources | filter: [ searchSources , 'name']"
                (click)="openStatusSlider(source)">
                <div class="card_sec">
                  <div class="titles-sec">
                    <span class="name text-truncate" placement="top-center" container='body'
                      ngbTooltip='{{source.title || source.name}}'>{{source.title || source.name}}</span><span
                      class="type-data" [ngClass]="{'doc': (source.extractionType==='file')}">
                      {{(source.extractionType == 'web' ? 'Web' :(source.extractionType == 'file'? 'Doc': '')) | uppercase
                      }}</span>
                  </div>
                  <div class="row col-12 p-0 m-0 align-items-center justify-content-between">
                    <div class="timestamp"
                      *ngIf="statusObj[source.recentStatus]?.name == ('In Progress' || 'Queued'); else executed">Started -
                      {{source.schedule_createdOn}}</div>
                    <ng-template #executed>
                      <div class="timestamp"> {{"contentSource_last_updated_on" | translate}} {{source.lMod |
                        dateFormatPipe: 'D MMMM YYYY'}}</div>
                    </ng-template>
                    <div class="status text-right" *ngIf="statusObj[source.recentStatus]?.name == 'In Progress'">
                      <!-- 21/02 changes made in line 359 as per api contract updating resourcesStatusObj[source.jobId].statusMessage to
                    resourcesStatusObj[source.jobId].message -->
                      <span class="img-block"><img src="assets/icons/ringLoading.svg" class="ml-2 inProgress"
                          *ngIf="statusObj[source.recentStatus]?.name == 'In Progress'" placement="top" container='body'
                          ngbTooltip="{{(resourcesStatusObj && resourcesStatusObj[source.jobId] && resourcesStatusObj[source.jobId].message)?resourcesStatusObj[source.jobId].message:statusObj[source.recentStatus]?.name}}"></span>
                      <span *ngIf="statusObj[source.recentStatus]?.name == 'In Progress'"
                        class="run-percentageDoneGrid">{{ (resourcesStatusObj && resourcesStatusObj[source.jobId] &&
                        resourcesStatusObj[source.jobId].executionStats) ?
                        resourcesStatusObj[source.jobId].executionStats.percentageDone : ''}} </span>
                      <span class="status-title"> {{"contentSource_in_progress" | translate}}</span>
                    </div>
                    <div class="pages-count text-right">
                      <!-- *ngIf="statusObj[source.recentStatus]?.name == 'Success' || statusObj[source.recentStatus].name == 'Stopped'" -->
                      <span *ngIf="source.numPages">
                        <span class="count">{{source.numPages}}</span>{{"contentSource_pages" | translate}}
                      </span>
                      <span *ngIf="!source.numPages">
                        <span class="count"> -- </span>
                      </span>
                    </div>
                    <div class="status text-right" *ngIf="statusObj[source.recentStatus]?.name == 'Failed'">
                      <span class="img-block"><img src="assets/icons/content/failed-status.svg"></span>
                      <span class="status-title failed">{{"contentSource_failed" | translate}}</span>
                    </div>
                  </div>
                  <div class="delete-refresh">
                    <img src="assets/icons/refresh-table.svg"
                      *ngIf="source.extractionType == 'web' && statusObj[source.recentStatus]?.name != 'In Progress' &&  (['success'].includes(source.recentStatus)) || (source.recentStatus === 'failed'&&source?.validations?.url?.validated) || source.recentStatus === 'halted' "
                      (click)="recrwal('source',source,$event)" ngbTooltip='Recrawl' container="body">
                    <img src="assets/icons/refresh-table.svg"
                      *ngIf="source.extractionType == 'web' && source.recentStatus == 'configured'"
                      (click)="jobOndemand(source,$event)" ngbTooltip='Crawl' container="body">
                    <img src="assets/icons/validate.svg"
                      *ngIf="source.extractionType == 'web' && (source.recentStatus === 'failed'&&!(source?.validations?.url?.validated))"
                      (click)="retryValidation(source,$event)" ngbTooltip='Revalidate' container="body">
                    <img src="assets/icons/content/stop.svg"
                      *ngIf="statusObj[source.recentStatus]?.name == 'In Progress'&&source.recentStatus != 'queued'"
                      (click)="stopCrwaling(source,$event)" ngbTooltip='Stop' container="body">
                    <img src="assets/icons/content/delete.svg" (click)="deletePages('source',source,$event)"
                      ngbTooltip='Delete'>
                  </div>
                </div>
              </div>


            </div>
            <!-- New Design -->
            <div style="margin-right: 10px;"> <app-record-pagination *ngIf="totalRecord > 10" [totalRecord]='totalRecord' [limitpage]='10' (pageChanged)="paginateContent($event)"></app-record-pagination></div>
          </perfect-scrollbar>

        </ng-container>

      </ng-container>
    </div>
  </div>

</div>

<!-- Edit crawl configuration page -->
<kr-modal modalType="center" modalClass="sliderComponent modal_popups_" #statusModalPop id="sourceSlider">
  <div class="modal-header">
    <div class="title" title="{{selectedSource.name}}">{{selectedSource.name}}</div>
    <div class="close_icon"><img (click)="sliderStep?sliderBack():closeStatusModal();"
        src="assets/icons/modal-close.svg"></div>
  </div>
  <div class="modal-body source-modal-popup if-search-added">

    <div class="sliderBody call-history-filter">
      <div class="mainLoadingSpinner" *ngIf="loadingSliderContent" [@fadeInOutAnimation]>
        <mat-spinner diameter="18" strokeWidth="2"></mat-spinner>
        <span class="please-wait-message" style="margin-left:5%">{{'Please Wait!' | translate}}</span>
      </div>

      <div class="content-accordion-sec" *ngIf="sliderStep === 0">
        <ng-container *ngIf="!(selectedSource && selectedSource.pages && selectedSource.pages.length)">
          <!-- <div class="noPages" *ngIf="!loadingContent && isConfig">{{"contentSource_no_pages_available" | translate}}</div> -->
        </ng-container>
        <ng-container *ngIf="selectedSource ">
          <!--&& selectedSource.pages && selectedSource.pages.length -->

          <div class="search-header">
            <div class="tabs-sec">
              <span class="tabname" [ngClass]="{'active' : isConfig}"
                (click)="swapSlider('config')">{{"contentSource_configuration" | translate}}</span>
                <span class="tabname" [ngClass]="{'active' : page}" (click)="swapSlider('page')">{{"contentSource_pages"
                  | translate}}</span>
              <span class="tabname"
                *ngIf="executionHistoryData && selectedSource.recentStatus != 'scheduled' && selectedSource.recentStatus != 'configured'"
                [ngClass]="{'active' : execution}" (click)="swapSlider('execution')">{{"contentSource_executions" |
                translate}}</span>
            </div>
            <div class="right-side">       
            </div>
          </div>

          <!-- Configuration-->
          <div *ngIf="isConfig && !loadingSliderContent">
            <perfect-scrollbar [disabled]="workflowService.disablePerfectScroll" class="scroll-table-allowRow">
              <!-- new Configuration html start -->
              <div class="config-first-row">
                <div class="width-40">
                  <div class="kr-sg-input-text mar-bot-15">
                    <div class="label-text">TITLE<sup class="field-mandatory">*</sup></div>
                    <input type="url" autocomplete="off" maxlength="60" id="addSourceTitleInput" name="title" placeholder="Enter Title" class="input-text" [(ngModel)]="editSource.name" required>
                  </div>
                </div>
                <div class="width-30">
                  <div class="kr-sg-input-text mar-bot-15">
                    <div class="label-text">CREATED BY</div>
                    <input type="url" autocomplete="off" maxlength="60" id="createdBy" name="createdBy" placeholder="Enter Title" class="input-text" [value]="selectedSource?.userDetails?.firstName" disabled>
                  </div>
                </div>
                <div class="update-timestamp width-20 mar-bot-15">
                  <button class="btn btn-secondary" type="button"><span class="last-update"><img src="assets/icons/refresh-secondary.svg" alt="refresh-icon" /> Last Updated</span>{{selectedSource?.lMod | dateFormatPipe:'D.MM.YYYY'}}</button>
                </div>
                <div class="reload-recrwal width-10 mar-bot-15" *ngIf="!page && !execution">
                  <button class="btn btn-out-primary" type="button" *ngIf="selectedSource.recentStatus === 'configured'" (click)="jobOndemand(selectedSource,$event)">Crawl</button>
                  <button class="btn btn-out-primary" type="button" *ngIf="(['Success','Stopped'].includes(statusObj[selectedSource?.recentStatus]?.name) && (selectedSource?.isURLValid))" (click)="recrwal('source',selectedSource ,null)"><span class="reload-crwal"><img src="assets/icons/refresh-primary.svg" alt="refresh-icon" /></span> Recrawl</button>
                </div>
              </div>

              <div class="config-crwal-url-block">
                <div class="config-crwal-url"><a class="crwal-url" [href]="selectedSource?.url" target="_blank">{{selectedSource?.url}}</a></div>
                <!-- <div class="config-crwal-url-edit"><img class="crwal-url-edit" src="assets/icons/edit-blue.svg" /></div> -->
              </div>

              <div class="config-crwal-desc-block">
                <div class="kr-sg-input-text-area mar-bot-15">
                  <div class="label-text">DESCRIPTION</div>
                  <textarea autocomplete="off" name="sourceDesc" maxlength="250" placeholder="Enter Description" class="input-text" [(ngModel)]="editSource.desc"></textarea>
                </div>
              </div>

              <div class="config-sitemap-url-block">
                <div class="sitemap-header">
                  <div class="sitemap-hding">Sitemap URLs</div>
                </div>
                <div class="font-weight-bold text-center" *ngIf="selectedSource?.sitemaps?.length===0">No sitemaps found</div>
                <div class="sitemap-url-list" *ngFor="let sitemap of selectedSource?.sitemaps">
                  <div class="sitemap-url">
                    <div class="config-sitemap-url"><a class="crwal-url" [href]="sitemap" target="_blank">{{sitemap}}</a></div>
                    <div class="edit-delete-block">
                      <!-- <div class="config-sitemap-url-edit"><img class="crwal-url-edit" src="assets/icons/sidemenu/edit.svg" /></div>
                      <div class="config-sitemap-url-delete"><img class="crwal-url-edit" src="assets/icons/sidemenu/delete.svg" /></div> -->
                    </div>
                  </div>
                </div>
              </div>

              <div class="new-crawl-web-form mr-tb20-rl10">
                <div class="new-crawl-shedule">
                  <div class="new-crawl-shedule-tab" [ngStyle]="{'background':editSource.advanceOpts.scheduleOpt?'':'#F8F9FA','border':editSource.advanceOpts.scheduleOpt?'':0}">
                    <div class="shedual-header">
                      <div class="shedual-hding">SCHEDULE</div>
                      <div class="sr-toggle-btn">
                        <label class="kr-sg-toggle">
                          <input type="checkbox" name="scheduleOpts" [(ngModel)]="editSource.advanceOpts.scheduleOpt">
                          <div class="slider"></div>
                        </label>
                      </div>
                    </div>
                    <app-scheduler *ngIf="editSource?.advanceOpts?.scheduleOpt" [crwalObject]="editSource" [scheduleFlag]="editSource?.advanceOpts?.scheduleOpt"
                    [schedule]="'get'" (scheduleData)="scheduleData($event)" (cronExpress)="cronExpress($event)">
                  </app-scheduler>
                  </div>
                </div>
              </div>

              <div class="new-crawl-web-form">
                <div class="new-crawling">
                  <div class="new-crawling-tab">
                    <div class="new-crawling-tab-block">
                      <div class="new-ccrawling-hding">CRAWLING</div>
                    </div>
                    <div class="new-crawling-tab-btn">
                      <button type="button" class="btn" aria-expanded="true" data-toggle="collapse" data-target="#newCrawlingTab"><i class="si-carrotup"></i></button>
                    </div>
                  </div>
                  <div id="newCrawlingTab" class="new-crawling-collapse">
                    <div class="crawl-option-ddl">
                      <div class="kr-sg-dropdowns mar-bot-12">
                        <div class="label-text">Crawl Options</div>
                        <div class="dropdown dropdown-open">
                          <button class="dropdown-toggle dropdown-input" data-toggle="dropdown" aria-expanded="false">{{'contentSource.'+crwalOptionLabel | translate}}</button>
                          <ul class="dropdown-menu content-menu">
                            <li *ngFor="let option of crawlOptions" (click)="crawlOption(option)" [ngClass]="{'font-weight-bold':(option===crwalOptionLabel)}"><a>{{'contentSource.'+option | translate}}</a></li>
                          </ul>
                        </div>
                      </div>
                    </div>
      
                    <!-- Allow URL -->
              <div class="crawl-opt-table" *ngIf="(!editSource?.advanceOpts?.crawlEverything&&editSource.advanceOpts.allowedOpt)">
                <div class="crawl-opt-row" *ngFor="let allow of allowURLArray;let i=index;">
                  <div class="crawl-opt-ddl">
                    <div class="kr-sg-dropdowns mar-bot-12">
                      <div class="label-text">Allow if URL</div>
                      <div class="dropdown dropdown-open">
                        <button class="dropdown-toggle dropdown-input" data-toggle="dropdown" aria-expanded="false">{{'contentSource.'+allow?.condition|translate}}</button>
                        <ul class="dropdown-menu content-menu">
                              <li *ngFor="let url of allowURLValues" (click)="allow.condition=url" [ngClass]="{'font-weight-bold':allow.condition===url}"><a>{{'contentSource.'+url|translate}}</a></li>
                        </ul>
                      </div>
                    </div>
                  </div>
                  <div class="crawl-opt-inp">
                    <div class="kr-sg-input-text mar-bot-15">
                      <div class="label-text no-label">Source URL</div>
                      <input type="text" autocomplete="off" name="url" id="{{'contentAllowId'+i}}" placeholder="http(s)://" class="input-text" [(ngModel)]="allow.url">
                    </div>
                  </div>
                  <div class="crawl-opt-cls" *ngIf="allowURLArray.length>1">
                    <button class="btn" (click)="allowURLArray.splice(i,1)"><i class="si-close"></i></button>
                  </div>
                </div>
                <div class="crawl-add-row">
                  <button class="btn add-btn-primary" (click)="addAllowBlockObj('allow')"><span class="add-btn-img"><img _ngcontent-gxv-c13="" src="assets/icons/add_blue.svg"></span> Add</button>
                </div>
              </div>

              <!-- Block URL  -->
              <div class="crawl-opt-table" *ngIf="(!editSource?.advanceOpts?.crawlEverything&&editSource.advanceOpts.blockedOpt)">
                <div class="crawl-opt-row" *ngFor="let block of blockURLArray;let i=index;">
                  <div class="crawl-opt-ddl">
                    <div class="kr-sg-dropdowns mar-bot-12">
                      <div class="label-text">Block If URL</div>
                      <div class="dropdown dropdown-open">
                        <button class="dropdown-toggle dropdown-input" data-toggle="dropdown" aria-expanded="false">{{'contentSource.'+block.condition|translate}}</button>
                        <ul class="dropdown-menu content-menu">
                              <li *ngFor="let url of allowURLValues" (click)="block.condition=url" [ngClass]="{'font-weight-bold':block.condition===url}"><a>{{'contentSource.'+url|translate}}</a></li>
                        </ul>
                      </div>
                    </div>
                  </div>
                  <div class="crawl-opt-inp">
                    <div class="kr-sg-input-text mar-bot-15">
                      <div class="label-text no-label">Source URL</div>
                      <input type="text" id="{{'contentBlockId'+i}}" autocomplete="off" name="url" placeholder="http(s)://" class="input-text" [(ngModel)]="block.url">
                    </div>
                  </div>
                  <div class="crawl-opt-cls" *ngIf="blockURLArray.length>1">
                    <button class="btn" (click)="blockURLArray.splice(i,1)"><i class="si-close"></i></button>
                  </div>
                </div>
                <div class="crawl-add-row">
                  <button class="btn add-btn-primary" (click)="addAllowBlockObj('block')"><span class="add-btn-img"><img _ngcontent-gxv-c13="" src="assets/icons/add_blue.svg"></span> Add</button>
                </div>
              </div>

              <div class="crwal-checkbox-list">
              <div class="group-checkbox">
                <div class="kr-sg-checkbox">
                  <input class="checkbox-custom" id="checkbox_cook" name="useCookies" type="checkbox" [(ngModel)]="useCookies" [ngModelOptions]="{standalone: true}">
                  <label class="checkbox-custom-label" for="checkbox_cook">Use Cookies</label>
                </div>
                <div class="kr-sg-checkbox">
                  <input class="checkbox-custom" id="checkbox_grph" name="isJavaScriptRendered" type="checkbox" [(ngModel)]="isJavaScriptRendered" [ngModelOptions]="{standalone: true}">
                  <label class="checkbox-custom-label" for="checkbox_grph">Java Script Rendered</label>
                </div>
                <div class="kr-sg-checkbox">
                  <input class="checkbox-custom" id="checkbox_grpi" name="crawlBeyondSitemaps" type="checkbox" [(ngModel)]="crawlBeyondSitemaps" [ngModelOptions]="{standalone: true}">
                  <label class="checkbox-custom-label" for="checkbox_grpi">Crawl Beyond Sitemap</label>
                </div>
                <div class="kr-sg-checkbox">
                  <input class="checkbox-custom" id="checkbox_robot" name="respectRobotTxtDirectives" type="checkbox" [(ngModel)]="respectRobotTxtDirectives" [ngModelOptions]="{standalone: true}">
                  <label class="checkbox-custom-label" for="checkbox_robot">Respect robots.txt directives</label>
                </div>
              </div>
              </div>

              <div class="crwal-depth-form">
                <div class="crwal-depth-form-row">
                  <div class="crwal-depth-form-inp">
                    <div class="kr-sg-input-text">
                      <div class="label-text">Crawl Depth
                        <div class="tooltip-custom">
                          <img src="assets/icons/sidemenu/help.svg">
                          <span class="tooltiptext">
                            <div class="t-text">The maximum depth that will be allowed to crawl any site.</div>
                            <div class="v-text">Value = 0 (No limit)</div>
                          </span>
                        </div>
                      </div>
                    <input class="input-text maxUrlLimit-class" autocomplete="off" id="crawlDepth" name="crawlDepth" placeholder="5" type="number" [(ngModel)]="crawlDepth">
                  </div>
                  </div>
                  <div class="crwal-max-form-inp">
                    <div class="kr-sg-input-text">
                      <div class="label-text">Max URL
                        <div class="tooltip-custom">
                          <img src="assets/icons/sidemenu/help.svg">
                          <span class="tooltiptext">
                            <div class="t-text">The maximum depth that will be allowed to crawl any site.</div>
                            <div class="v-text">Value = 0 (No limit)</div>
                          </span>
                        </div>
                      </div>
                    <input class="input-text maxUrlLimit-class" autocomplete="off" id="maxURL" name="maxURL" placeholder="10" type="number" [(ngModel)]="maxUrlLimit">
                  </div>
                  </div>
                </div>
              </div>                 
                  </div>
                </div>
            
                <div class="new-crawl-shedule authenticated-website">
                  <div class="new-crawl-shedule-tab" [ngStyle]="{'border':editSource.authorizationEnabled?'':0}">
                    <div class="shedual-header form-group">
                      <div class="d-block">
                        <div class="shedual-hding">Is this an Authenticated website?</div>
                      </div>
                      
                      <div class="sr-toggle-btn">
                        <label class="kr-sg-toggle">
                          <input type="checkbox" name="authenticatedOpts" [(ngModel)]="editSource.authorizationEnabled">
                          <div class="slider"></div>
                        </label>
                      </div>
                    </div>
      
                    <div class="crawl-opt-ddl mt-1">
                      <div class="kr-sg-dropdowns mar-bot-12">
                        <div class="dropdown dropdown-open">
                          <button id="contentIsAuthId" class="dropdown-toggle dropdown-input" data-toggle="dropdown" aria-expanded="false" [disabled]="!editSource.authorizationEnabled" [ngStyle]="{'background':editSource.authorizationEnabled?'':'#EFF0F1','border':editSource.authorizationEnabled?'':0,'color':editSource.authorizationEnabled?'':'#BDC1C6'}">{{editSource.authorizationProfle.sso_type===''?'Select Authentication Type':('contentSource.'+editSource.authorizationProfle.sso_type | translate)}}</button>
                          <ul class="dropdown-menu content-menu">
                            <li *ngFor="let type of authenticationTypes" [ngClass]="{'font-weight-bold':type===editSource.authorizationProfle.sso_type}" (click)="selectAuthenticationType(type)"><a>{{'contentSource.'+type | translate}}</a></li>
                          </ul>
                        </div>
                      </div>
                    </div>
      
                  </div>
                </div>
      <div class="is-auth-form-block" *ngIf="editSource.authorizationEnabled&&['basic','form'].includes(editSource.authorizationProfle.sso_type)">
            <!-- Basic Fields -->
            <div class="is-auth-form" *ngIf="editSource.authorizationProfle.sso_type==='basic'">
              <div class="is-auth-form-header-block">
                <div class="is-auth-form-header">
                  BASIC FIELD
                </div>
                <!-- <div class="is-auth-form-add-field">
                  <span><img src="assets/icons/facets/add-blue.svg" class="add-icon-blue" /> <img src="assets/images/add.svg" class="add-icon-black" /></span>Add Field
                </div> -->
              </div>
              <div class="is-auth-form-table">
                <div class="kr-sg-data-table">
                  <section class="table-content">
                      <header class="table-header">
                          <div class="col-4">FIELD KEY</div> 
                          <div class="col-4">FIELD VALUE</div>
                          <!-- <div class="col-2"></div> -->
                          <div class="col-4">ACTIONS</div>
                      </header>
                      <div class="content-body" *ngFor="let form of editSource.authorizationProfle.basicFields;let i=index;" [ngClass]="{'is-edit-mode':(form?.isEditable)}">
                        <ng-container *ngIf="!form?.isEditable">
                          <div class="col-4">{{form?.key}}</div>
                          <div class="col-4">{{(form?.type==='password')?'********':form?.value}}</div>
                          <!-- <div class="col-4">
                            <div class="d-flex">
                              <label class="kr-sg-toggle with-label">                                       
                                <input type="checkbox" [checked]="form.isEnabled">
                                <div class="slider"> <span class="no">Disable</span><span class="yes">Enable</span></div>
                            </label>
                            </div>
                          </div> -->
                          <div class="col-4">
                              <span class="actions-links" (click)="form.isEditable=true"><img class="action_icon arrow-icon" src="assets/images/edit-pencil.svg"></span>
                              <!-- <span class="actions-links"><img class="action_icon" src="assets/icons/delete-table.svg"></span> -->
                          </div>
                        </ng-container>

                        <!-- Editable html -->
                          <div class="is-auth-form-edit" *ngIf="form?.isEditable">
                            <div class="is-auth-col">
                              <div class="col-3">
                                <div class="crawl-opt-inp">
                                  <div class="kr-sg-input-text mar-bot-15">
                                    <div class="label-text no-label">Field Key<sup class="field-mandatory">*</sup></div>
                                    <input type="text" autocomplete="off" name="url" placeholder="Field Key" class="input-text" [value]="form.key" disabled>
                                  </div>
                                </div>
                              </div>
                              <div class="col-3">
                                <div class="crawl-opt-inp">
                                  <div class="kr-sg-input-text mar-bot-15">
                                    <div class="label-text no-label">Field Value<sup class="field-mandatory">*</sup></div>
                                    <input [type]="form.type" autocomplete="off" name="url" placeholder="Field Key" class="input-text" #inputPwd [(ngModel)]="form.duplicateObj.value">
                                    <i class="icon-eye" [ngClass]="{'si-eye':!isPasswordShow,'si-eyeshow':isPasswordShow}" (click)="isPasswordShow=!isPasswordShow;inputPwd.type=(inputPwd.type==='password')?'text':'password'" *ngIf="i===1"></i>
                                  </div>
                                </div>
                              </div>
                              <div class="col-3 d-flex align-items-center">
                                <div class="is-auth-btn-group">
                                <button class="kr-sg-button-secondary btn-no-bg btn_lg" (click)="saveBasicField(form,'cancel')">Cancel</button>
                                <button class="kr-sg-button-secondary btn_lg" (click)="saveBasicField(form,'save')">Save</button>
                              </div>
                              </div>
                            </div>                
                          </div>
                      </div>
                  </section>                               
              </div>               
              </div>
            </div>

            <!-- Form based -->
            <div class="is-auth-form" *ngIf="editSource.authorizationProfle.sso_type==='form'">
              <div class="is-auth-form-header-block">
                <div class="is-auth-form-header">
                  FORM FIELD                  
                </div>
                <div class="is-auth-form-add-field" (click)="addFormField('add')" *ngIf="!formFieldObj.isShow">
                  <span><img src="assets/icons/facets/add-blue.svg" class="add-icon-blue" /> <img src="assets/images/add.svg" class="add-icon-black" /></span>Add Field
                </div>
              </div>
              <div class="is-auth-form-table">
                <div class="kr-sg-data-table">
                  <section class="table-content" *ngIf="editSource.authorizationProfle.formFields.length>0">
                      <header class="table-header">
                          <div class="col-3">FIELD KEY</div> 
                          <div class="col-2">FIELD TYPE</div>
                          <div class="col-3">FIELD VALUE</div>
                          <div class="col-2"></div>
                          <div class="col-2 text-right">ACTIONS</div>
                      </header>
                      <div class="content-body" *ngFor="let form of editSource.authorizationProfle.formFields;let i=index;" [ngClass]="{'is-edit-mode':(form?.isEditable)}">
                          <ng-container *ngIf="!form?.isEditable">
                          <div class="col-3">{{form.key}}</div>
                          <div class="col-2">{{'contentSource.'+form.type|translate}}</div>
                          <div class="col-3">{{(form.type==='password')?'********':form.value}}</div>
                          <div class="col-2">
                            <div class="d-flex">
                              <label class="kr-sg-toggle with-label">                                       
                                <input type="checkbox" [(ngModel)]="form.isEnabled">
                                <div class="slider"> <span class="no">Disable</span><span class="yes">Enable</span></div>
                            </label>
                            </div>
                          </div>
                          <div class="col-2 text-right">
                              <span class="actions-links" (click)="form.isEditable=true;editFormField('edit',form)"><img class="action_icon arrow-icon" src="assets/images/edit-pencil.svg"></span>
                              <span class="actions-links" (click)="deleteFormFields(i)"><img class="action_icon" src="assets/icons/delete-table.svg"></span>
                          </div>
                          </ng-container>

                          <!-- Edit Fields: -->
                          <div class="is-auth-form-edit" *ngIf="form.isEditable">
                            <div class="is-auth-col">
                              <div class="col-3">
                                <div class="crawl-opt-inp">
                                  <div class="kr-sg-input-text mar-bot-15">
                                    <div class="label-text no-label">Field Key<sup class="field-mandatory">*</sup></div>
                                    <input id="{{'contentFormFieldKeyId'+i}}" type="text" autocomplete="off" name="url" placeholder="Field Key" class="input-text" [value]="form.key" [(ngModel)]="form.duplicateObj.key">
                                  </div>
                                </div>
                              </div>
                              <div class="col-3">
                                <div class="crawl-option-ddl">
                                  <div class="kr-sg-dropdowns mar-bot-12">
                                    <div class="label-text">Field Type<sup class="field-mandatory">*</sup></div>
                                    <div class="dropdown dropdown-open">
                                      <button id="{{'contentFormFieldTypeId'+i}}" class="dropdown-toggle dropdown-input" data-toggle="dropdown" aria-expanded="false">{{form.duplicateObj.type===''?'Select Field Type':('contentSource.'+form.duplicateObj.type|translate)}}</button>
                                      <ul class="dropdown-menu content-menu">
                                        <li *ngFor="let box of inputTypes" (click)="form.duplicateObj.type=box" [ngClass]="{'font-weight-bold':(form.duplicateObj.type===box)}"><a>{{'contentSource.'+box|translate}}</a></li>
                                      </ul>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="col-3">
                                <div class="crawl-opt-inp">
                                  <div class="kr-sg-input-text mar-bot-15">
                                    <div class="label-text no-label">Field Value<sup class="field-mandatory">*</sup></div>
                                    <input id="{{'contentFormFieldValueId'+i}}" [type]="form.type" autocomplete="off" name="url" placeholder="Field Value" class="input-text" [value]="form.value" [(ngModel)]="form.duplicateObj.value">
                                    <i class="icon-eye" [ngClass]="{'si-eye':!form.isPwdShow,'si-eyeshow':form.isPwdShow}" (click)="showFormFieldPassword('contentFormFieldValueId'+i,form)" *ngIf="form.duplicateObj.type==='password'"></i>
                                  </div>
                                </div>
                              </div>
                              <div class="col-3 d-flex align-items-center">
                                <div class="is-auth-btn-group">
                                  <button id="sa-cancelAddAuthFieldToTable" class="kr-sg-button-secondary btn-no-bg btn_lg" (click)="editFormField('cancel',form)">Cancel</button>
                                  <button id="sa-addAuthFieldToTable" class="kr-sg-button-secondary btn_lg" (click)="editFormField('save',form,i)">Save</button>
                                </div>
                              </div>
                            </div>
                          </div> 
                      </div>
                  </section>
                  
                  <!-- Add Form Fields -->
                  <div class="is-auth-form-edit" *ngIf="formFieldObj.isShow">
                    <div class="is-auth-col">
                      <div class="col-3">
                        <div class="crawl-opt-inp">
                          <div class="kr-sg-input-text mar-bot-15">
                            <div class="label-text no-label">Field Key<sup class="field-mandatory">*</sup></div>
                            <input id="contentFormFieldKeyId" type="text" autocomplete="off" name="url" placeholder="Field Key" class="input-text" [(ngModel)]="formFieldObj.key">
                          </div>
                        </div>
                      </div>
                      <div class="col-3">
                        <div class="crawl-option-ddl">
                          <div class="kr-sg-dropdowns mar-bot-12">
                            <div class="label-text">Field Type<sup class="field-mandatory">*</sup></div>
                            <div class="dropdown dropdown-open">
                              <button id="contentFormFieldTypeId" class="dropdown-toggle dropdown-input" data-toggle="dropdown" aria-expanded="false">{{(formFieldObj.type==='')?'Select Field Type':('contentSource.'+formFieldObj.type|translate)}}</button>
                              <ul class="dropdown-menu content-menu">
                                <li *ngFor="let box of inputTypes" (click)="formFieldObj.type=box" [ngClass]="{'font-weight-bold':(formFieldObj.type===box)}"><a>{{'contentSource.'+box|translate}}</a></li>
                              </ul>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-3">
                        <div class="crawl-opt-inp">
                          <div class="kr-sg-input-text mar-bot-15">
                            <div class="label-text no-label">Field Value<sup class="field-mandatory">*</sup></div>
                            <input id="contentFormFieldValueId" [type]="formFieldObj.type" autocomplete="off" name="url" placeholder="Field Value" class="input-text" [(ngModel)]="formFieldObj.value">
                            <i class="icon-eye" [ngClass]="{'si-eye':!formFieldObj.isPwdShow,'si-eyeshow':formFieldObj.isPwdShow}" (click)="showFormFieldPassword('contentFormFieldValueId',formFieldObj)" *ngIf="formFieldObj.type==='password'"></i>
                          </div>
                        </div>
                      </div>
                      <div class="col-3 d-flex align-items-center">
                        <div class="is-auth-btn-group">
                          <button id="sa-cancelAddAuthFieldToTable" class="kr-sg-button-secondary btn-no-bg btn_lg" (click)="addFormField('cancel')" [disabled]="editSource.authorizationProfle.formFields.length===0">Cancel</button>
                          <button id="sa-addAuthFieldToTable" class="kr-sg-button-secondary btn_lg" (click)="addFormField('save')">Add</button>
                        </div>
                      </div>
                    </div>
                  </div>  
              </div> 
              </div>
            </div>

            <!-- Authorization optional for both fields types -->
            <div class="is-auth-form" *ngIf="['basic','form'].includes(editSource.authorizationProfle.sso_type)">
              <div class="is-auth-form-header-block">
                <div class="is-auth-form-header">
                  AUTHORIZATION FIELD <span class="optional-hding">(Optional)</span>                  
                </div>
                <div class="is-auth-form-add-field" (click)="addAuthorizationField('add')" *ngIf="!authorizationFieldObj.isShow">
                  <span><img src="assets/icons/facets/add-blue.svg" class="add-icon-blue" /> <img src="assets/images/add.svg" class="add-icon-black" /></span>
                  Add
                </div>
              </div> 
              
              <div class="is-auth-form-table">
                <div class="kr-sg-data-table">
                  <section class="table-content" *ngIf="editSource.authorizationProfle.authorizationFields.length>0">
                      <header class="table-header">
                          <div class="col-3">FIELD KEY</div> 
                          <div class="col-2">FILED TYPE</div>
                          <div class="col-3">FIELD VALUE</div>
                          <div class="col-2"></div>
                          <div class="col-2 text-right">ACTIONS</div>
                      </header>
                      <div class="content-body" *ngFor="let auth of editSource.authorizationProfle.authorizationFields;let i=index;" [ngClass]="{'is-edit-mode':(form?.isEditable)}">
                         <ng-container *ngIf="!auth?.isEditable">
                         <div class="col-3">{{auth?.key}}</div>
                          <div class="col-2">{{'contentSource.'+auth?.type|translate}}</div>
                          <div class="col-3">{{auth?.value}}</div>
                          <div class="col-2">
                            <div class="d-flex">
                              <label class="kr-sg-toggle with-label">                                       
                                <input id="sa-formFieldListItemEnableDisable" type="checkbox" [checked]="auth?.isEnabled" [(ngModel)]="auth.isEnabled">
                                <div class="slider"> <span class="no">Disable</span><span class="yes">Enable</span></div>
                            </label>
                            </div>
                          </div>
                          <div class="col-2 text-right">
                              <span id="sa-editAuthFieldListItem" class="actions-links" (click)="auth.isEditable=true;editAuthorizationField('edit',auth)"><img class="action_icon arrow-icon" src="assets/images/edit-pencil.svg"></span>
                              <span id="sa-deleteAuthFieldListItem" class="actions-links" (click)="editSource.authorizationProfle.authorizationFields.splice(i,1)"><img class="action_icon" src="assets/icons/delete-table.svg"></span>
                          </div>
                        </ng-container> 

                        <!-- Edit Division Starts -->
                      <div class="is-auth-form-edit" *ngIf="auth?.isEditable">
                        <div class="is-auth-col">
                          <div class="col-3">
                            <div class="crawl-opt-inp">
                              <div class="kr-sg-input-text mar-bot-15">
                                <div class="label-text no-label">Field Key<sup class="field-mandatory">*</sup></div>
                                <input id="{{'contentFieldKeyId'+i}}" type="text" autocomplete="off" name="url" placeholder="Field Key" class="input-text" [value]="auth.key" [(ngModel)]="auth.duplicateObj.key">
                              </div>
                            </div>
                          </div>
                          <div class="col-3">
                            <div class="crawl-option-ddl">
                              <div class="kr-sg-dropdowns mar-bot-12">
                                <div class="label-text">Field Type<sup class="field-mandatory">*</sup></div>
                                <div class="dropdown dropdown-open">
                                  <button id="{{'contentFieldTypeId'+i}}" class="dropdown-toggle dropdown-input" data-toggle="dropdown" aria-expanded="false">{{auth.duplicateObj.type===''?('contentSource.'+auth.type |translate):('contentSource.'+auth?.duplicateObj.type|translate)}}</button>
                                  <ul class="dropdown-menu content-menu">
                                    <li *ngFor="let item of autorizationFieldTypes" (click)="auth.duplicateObj.type=item" [ngClass]="{'font-weight-bold':auth.duplicateObj.type===item}"><a>{{'contentSource.'+item | translate}}</a></li>
                                  </ul>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="col-3">
                            <div class="crawl-opt-inp">
                              <div class="kr-sg-input-text mar-bot-15">
                                <div class="label-text no-label">Field Value<sup class="field-mandatory">*</sup></div>
                                <input id="{{'contentFieldValueId'+i}}" type="text" autocomplete="off" name="url" placeholder="Field Value" class="input-text" [value]="auth.value" [(ngModel)]="auth.duplicateObj.value">
                              </div>
                            </div>
                          </div>
                          <div class="col-3 d-flex align-items-center">
                            <div class="is-auth-btn-group">
                              <button id="sa-cancelAddAuthFieldToTable" class="kr-sg-button-secondary btn-no-bg btn_lg" (click)="editAuthorizationField('cancel',auth)">Cancel</button>
                              <button id="sa-addAuthFieldToTable" class="kr-sg-button-secondary btn_lg" (click)="editAuthorizationField('save',auth,i)">Save</button>
                            </div>
                          </div>
                        </div>
                      </div>  
                      <!-- Edit Division Ends -->
                      </div>
                  </section>  

                  <span class="font-weight-bold d-inline-block w-100 text-center" *ngIf="(editSource.authorizationProfle.authorizationFields.length===0&&!authorizationFieldObj.isShow)">No authorization fields found</span>

                  <!-- ADD DIVISION SATRTS -->
                  <div class="is-auth-form-edit" *ngIf="authorizationFieldObj.isShow">
                    <div class="is-auth-col">
                      <div class="col-3">
                        <div class="crawl-opt-inp">
                          <div class="kr-sg-input-text mar-bot-15">
                            <div class="label-text no-label">Field Key<sup class="field-mandatory">*</sup></div>
                            <input id="contentFieldKeyId" type="text" autocomplete="off" name="url" placeholder="Field Key" class="input-text" [(ngModel)]="authorizationFieldObj.key">
                          </div>
                        </div>
                      </div>
                      <div class="col-3">
                        <div class="crawl-option-ddl">
                          <div class="kr-sg-dropdowns mar-bot-12">
                            <div class="label-text">Field Type<sup class="field-mandatory">*</sup></div>
                            <div class="dropdown dropdown-open">
                              <button id="contentFieldTypeId" class="dropdown-toggle dropdown-input" data-toggle="dropdown" aria-expanded="false">{{(authorizationFieldObj.type==='')?'Select Field Type':('contentSource.'+authorizationFieldObj.type|translate)}}</button>
                              <ul class="dropdown-menu content-menu">
                                <li *ngFor="let item of autorizationFieldTypes" (click)="authorizationFieldObj.type=item" [ngClass]="{'font-weight-bold':authorizationFieldObj.type===item}"><a>{{'contentSource.'+item | translate}}</a></li>
                              </ul>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-3">
                        <div class="crawl-opt-inp">
                          <div class="kr-sg-input-text mar-bot-15">
                            <div class="label-text no-label">Field Value<sup class="field-mandatory">*</sup></div>
                            <input id="contentFieldValueId" type="text" autocomplete="off" name="url" placeholder="Field Value" class="input-text" [(ngModel)]="authorizationFieldObj.value">
                          </div>
                        </div>
                      </div>
                      <div class="col-3 d-flex align-items-center">
                        <div class="is-auth-btn-group">
                          <button id="sa-cancelAddAuthFieldToTable" class="kr-sg-button-secondary btn-no-bg btn_lg" (click)="addAuthorizationField('cancel')">Cancel</button>
                          <button id="sa-addAuthFieldToTable" class="kr-sg-button-secondary btn_lg" (click)="addAuthorizationField('save')">Add</button>
                        </div>
                      </div>
                    </div>
                  </div>  
                  <!-- ADD DIVISION ENDS -->
              </div> 
              </div>
            </div>
            
            <!-- Authentication fields -->
            <ng-container *ngIf="['basic','form'].includes(editSource.authorizationProfle.sso_type)">
            <div class="row col-12 border-top-row">
              <div class="col-4 pl-0">
                <div class="kr-sg-input-text">
                  <div class="label-text">Authentication URL<sup class="field-mandatory">*</sup></div>
                  <input id="contentAuthURLId" type="text" placeholder="Authentication Url" class="input-text" [(ngModel)]="editSource.authorizationProfle.authCheckUrl" autocomplete="off">
                </div>
              </div>
            </div>
            <div class="row col-12 border-top-row">
              <div class="col-4 pl-0">
                <div class="kr-sg-dropdowns">
                  <div class="label-text">Test Type<sup class="field-mandatory">*</sup></div>
                  <div class="dropdown dropdown-open">
                      <button id="contentTestTypeId" class="dropdown-toggle dropdown-input" data-toggle="dropdown">{{(editSource.authorizationProfle.testType==='')?'Choose an option':('contentSource.'+editSource.authorizationProfle.testType|translate)}}</button>                                            
                      <ul class="dropdown-menu content-menu">                                              
                        <li *ngFor="let item of testTypes" (click)="editSource.authorizationProfle.testType=item" [ngClass]="{'font-weight-bold':(editSource.authorizationProfle.testType===item)}"><a>{{'contentSource.'+item|translate}}</a></li>
                      </ul>
                  </div>
                </div>
              </div>
              <div class="col-4">
                <div class="kr-sg-input-text">
                  <div class="label-text">Test Value<sup class="field-mandatory">*</sup></div>
                  <input id="contentTestValueId" [type]="(editSource.authorizationProfle.testType==='status_code')?'number':'text'" placeholder="Test Value" class="input-text" [ngClass]="{'maxUrlLimit-class':editSource.authorizationProfle.testType==='status_code'}" [(ngModel)]="editSource.authorizationProfle.testValue" autocomplete="off">
                </div>
              </div>
            </div>
            </ng-container>
          </div>
      
              </div>
              <!-- new Configuration html end -->
            </perfect-scrollbar>
          </div>

        <!-- Pages -->
          <ng-container *ngIf="page && !loadingSliderContent">
            <div class="pages-container-content" *ngIf="pagingData.length>0">
              <div class="search_header">
                <div class="label-text">SEARCH PAGE</div>
                <div class="kr-sg-input-search">                               
                  <input type="text" placeholder="Search" class="input-search pl-35" name='pagesSearch'
                  id="searchInput" [(ngModel)]="pagesSearch" (keyup)="getCrawledPages(10,0,pagesSearch,'search')"
                    autocomplete="off">
                  <i class="si-search search-icon"></i>
                </div>
              </div>
              <div class="inner-pages-content">
                <div class="left_sec">
                  <perfect-scrollbar>
                    <div class="inner-scroll-data">
                      <ul class="nav nav-tabs">
                        <li class="nav-item"  *ngFor="let page of pagingData;let i = index">
                          <a id="page{{i}}" class="nav-link" [ngClass]= "{ 'active': selectedPage?._id===page?._id }" (click)="selectedPage=page" data-toggle="tab" href="#menu{{i}}">
                            <div class="page-name page-truncate" [title]="page?._source?.page_title">{{page._source.page_title}}</div>
                            <div class="page_link text-truncate" appEllipsisActive>{{page._source.page_url|| selectedSource.url}}</div>
                            <div class="page-c-data">{{page.createdOn | dateFormatPipe: 'D MMMM YYYY'}}</div>
                          </a>
                        </li>
                      </ul>
                    </div>
                  </perfect-scrollbar>
                </div>
                <div *ngIf="pagingData.length>0" class="right_content">
                  <div class="tab-content">
                    <div class="tab-pane active" id="#menu{{i}">
                      <div class="pages-info-tabs">
                        <div class="heading-title">{{selectedPage?._source?.page_title}}</div>
                        <div class="actions-clicks">
                          <div class="recall-btn" (click)="reCrwalingWeb('pages',selectedPage ,null)" *ngIf="['Success','Stopped'].includes(statusObj[selectedSource?.recentStatus]?.name) && (selectedSource?.isURLValid)">
                            <i class="si-recall"></i>
                            <span>Recrawl</span>
                          </div>
                          <div class="delete-btn" (click)="deletePages('pages',selectedPage ,null)">
                            <i class="si-delete1"></i>
                            <span>Delete</span>
                          </div>
                        </div>
                        <div class="page_link">
                          <div (click)="goToLink(selectedPage?._source.page_url)">
                            <i class="si-externallink"></i>
                            <span class="text-truncate">{{selectedPage?._source?.page_url}}</span>
                          </div>
                          <i class="si-copy" (click)="copyUrl(selectedPage._source.page_url)"></i>
                        </div>
                        <perfect-scrollbar>
                          <div class="scroll-inner-data">
                            <ng-container>
                              <div class="split-row row m-0">
                                <div class="split-row-data col-8 p-0">
                                  <div class="row-content-data row m-0">
                                    <div class="col-4 title-heading">Title</div>
                                    <div class="col-8 page-content-details">
                                      <div class="info-text">{{selectedPage?._source?.page_title}}</div>
                                    </div>
                                  </div>
                                  <div class="row-content-data row m-0">
                                    <div class="col-4 title-heading">Sections</div>
                                    <div class="col-8 page-content-details" [ngClass]="{'no-text-truncate':selectedPage?.isSection,'text-truncate':!selectedPage?.isSection}">
                                      <div class="info-text" *ngFor="let section of selectedPage?._source?.page_sections">{{section}}</div>
                                    </div>
                                    <div class="col-4"></div>
                                    <div class="col-8 show-more" (click)="selectedPage.isSection=!selectedPage?.isSection" *ngIf="selectedPage?._source?.page_sections?.length>5">{{(selectedPage?.isSection)?'Show Less':'Show More'}}</div>
                                  </div>
                                  <div class="row-content-data row d-none">
                                    <div class="col-4 title-heading">URLs</div>
                                    <div class="col-8 page-content-details">
                                      <div class="url">
                                        <i class="si-externallink"></i>
                                        <span class="text-truncate">{{selectedPage?._source?.page_url}}</span>
                                      </div>
                                    </div>
                                  </div>
                                  <div class="row-content-data row m-0">
                                    <div class="col-4 title-heading">Updated on</div>
                                    <div class="col-8 page-content-details">
                                      <div class="info-text">{{selectedPage?.createdOn | dateFormatPipe: 'D MMMM YYYY'}}</div>
                                    </div>
                                  </div>
                                </div>
                                <div class="split-row-img col-4"  *ngIf="selectedPage?._source?.page_image_url">
                                  <div class="row-content-data border-0 split-img-preview-block">
                                    <div class="col-12 page-content-details">
                                      <div class="img-preview-header">IMAGE PREVIEW</div>
                                      <div class="img-link-cards">
                                        <div class="img-card">
                                          <div class="img-block">
                                            <img src="{{selectedPage?._source.page_image_url}}">
                                          </div>
                                          <div class="url-link">
                                            <span class="preview-url-link" (click)="goToLink(selectedPage?._source?.page_image_url)" title="{{selectedPage?._source?.page_image_url}}">{{selectedPage?._source?.page_image_url}}</span>
                                            <i class="si-copy" (click)="copyUrl(selectedPage?._source?.page_image_url)"></i>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                           
                              <div class="row-content-data row m-0">
                                <div class="col-4 title-heading width-22Percent">Body</div>
                                <div class="col-8 page-content-details">
                                  <div class="info-text" [ngClass]="{'no-body-truncate':selectedPage?.isBody,'body-truncate':!selectedPage?.isBody}">{{selectedPage?._source?.page_body}}</div>
                                  <div class="show-more" (click)="selectedPage.isBody=!selectedPage?.isBody">{{(selectedPage?.isBody)?'Show Less':'Show More'}}</div>
                                </div>
                              </div>
                            </ng-container>
                          </div>
                        </perfect-scrollbar>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="empty-page-data-container center-state" *ngIf="pagingData.length===0">
              <img src="assets/icons/content/latest-content-icons/empty-pages.svg">
              <div class="title">Sorry no pages available yet!</div>
              <div class="sub-title">Please crawl the webdomain again</div>
              <div><button class="kr-sg-button-primary btn_lg float-none ml-2 mr-0" (click)="jobOndemand(selectedSource,$event)"><span class="si-Internet"></span>   Crawl Web Domain</button></div>
            </div>
          </ng-container>

          <!-- Execution -->
          <div *ngIf="execution && !loadingSliderContent" class="execution-table-data">
            <div class="accordion-content-info text-left">
              <div class="table-list-content execution">
                <div class="kr-sg-data-table with-checkbox">
                  <section class="table-content m-0">
                    <header class="table-header">
                      <div class="col_ col-4">{{"contentSource_execution_caps" | translate}}</div>
                      <div class="col_ col-2">{{"contentSource_duration_caps" | translate}}</div>
                      <div class="col_ col-3">{{"contentSource_triggered_by_caps" | translate}}</div>
                      <div class="col_ col-3">{{"contentSource_executed_on_caps" | translate}}</div>
                    </header>
                    <perfect-scrollbar class="scroll-table" #perfectScroll>
                      <ng-container>
                        <div class="content-body" *ngFor="let history of executionHistoryData; let i = index;">
                          <div class="eye-img">
                            <span class="view-log" (mouseover)="executionLogStatus = true">View Log</span>
                            <div class="execute-log" *ngIf="executionLogStatus">
                              <div class="header-title">
                                <div class="title">{{"contentSource_execution_log_caps" | translate}}</div>
                                <div class="close-log"><img src="assets/images/close.svg"
                                    (click)="executionLogStatus = false"></div>
                              </div>
                              <ng-container *ngFor="let statlog of history?.executionStats?.statusLogs; let i = index;">
                                <div class="log-details" *ngIf="statlog?.stageName">
                                  <img *ngIf="statlog.stageName == 'failed' && statlog.stageStatus == 'failed'"
                                    src="assets/icons/content/failed-circle.svg">
                                  <img *ngIf="statlog.stageName != 'failed' && statlog.stageStatus == 'failed'"
                                    src="assets/icons/content/ex-stopped.svg">
                                  <img *ngIf="statlog.stageStatus != 'failed' && statlog.stageStatus  != 'running'"
                                    src="{{stateExecutionStageNameObj[statlog.stageName].icon[statlog.stageStatus].icon}}"
                                    [ngStyle]="{'height':statlog.stageStatus === 'halted' ? '15px' : '15px' }">
                                  <img *ngIf="statlog.stageStatus === 'running'" class="inProgress"
                                    src="assets/icons/ringLoading.svg"
                                    [ngStyle]="{'height':statlog.stageStatus === 'halted' ? '15px' : '15px' }">
                                  <span class="log-name"> {{ stateExecutionStageNameObj[statlog.stageName].label }}
                                    <span class="time"
                                      *ngIf="statlog.stageName != 'failed' && statlog.stageName != 'successful' && statlog.stageName != 'stopped' && statlog.timeTaken">(
                                      {{ statlog.timeTaken }} )</span>
                                    <span class="time" *ngIf="statlog.stageName == 'stopped'"> by {{
                                      history.executionStats.triggeredBy }} </span>
                                  </span>
                                </div>
                              </ng-container>
                            </div>
                          </div>
                          <div class="col_ col-4 d-flex">
                            <span class="execute-success mr-2" ngbTooltip='{{ history.executionStats.tooltip || ""}}'
                              placement="top-left" [container]='"body"' tooltipClass="ngb_tooltip_custom_class">
                              <img *ngIf="history?.executionStats?.executionStatusMessage =='Execution In Progress'"
                                class="inProgress" src="assets/icons/ringLoading.svg">
                              <img *ngIf="history?.executionStats?.executionStatusMessage !='Execution In Progress'"
                                [src]="(history?.executionStats?.executionStatusMessage)?executionObj[history?.executionStats?.executionStatusMessage].icon:''">
                              <span
                                *ngIf="history?.executionStats?.executionStatusMessage =='Execution In Progress' && history?.executionStats?.percentageDone"
                                style="position: absolute;left: 4px;top: 4px;font-size: 10px;font-weight: 600">{{history?.executionStats?.percentageDone
                                || 0}}%</span>
                            </span>
                            <!-- <span class="execute-success mr-2" ngbTooltip='Sitemap Validation failed due to timeout' placement="top-left" [container]='"body"' tooltipClass="ngb_tooltip_custom_class" >
                              <img *ngIf="history.executionStats.executionStatusMessage == 'Execution Successful'" src="assets/icons/content/success.svg">
                              <img *ngIf="history.executionStats.executionStatusMessage == 'Execution Failed'" src="assets/icons/content/failed.svg">
                              <img *ngIf="history.executionStats.executionStatusMessage == 'Execution Stopped'" src="assets/icons/content/stopped.svg" >
                              <img *ngIf="history.executionStats.executionStatusMessage == 'Execution In Progress'" src="assets/icons/content/failed.svg">
                            </span> -->
                            <div class="text-truncate w-100 pr-4">{{history?.executionStats?.executionStatusMessage}}
                            </div>
                            <!-- <div class="eye-img" (mouseenter)="executionHistoryPop(history,i)"><img src="assets/icons/content/eye.svg" >
                            </div>
                            <div *ngIf = "i == executionPop">
                              HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH
                              {{executionObj[history.executionStats.executionStatusMessage]}}
                            </div> -->
                          </div>
                          <div class="col_ col-2">{{history?.executionStats?.duration}}</div>
                          <div class="col_ col-3">{{history?.executionStats?.triggeredBy}}</div>
                          <div class="col_ col-3">{{history?.createdOn}}</div>
                        </div>
                        <div class="no-execution" *ngIf="executionHistoryData?.length===0">No executions found</div>
                      </ng-container>
                    </perfect-scrollbar>
                  </section>
                </div>
              </div>
            </div>
            <app-record-pagination *ngIf="executionHistoryData.length > 10" [totalRecord]='executionHistoryData.length'
              [limitpage]='10' (pageChanged)="paginate($event,'history')"></app-record-pagination>
          </div>
          <!-- Execution -->
        </ng-container>

      </div>
      <perfect-scrollbar *ngIf="sliderStep === 1 && selectedPage" class="scroll-table-sourceContent" #perfectScroll
        [scrollIndicators]="true">

        <div class="table-view-details table-content" *ngIf="sliderStep === 1 && selectedPage">
          <div class="totalViewsNlikes">
            <div class="d-flex justify-content-between infoBlock">
              <div class="infoType"><img class="viewsIcon" placement="top" container='body' ngbTooltip="Views"
                  src="assets/icons/faq/views.svg"><span>{{numberOf.appearances}}</span></div>
              <div class="infoType"><img placement="top" container='body' ngbTooltip="Clicks"
                  src="assets/icons/faq/hand.svg"><span>{{numberOf.clicks}}</span></div>
            </div>
          </div>
          <div class="view-details-data">
            <div class="title">Title</div>
            <div class="desc-info">{{selectedPage?._source.page_title}}</div>
          </div>

          <div class="view-details-data">
            <div class="title">Body</div>
            <perfect-scrollbar class="scroll-table-sourceContent-pageBody" #perfectScroll [scrollIndicators]="true">
              <div class="desc-info" [innerHtml]="selectedPage._source.page_body"></div>
            </perfect-scrollbar>
          </div>
          <div class="view-details-data">
            <div class="title">URL</div>
            <div class="desc-info">{{selectedPage?._source.page_url|| selectedPage._source.page_image_url }}<img
                class="external_link" (click)="openImageLink(selectedPage.url_display)"
                src="assets/icons/sidemenu/external-link.svg"></div>
          </div>
          <div class="view-details-data">
            <div class="title">Published</div>
            <div class="desc-info">{{selectedPage?.publishedOn}}</div>
            <div class="desc-info" *ngIf="!selectedPage.publishedOn">No publish information available</div>
          </div>
        </div>
      </perfect-scrollbar>
    </div>

  </div>
  <div class="modal-footer moadal-footer-config footer-btns" *ngIf="isConfig">

    <button type="button" class="kr-sg-button-primary btn_lg" data-dismiss="modal"
      (click)="updateSourceConfiguration()">Save</button>
    <button type="button" class="kr-sg-button-secondary btn_lg" data-dismiss="modal"
      (click)="closeStatusModal()">Cancel</button>
    <button type="button" class="kr-sg-button-secondary-two btn_lg" data-dismiss="modal"
      (click)="deletePages('source',selectedSource,null)">Delete</button>
  </div>
  <div class="footer-btns" *ngIf="page && totalCrawledCount>10">
    <app-record-pagination *ngIf = "totalCrawledCount" [totalRecord]='totalCrawledCount' [limitpage]='limitpage' (pageChanged)="paginate($event)"></app-record-pagination>
  </div>
</kr-modal>

<kr-modal modalType="center" modalClass="modal_popups_ sliderComponent" #statusModalDocument id="sourceSlider">
  <div class="modal-header">
    <div class="title">View Details</div>
    <div class="close_icon"><img (click)="closeDocumentModal()" src="assets/icons/modal-close.svg"></div>
  </div>
  <perfect-scrollbar class="perfect-scroll-modal-body" #perfectScroll>
    <div class="modal-body textAlignLeft">
      <!-- <div >Clicks</div>
    <div>{{numberOf.clicks}}</div>
    <div>Views</div>
    <div>{{numberOf.appearances}}</div> -->
      <!-- <div class="kr-sg-data-table"> -->
      <section class="table-content">
        <!-- <header class="table-header"> -->
        <div class="totalViewsNlikes">
          <div class="d-flex justify-content-between infoBlock">
            <div class="infoType"><img class="viewsIcon" src="assets/icons/faq/views.svg" placement="top"
                container='body' ngbTooltip="Views"><span>{{numberOf.appearances}}</span></div>
            <div class="infoType"><img src="assets/icons/faq/hand.svg" placement="top" container='body'
                ngbTooltip="Clicks"><span>{{numberOf.clicks}}</span></div>
          </div>
        </div>
        <div class="title-text">Title
          <img src="assets/images/edit-pencil.svg">
        </div>
        <div class="title-desc-text" *ngIf="!isEditDoc && selectedSource.fileMeta">
          <span>{{docContent.sys_source_name}}</span>
        </div>
        <div class="title-text">Description</div>
        <div class="title-desc-text" *ngIf="!isEditDoc">{{selectedSource.desc || '.....'}}</div>

        <div class="title-text">Document
          <img class="dwnld-image" src="assets/images/download.svg" (click)="downloadDoc(docContent.file_url)">
        </div>
        <div class="title-desc-text" *ngIf="selectedSource.fileMeta">{{docContent.file_title || '---'}}</div>
        <div class="title-text">No. Of. Pages</div>
        <div class="title-desc-text">{{docContentType.pageCount}}</div>

        <div class="title-text">Last Updated</div>
        <div class="title-desc-text">{{selectedSource.createdOn | dateFormatPipe: 'D MMMM YYYY , hh:mm A'}}</div>
        <div class="title-text">Results Preview</div>
        <div class="title-desc-text">{{docContent.file_preview || '---'}}</div>

        <!-- <div class="title-text">STATUS</div>
          <div class="title-desc-text" *ngIf="selectedSource.recentStatus && statusObj[selectedSource.recentStatus]"
          [ngStyle]="{color: (selectedSource.recentStatus && statusObj[selectedSource.recentStatus])?statusObj[selectedSource.recentStatus].color:'black'}">
          {{statusObj[selectedSource.recentStatus]?.name}}</div>

          <div class="title-text">SIZE</div>
          <div class="title-desc-text" *ngIf="selectedSource.fileMeta">{{selectedSource.fileMeta.size ? (selectedSource.fileMeta.size / (1024 * 1024)).toFixed(2) + 'MB': '--'|| '--'}}</div> -->
        <!-- </header> -->
        <div class="content-body par">
          <!-- <div class="col-2" *ngIf="!isEditDoc"><span>{{selectedSource.name}}</span></div> -->
          <div class="col-2" *ngIf="isEditDoc">
            <div class="kr-sg-input-text">
              <input type="text" maxlength="60" placeholder="Title" class="input-text" [(ngModel)]="editDocObj.title">
            </div>
          </div>
          <!-- <div class="col-2" *ngIf="selectedSource.fileMeta">{{selectedSource.fileMeta.fileName || '---'}}</div> -->
          <!-- <div class="col-2" *ngIf="!isEditDoc">{{selectedSource.desc || '.....'}}</div> -->
          <div class="col-2" *ngIf="isEditDoc">
            <div class="kr-sg-input-text-area">
              <textarea placeholder="Description" maxlength="250" class="input-text" [(ngModel)]="editDocObj.desc"
                style="min-height: 50px;"></textarea>
            </div>
          </div>
          <!-- <div class="col-2">{{selectedSource.createdOn | dateFormatPipe: 'MM:DD:YYYY hh:mm A'}}</div> -->
          <!-- <div class="col">Cell text</div> -->
          <!-- <div class="col_ col-1" *ngIf="selectedSource.recentStatus && statusObj[selectedSource.recentStatus]"
            [ngStyle]="{color: (selectedSource.recentStatus && statusObj[selectedSource.recentStatus])?statusObj[selectedSource.recentStatus].color:'black'}">
            {{statusObj[selectedSource.recentStatus]?.name}}</div> -->
          <!-- <div class="col-1">{{selectedSource.numPages}}</div> -->
          <!-- <div class="col-1" *ngIf="selectedSource.fileMeta">{{selectedSource.fileMeta.size ? (selectedSource.fileMeta.size / (1024 * 1024)).toFixed(2) + 'MB': '--'|| '--'}}</div> -->
          <div class="col_ col-1  p-0 text-left actions-images">
            <img src="assets/images/edit-pencil.svg" (click)="editDoc()" title="Edit">
            <img src="assets/images/downloadIcon.svg" title="Download">
            <img src="assets/images/trashIcon.svg" (click)="deleteDocument('source',selectedSource ,$event)"
              title="Delete">
          </div>
        </div>
      </section>
      <!-- </div> -->
      <!-- DATA TABLE ENDS HERE -->
    </div>
  </perfect-scrollbar>
  <div class="footer-btns">
    <button class="kr-sg-button-secondary-two btn_lg"
      (click)="deleteDocument('source',selectedSource ,$event)">Delete</button>
    <!-- <button type="button" class="kr-sg-button-primary btn_lg" (click)="saveDocDetails()">Save</button>
  <button type="button" class="kr-sg-button-secondary btn_lg" (click) = "cancelDocDetails()">Cancel</button> -->
  </div>
</kr-modal>

<kr-modal modalType="center" modalClass="modal_popups_ structuredDataModal" #structuredDataModal
  id="structuredDataModal">
  <app-structured-data></app-structured-data>
</kr-modal>

<kr-modal modalType="center" modalClass="modal_popups_ addStructuredDataModal" #addStructuredDataModalPop
  id="addStructuredDataModalPop">
  <app-add-structured-data *ngIf="isStructuredDataAdd" [selectedSourceType]="selectedSourceType"
    (closeStructuredDataModal)="closeAddStructuredDataModal($event)"></app-add-structured-data>
</kr-modal>

<kr-modal modalType="center" modalClass="modal_popups_ schedualarDataModelPop" #schedularDataPop
  id="schedualarDataModelPop">
  <div class="modal-header">
    <div class="title">Scheduler</div>
  </div>
  <perfect-scrollbar class="perfect-scroll-modal-body" #perfectScroll>
       <app-scheduler [scheduleFlag]="selectedSource?.advanceSettings?.scheduleOpt"
          [crwalObject]="selectedSource" [schedule]="'get'"   [schedulerType]="'verticalSchedular'" (scheduleData)="scheduleData($event)"
        (cronExpress)="cronExpress($event)"></app-scheduler>
  </perfect-scrollbar>
  <div class="shedular-footer">
    <button class="kr-sg-button-secondary btn_lg" (click)="closeScheduler()">Cancel</button>
    <button class="kr-sg-button-primary btn_lg">Ok</button>
  </div>
</kr-modal>

<ng-container *ngIf="showSourceAddition">
  <app-add-source [inputClass]='"faqSourceAddition"' [resourceIDToOpen]="showSourceAddition"
    (saveEvent)="onSourceAdditionSave($event)" (cancleEvent)="onSourceAdditionClose($event)"></app-add-source>
</ng-container>