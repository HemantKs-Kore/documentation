<app-useronboarding-journey [componentType]='componentType'></app-useronboarding-journey>
<div class="search-experience-wrapper">
    <div class="header-title">Search Interface</div>
    <div class="tabs-sec">
        <ul class="nav nav-tabs" role="tablist">
            <li class="nav-item" (click)="selectTab('experience')">
              <a class="nav-link" [ngClass]="{'active':selectedTab==='experience'}" data-toggle="tab"><span class="active-steps" [ngStyle]="show_tab_color?{'background':'#0D6EFD','color':'#fff','border': '1px solid #0D6EFD'}:{}">1</span><span class="name">Experience</span></a>
            </li>
            <li class="nav-item" (click)="selectTab('searchwidget')">
              <a class="nav-link" [ngClass]="{'active':selectedTab==='searchwidget'}" data-toggle="tab"><span class="active-steps" [ngStyle]="show_tab_color1?{'background':'#0D6EFD','color':'#fff','border': '1px solid #0D6EFD'}:{}">2</span><span class="name">Search Widget</span></a>
            </li>
            <li class="nav-item" (click)="selectTab('interactions')">
              <a class="nav-link" [ngClass]="{'active':selectedTab==='interactions'}" data-toggle="tab" ><span class="active-steps" [ngStyle]="show_tab_color2?{'background':'#0D6EFD','color':'#fff','border': '1px solid #0D6EFD'}:{}">3</span><span class="name">Interactions</span></a>
            </li>
        </ul>
        <perfect-scrollbar class="scroll-data">
          <div class="tab-content" [ngSwitch]="selectedTab">
            <div class="container" *ngSwitchCase="'experience'">              
                <div class="experience-tab">
                    <div class="left-sec">
                        <div class="kr-sg-radiobutton d-block plr-0 mb-4">
                            <input id="radio-2" name="topdown" value='top' class="radio-custom" type="radio" [(ngModel)]="searchObject.searchExperienceConfig.searchBarPosition" (click)="changeSlider('top')">
                            <label for="radio-2" class="radio-custom-label">Top Down</label>
                            <div class="desc-tect">Search Bar at the top</div>
                        </div>   
                        <div class="kr-sg-radiobutton d-block plr-0 mb-4">
                            <input id="radio-22" name="bottomup" value='bottom' class="radio-custom" type="radio" [(ngModel)]="searchObject.searchExperienceConfig.searchBarPosition" (click)="changeSlider('bottom')">
                            <label for="radio-22" class="radio-custom-label">Bottom Up</label>
                            <div class="desc-tect">Search Bar at the bottom</div>
                        </div>   
                    </div>
                    <div class="right-sec">                       
                        <img src="assets/icons/search-experience/top-down-mini.jpg" *ngIf="searchObject.searchExperienceConfig.searchBarPosition == 'top'">
                        <img src="assets/icons/search-experience/bottum-up-mini.jpg" *ngIf="searchObject.searchExperienceConfig.searchBarPosition == 'bottom'">
                    </div>
                </div>
            </div>
            <div *ngSwitchCase="'searchwidget'">
                <div class="search-widget">
                    <div class="label-text">Search Box Customization</div>
                    <div class="d-flex search-customization-input">
                        <div class="kr-sg-input-search" [ngClass]="{'added-tour':tourGuide==='step1'||tourGuide==='step2'||tourGuide==='step3'}">                                                         
                            <div class="hover-search-icon">
                                <div class="hover-action-edit-icon-search" (click)="selectSearchBox('inputBox');$event.stopPropagation();closeAllBoxs('all');">
                                    <img src="assets/icons/border-pencil.svg">
                                </div>  
                                <input type="text" [ngClass]="{'activeBox':selectSearch=='inputBox'}"  class="input-search" [ngStyle]="{'background':searchObject.searchWidgetConfig.searchBarFillColor,'border-color':searchObject.searchWidgetConfig.searchBarBorderColor}" readonly>
                            </div>

                            <div class="search-icon-hover-widget">
                                <div class="hover-action-edit-icon-search" (click)="selectSearchBox('inputIcon');$event.stopPropagation();">
                                    <img src="assets/icons/border-pencil.svg">
                                </div> 
                                <img [src]="searchIcon" class="search-icon" [ngClass]="{'activeBox':selectSearch=='inputIcon'}" height="15" width="15">
                            </div>
                            <div class="place-holder-widget">
                                <div class="hover-action-edit-icon-search" (click)="selectSearchBox('placeholderText');$event.stopPropagation();closeAllBoxs('all');">
                                    <img src="assets/icons/border-pencil.svg">
                                </div> 
                                <input #elasticInput maxlength="60" class="placeholder-custom-search" value="{{searchObject.searchWidgetConfig.searchBarPlaceholderText}}" placeholder="search" [ngClass]="{'activeBox':selectSearch=='placeholderText'}" [ngStyle]="{'color':searchObject.searchWidgetConfig.searchBarPlaceholderTextColor,'width.px': width,'background':'none'}" #data (change)="onEventLog('placeholderText',data.value);" (input)="resize()"> 
                            </div>                            


                            <span #hiddenText style="visibility: hidden; white-space: pre;">{{elasticInput.value}}</span>
                            <button class="btn-customize kr-sg-button-primary read-mode btn_lg inside-input-btn"  (click)="selectSearchBox('button');closeAllBoxs('all');" [ngClass]="{'activeBox':selectSearch=='button','added-tour':tourGuide==='step4'}" [ngStyle]="{'background':searchObject.searchWidgetConfig.buttonFillColor,'border-color':searchObject.searchWidgetConfig.buttonBorderColor,'color':searchObject.searchWidgetConfig.buttonTextColor}" [disabled]="buttonDisabled" *ngIf="(searchObject.searchExperienceConfig.searchBarPosition==='top'&&searchObject.searchWidgetConfig.buttonPlacementPosition==='inside')||searchObject.searchExperienceConfig.searchBarPosition==='bottom'">
                                <span>{{searchObject.searchWidgetConfig.buttonText}}</span>
                                <div class="hover-overlay-btn-img" (click)="buttonDisabled=false" *ngIf="buttonDisabled"><img src="assets/icons/search-experience/edit.svg"></div>
                            </button>  
                        </div>                                             
                        <button class="btn-customize kr-sg-button-primary read-mode btn_lg"  (click)="selectSearchBox('button');closeAllBoxs('all');" [ngClass]="{'activeBox':selectSearch=='button','added-tour':tourGuide==='step4'}" [ngStyle]="{'background':searchObject.searchWidgetConfig.buttonFillColor,'border-color':searchObject.searchWidgetConfig.buttonBorderColor,'color':searchObject.searchWidgetConfig.buttonTextColor}" [disabled]="buttonDisabled" *ngIf="searchObject.searchExperienceConfig.searchBarPosition==='top'&&searchObject.searchWidgetConfig.buttonPlacementPosition==='outside'">
                            <span>{{searchObject.searchWidgetConfig.buttonText}}</span>
                            <div class="hover-overlay-btn-img" (click)="buttonDisabled=false" *ngIf="buttonDisabled"><img src="assets/icons/search-experience/edit.svg"></div>
                        </button>
                        <div [ngSwitch]="tourGuide">
                            <div class="tour-guide-data" *ngSwitchCase="'step1'">
                                <div class="close-guide" (click)="tourGuide=''">
                                    <img src="assets/icons/search-experience/close-tour.svg">
                                </div>
                                <div class="title-info">Click on search box to customize border and fill color</div>
                                <div class="d-flex align-items-center justify-content-between">
                                    <div class="tour-length">1 of 4</div>
                                    <div class="bt-sec">
                                        <button class="kr-sg-button-primary btn_lg mr-2" (click)="tourGuide='step2'">Next</button>
                                        <!-- <button class="kr-sg-button-secondary btn_lg">Previous</button> -->
                                    </div>
                                </div>
                            </div>  
                            
                            <div class="tour-guide-data search-tour-icon" *ngSwitchCase="'step2'">
                                <div class="close-guide" (click)="tourGuide=''">
                                    <img src="assets/icons/search-experience/close-tour.svg">
                                </div>
                                <div class="title-info">Click on search icon to change the icon as per your choice</div>
                                <div class="d-flex align-items-center justify-content-between">
                                    <div class="tour-length">2 of 4</div>
                                    <div class="bt-sec">
                                        <button class="kr-sg-button-primary btn_lg mr-2" (click)="tourGuide='step3'">Next</button>
                                        <button class="kr-sg-button-secondary btn_lg" (click)="tourGuide='step1'">Previous</button>
                                    </div>
                                </div>
                            </div> 
    
                            <div class="tour-guide-data place-holder-text-tour" *ngSwitchCase="'step3'">
                                <div class="close-guide" (click)="tourGuide=''">
                                    <img src="assets/icons/search-experience/close-tour.svg">
                                </div>
                                <div class="title-info">Click on the text to customize text content and color</div>
                                <div class="d-flex align-items-center justify-content-between">
                                    <div class="tour-length">3 of 4</div>
                                    <div class="bt-sec">
                                        <button class="kr-sg-button-primary btn_lg mr-2" (click)="tourGuide='step4'">Next</button>
                                        <button class="kr-sg-button-secondary btn_lg" (click)="tourGuide='step2'">Previous</button>
                                    </div>
                                </div>
                            </div> 
    
                            <div class="tour-guide-data" *ngSwitchCase="'step4'" [ngClass]="[searchObject.searchExperienceConfig.searchBarPosition=='top'?'button-tour-top':'button-tour-bottom']">
                                <div class="close-guide" (click)="updateTourConfig();tourGuide=''">
                                    <img src="assets/icons/search-experience/close-tour.svg">
                                </div>
                                <div class="title-info">Click on the button to customize button text, fill color and border color</div>
                                <div class="d-flex align-items-center justify-content-between">
                                    <div class="tour-length">4 of 4</div>
                                    <div class="bt-sec">
                                        <button class="kr-sg-button-primary btn_lg mr-2" (click)="updateTourConfig()">Got it</button>
                                        <button class="kr-sg-button-secondary btn_lg" (click)="tourGuide='step3'">Previous</button>
                                    </div>
                                </div>
                            </div> 
                        </div>                                                  
                    </div>
                    <div [ngSwitch]="selectSearch">                        
                        <div class="fill-colors-block" *ngSwitchCase="'inputBox'">
                            <div class="fill-color">
                                <div class="label-color">Fill Color</div>                            
                                <div class="box-color" [ngClass]="{'color-pallet-container': inputBox1}" (mouseover)="toggle=true;inputBox1=true;closeAllBoxs('toggle');">
                                     <input
                                        [style.background]="color"                                      
                                        [(colorPicker)]="color"
                                        [cpOutputFormat]="'hex'"
                                        [cpAlphaChannel]="'always'"
                                        (colorPickerChange)="selectedColor=$event"
                                        [cpCloseClickOutside]="false"
                                        [(cpToggle)]='toggle'
                                        readonly
                                    />
                                    <div class="box-color-content" *ngIf="inputBox1">
                                        <div class="header-title-close">
                                            <div class="title-name">Choose Color</div>
                                            <div class="close-color" (click)="closeColorPallete('inputbox1')">
                                                <img src="assets/icons/close.svg">
                                            </div>
                                        </div>
                                        <div class="selected-previous-colors flex-wrap">
                                            <ng-container *ngFor="let col of searchObject.searchWidgetConfig.userSelectedColors">
                                                <div class="bg-color-selected" [ngStyle]="{'background':col}" (click)="selectedColor=col;color=col;"></div>
                                            </ng-container>                                           
                                        </div>
                                        <div class="save-switch" (click)="applyColor('inputbox1','save')">Save & Apply</div>
                                        <button class="kr-sg-button-primary btn_apply_save" (click)="applyColor('inputbox1')">Apply</button>
                                     </div>
                                </div>
                            </div>
                            <div class="fill-color">
                                <div class="label-color">Border Color</div>
                                <!--border-color-pallet-->
                                <div class="box-color" [ngClass]="{'color-pallet-container': inputBox2}" (mouseover)="toggle1=true;inputBox2=true;">
                                    <input
                                        [style.background]="color1"
                                        [(colorPicker)]="color1"
                                        [cpOutputFormat]="'hex'"
                                        [cpAlphaChannel]="'always'"
                                        (colorPickerChange)="selectedColor=$event"        
                                        [cpCloseClickOutside]="false"
                                        [(cpToggle)]='toggle1'                              
                                        readonly
                                    />

                                    <div class="box-color-content" *ngIf="inputBox2">
                                        <div class="header-title-close">
                                            <div class="title-name">Choose Color</div>
                                            <div class="close-color" (click)="closeColorPallete('inputBox2')">
                                                <img src="assets/icons/close.svg">
                                            </div>
                                        </div>
                                        <div class="selected-previous-colors flex-wrap">
                                            <ng-container *ngFor="let col of searchObject.searchWidgetConfig.userSelectedColors">
                                                <div class="bg-color-selected" [ngStyle]="{'background':col}" (click)="selectedColor=col;color1=col;"></div>
                                            </ng-container>                                           
                                        </div>
                                        <div class="save-switch" (click)="applyColor('inputbox2','save')">Save & Apply</div>
                                        <button class="kr-sg-button-primary btn_apply_save" (click)="applyColor('inputbox2')">Apply</button>
                                     </div>
                                </div>
                            </div>
                        </div>
                        <div class="drog-and-drop-block" *ngSwitchCase="'inputIcon'">
                            <div class="img-block"><img src="assets/icons/search-experience/dummy-image.svg"></div>
                            <div class="input-file">
                                <div class="title">Drag and drop or <span class="browse">browse</span></div>
                                <input type="file" name="avatar"  (change)="selectIcon($event,'searchIcon','auto')" accept=".jpg,.png,.jpeg,.gif" />
                                <span class="icon-text d-flex align-items-center"><img src="assets/icons/info.svg" class="mr-2"> Recommended icon size : 26X26 pixels</span>
                            </div>
                        </div>
                        <div class="fill-colors-block" *ngSwitchCase="'placeholderText'">
                            <div class="fill-color">
                                <div class="label-color">Text Color</div>
                                <div class="box-color" [ngClass]="{'color-pallet-container': placeholBox}" (mouseover)="toggle2=true;placeholBox=true;">
                                    <input
                                        [style.background]="color2"
                                        [(colorPicker)]="color2"
                                        [cpOutputFormat]="'hex'"
                                        [cpAlphaChannel]="'always'"
                                        (colorPickerChange)="selectedColor=$event"   
                                        [cpCloseClickOutside]="false"
                                        [(cpToggle)]='toggle2'
                                        readonly
                                        id="inpBox"
                                    />

                                    <div class="box-color-content" *ngIf="placeholBox">
                                        <div class="header-title-close">
                                            <div class="title-name">Choose Color</div>
                                            <div class="close-color" (click)="closeColorPallete('placeholBox')">
                                                <img src="assets/icons/close.svg">
                                            </div>
                                        </div>
                                        <div class="selected-previous-colors flex-wrap">
                                            <ng-container *ngFor="let col of searchObject.searchWidgetConfig.userSelectedColors">
                                                <div class="bg-color-selected" [ngStyle]="{'background':col}" (click)="selectedColor=col;color2=col;"></div>
                                            </ng-container>                                           
                                        </div>
                                        <div class="save-switch" (click)="applyColor('placeholder','save')">Save & Apply</div>
                                        <button class="kr-sg-button-primary btn_apply_save" (click)="applyColor('placeholder')">Apply</button>
                                     </div>
                                </div>
                            </div>
                        </div>
                        <div class="button-enable" *ngSwitchCase="'button'">
                            <div class="label_text">Add Button</div>
                            <label class="kr-sg-toggle">                                       
                                <input type="checkbox" [(ngModel)]="searchObject.searchWidgetConfig.searchButtonEnabled">
                                <div class="slider"><span class="enabled">Yes</span><span class="disabled">No</span></div>
                            </label>

                            <div class="group-radiobutton mt-3 pt-1" *ngIf="searchObject.searchExperienceConfig.searchBarPosition==='top'">
                                <div class="label_text">Button Placement</div>
                                <div class="kr-sg-radiobutton">
                                    <input id="radio-221" name="radio" class="radio-custom" type="radio" value='outside' [checked]="searchObject.searchWidgetConfig.buttonPlacementPosition=='outside'" [disabled]="!(searchObject.searchWidgetConfig.searchButtonEnabled)" [(ngModel)]="searchObject.searchWidgetConfig.buttonPlacementPosition">
                                    <label for="radio-221" class="radio-custom-label">Outside Search box</label>
                                </div>
                                <div class="kr-sg-radiobutton">
                                    <input id="radio-232" name="radio" class="radio-custom" type="radio" value='inside' [checked]="searchObject.searchWidgetConfig.buttonPlacementPosition=='inside'" [disabled]="!(searchObject.searchWidgetConfig.searchButtonEnabled)" [(ngModel)]="searchObject.searchWidgetConfig.buttonPlacementPosition">
                                    <label for="radio-232" class="radio-custom-label">Inside Search box</label>
                                </div>
                            </div> 

                            
                            <div class="kr-sg-input-text">
                                <div class="label-text">Button Text</div>
                                <input type="text" maxlength="6" #butttonText (keyup)="0" placeholder="Enter Name" class="input-text" [(ngModel)]="searchObject.searchWidgetConfig.buttonText" [class.err-block]="(searchObject.searchWidgetConfig.searchButtonEnabled && !searchObject.searchWidgetConfig.buttonText.length) && submitted" [disabled]="!(searchObject.searchWidgetConfig.searchButtonEnabled)">
                                <img *ngIf="(searchObject.searchWidgetConfig.searchButtonEnabled && !searchObject.searchWidgetConfig.buttonText.length) && submitted" id="facetNameWarning" src="assets/icons/warning_escalation.svg" style="top: 57%; position: absolute; right: 4.5%; display: block;" height="12" width="12" />
                                <div class="button-text-count">{{butttonText.value.length}}/6</div>
                            </div>
                            <div class="fill-colors-block">
                                <div class="fill-color">
                                    <div class="label-color">Text Color</div>
                                    <div class="box-color" [ngClass]="{'color-pallet-container': buttonTextColor}" (mouseover)="searchObject.searchWidgetConfig.searchButtonEnabled?[toggle3=true,buttonTextColor=true,closeAllBoxs('toggle3')]:null">
                                        <input
                                            [style.background]="color3"
                                            [(colorPicker)]="color3"
                                            [cpOutputFormat]="'hex'"
                                            [cpAlphaChannel]="'always'"
                                            (colorPickerChange)="selectedColor=$event" 
                                            [cpCloseClickOutside]="false"
                                            [(cpToggle)]='toggle3'
                                            readonly                                            
                                            [ngClass]="{'input_disable':!(searchObject.searchWidgetConfig.searchButtonEnabled)}"
                                        />
    
                                        <div class="box-color-content" *ngIf="buttonTextColor">
                                            <div class="header-title-close">
                                                <div class="title-name">Choose Color</div>
                                                <div class="close-color" (click)="closeColorPallete('buttonTextColor')">
                                                    <img src="assets/icons/close.svg">
                                                </div>
                                            </div>
                                            <div class="selected-previous-colors flex-wrap">
                                                <ng-container *ngFor="let col of searchObject.searchWidgetConfig.userSelectedColors">
                                                    <div class="bg-color-selected" [ngStyle]="{'background':col}" (click)="selectedColor=col;color3=col;"></div>
                                                </ng-container>                                           
                                            </div>
                                            <div class="save-switch" (click)="applyColor('buttonTextColor','save')">Save & Apply</div>
                                            <button class="kr-sg-button-primary btn_apply_save" (click)="applyColor('buttonTextColor')">Apply</button>
                                         </div>
                                    </div>
                                </div>
                                <div class="fill-color">
                                    <div class="label-color">Fill Color</div>
                                    <div class="box-color" [ngClass]="{'color-pallet-container': buttonFill}" (mouseover)="searchObject.searchWidgetConfig.searchButtonEnabled?[toggle4=true,buttonFill=true,closeAllBoxs('toggle4')]:null">
                                        <input
                                            [style.background]="color4"
                                            [(colorPicker)]="color4"
                                            [cpOutputFormat]="'hex'"
                                            [cpAlphaChannel]="'always'"
                                            (colorPickerChange)="selectedColor=$event" 
                                            [cpCloseClickOutside]="false"
                                            [(cpToggle)]='toggle4'
                                            readonly
                                            [ngClass]="{'input_disable':!(searchObject.searchWidgetConfig.searchButtonEnabled)}"
                                        />
    
                                        <div class="box-color-content" *ngIf="buttonFill">
                                            <div class="header-title-close">
                                                <div class="title-name">Choose Color</div>
                                                <div class="close-color" (click)="closeColorPallete('buttonFill')">
                                                    <img src="assets/icons/close.svg">
                                                </div>
                                            </div>
                                            <div class="selected-previous-colors flex-wrap">
                                                <ng-container *ngFor="let col of searchObject.searchWidgetConfig.userSelectedColors">
                                                    <div class="bg-color-selected" [ngStyle]="{'background':col}" (click)="selectedColor=col;color4=col;"></div>
                                                </ng-container>                                           
                                            </div>
                                            <div class="save-switch" (click)="applyColor('buttonFill','save')">Save & Apply</div>
                                            <button class="kr-sg-button-primary btn_apply_save" (click)="applyColor('buttonFill')">Apply</button>
                                         </div>
                                    </div>
                                </div>
                                <div class="fill-color">
                                    <div class="label-color">Border Color</div>
                                    <!-- border-color-pallet-->
                                    <div class="box-color" [ngClass]="{'color-pallet-container': buttonBorder}" (mouseover)="searchObject.searchWidgetConfig.searchButtonEnabled?[toggle5=true,buttonBorder=true,closeAllBoxs('toggle5')]:null">
                                        <input
                                            [style.background]="color5"
                                            [(colorPicker)]="color5"
                                            [cpOutputFormat]="'hex'"
                                            [cpAlphaChannel]="'always'"
                                            (colorPickerChange)="selectedColor=$event" 
                                            [cpCloseClickOutside]="false"
                                            [(cpToggle)]='toggle5'
                                            readonly
                                            [ngClass]="{'input_disable':!(searchObject.searchWidgetConfig.searchButtonEnabled)}"
                                        />
    
                                        <div class="box-color-content" *ngIf="buttonBorder">
                                            <div class="header-title-close">
                                                <div class="title-name">Choose Color</div>
                                                <div class="close-color" (click)="closeColorPallete('buttonBorder')">
                                                    <img src="assets/icons/close.svg">
                                                </div>
                                            </div>
                                            <div class="selected-previous-colors flex-wrap">
                                                <ng-container *ngFor="let col of searchObject.searchWidgetConfig.userSelectedColors">
                                                    <div class="bg-color-selected" [ngStyle]="{'background':col}" (click)="selectedColor=col;color5=col;"></div>
                                                </ng-container>                                           
                                            </div>
                                            <div class="save-switch" (click)="applyColor('buttonBorder','save')">Save & Apply</div>
                                            <button class="kr-sg-button-primary btn_apply_save" (click)="applyColor('buttonBorder')">Apply</button>
                                         </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>         
            </div>
            <div class="col-12 pr-0" *ngSwitchCase="'interactions'">
                <div class="interactins-content col-12 p-0 row m-0">
                    <div class="left-sec col-12 p-0">
                        <div class="greeting-message border-with-padding border-0 col-7 pb-0 pt-0">
                            <div class="kr-sg-input-text-area">
                                <div class="label-text">Customize Launch Greeting Message</div>
                                <textarea class="input-text" maxlength="60" #box (keyup)="0" [(ngModel)]="searchObject.searchInteractionsConfig.welcomeMsg" [ngStyle]="{'color':searchObject.searchInteractionsConfig.welcomeMsgColor}"></textarea>
                            </div>
                            <div class="emojis-block">
                                <!-- <div class="emoji-img"><label for="myFileInput"><img [src]="emojiIcon" width="18" height="18">
                                    <input type="file" style="display: none;" id="myFileInput" (change)="selectIcon($event,'emoji','auto')" /></label>
                                </div>                                 -->
                                <div class="emoji-img">
                                    <div class="kr-sg-dropdowns" ngbDropdown [placement]="'right-top'" id="avatarDropdown">
                                        <div class="dropdown dropdown-open">
                                            <button class="dropdown-toggle dropdown-input before-none" ngbDropdownToggle>
                                                <img [src]="emojiIcon" width="18" height="18">
                                            </button>
                                            <ul class="dropdown-menu content-menu" ngbDropdownMenu >
                                               <div class="emojis-images-block">
                                                   <div class="close-btn" (click)="closeEmojiPicker()">
                                                       <img src="assets/icons/search-experience/emojis/close.svg">
                                                   </div>
                                                    <li class="emoji-type" *ngFor="let emoji of emojiList">
                                                        <img [src]="emoji.img_src" *ngIf="!emoji.multiple" [alt]="emoji.value" (click)="emojiIcon = emoji.img_src; emojiIconUpload('update')">
                                                        <img [src]="emoji.selected" *ngIf="emoji.multiple" [alt]="emoji.value" (click)="emojiIcon = emoji.selected; emojiIconUpload('update')">
                                                        <div class="nestead-emojies" *ngIf="emoji.multiple">
                                                            <div class="img-block" *ngFor="let emoji_varient of emoji.emoji_set">
                                                                <img [src]="emoji_varient" [alt]="emoji.value" (click)="emojiIcon = emoji_varient; emoji.selected = emoji_varient;emojiIconUpload('update')">
                                                            </div>
                                                        </div>
                                                    </li>
                                               </div>
                                            </ul>
                                        </div>
                                    </div>	
                                </div>

                                <div class="fill-colors-block">
                                    <div class="fill-color">
                                        <div class="box-color" [ngClass]="{'color-pallet-container interaction-color': msgColor}" (mouseover)="toggle6=true;msgColor=true;">
                                            <input
                                                [style.background]="color6"
                                                [(colorPicker)]="color6"
                                                [cpOutputFormat]="'hex'"
                                                [cpAlphaChannel]="'always'"
                                                (colorPickerChange)="selectedColor=$event" 
                                                [cpCloseClickOutside]="false"
                                                [(cpToggle)]='toggle6'
                                                readonly
                                            />

                                            <div class="box-color-content" *ngIf="msgColor">
                                                <div class="header-title-close">
                                                    <div class="title-name">Choose Color</div>
                                                    <div class="close-color" (click)="closeColorPallete('msgColor')">
                                                        <img src="assets/icons/close.svg">
                                                    </div>
                                                </div>
                                                <div class="selected-previous-colors flex-wrap">
                                                    <ng-container *ngFor="let col of searchObject.searchWidgetConfig.userSelectedColors">
                                                        <div class="bg-color-selected" [ngStyle]="{'background':col}" (click)="selectedColor=col;color6=col;"></div>
                                                    </ng-container>                                           
                                                </div>
                                                <div class="save-switch" (click)="applyColor('msgColor','save')">Save & Apply</div>
                                                <button class="kr-sg-button-primary btn_apply_save" (click)="applyColor('msgColor')">Apply</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="count-length">{{box.value.length}} / 60</div>
                            </div>
                        </div>

                        <div class="col-12 preview-search-ex pb-2" style="pointer-events: none;">
                            <div class="search-widget-if-bottom-up" *ngIf="searchObject.searchExperienceConfig.searchBarPosition == 'bottom'">                               
                                <div class="greeting-block">
                                    <img [src]="emojiIcon">
                                    <span class="greeting-title" [ngStyle]="{'color':searchObject.searchInteractionsConfig.welcomeMsgColor}">{{searchObject.searchInteractionsConfig.welcomeMsg}}</span>
                                </div>
                                <div class="d-flex search-customization-input">
                                    <div class="kr-sg-input-search">                               
                                        <input type="text" class="input-search" [ngStyle]="{'background':searchObject.searchWidgetConfig.searchBarFillColor,'border-color':searchObject.searchWidgetConfig.searchBarBorderColor}" readonly>
                                        <img [src]="searchIcon" class="search-icon" height="15" width="15">
                                        <span class="placeholder-text" [ngStyle]="{'color':searchObject.searchWidgetConfig.searchBarPlaceholderTextColor}">{{searchObject.searchWidgetConfig.searchBarPlaceholderText}}</span>
                                        <ng-container *ngIf="searchObject.searchWidgetConfig.searchButtonEnabled">
                                            <button class="btn-customize kr-sg-button-primary read-mode btn_lg inside-input-btn" [ngStyle]="{'background':searchObject.searchWidgetConfig.buttonFillColor,'border-color':searchObject.searchWidgetConfig.buttonBorderColor,'color':searchObject.searchWidgetConfig.buttonTextColor}" *ngIf="(searchObject.searchExperienceConfig.searchBarPosition==='top' && searchObject.searchWidgetConfig.buttonPlacementPosition==='inside') || searchObject.searchExperienceConfig.searchBarPosition === 'bottom'">
                                                <span>{{searchObject.searchWidgetConfig.buttonText}}</span>
                                            </button>
                                        </ng-container>
                                    </div>
                                    <ng-container *ngIf="searchObject.searchWidgetConfig.searchButtonEnabled">
                                        <button class="btn-customize kr-sg-button-primary read-mode btn_lg" [ngStyle]="{'background':searchObject.searchWidgetConfig.buttonFillColor,'border-color':searchObject.searchWidgetConfig.buttonBorderColor,'color':searchObject.searchWidgetConfig.buttonTextColor}" *ngIf="searchObject.searchExperienceConfig.searchBarPosition==='top' && searchObject.searchWidgetConfig.buttonPlacementPosition === 'outside'">
                                            <span>{{searchObject.searchWidgetConfig.buttonText}}</span>                                       
                                        </button>
                                    </ng-container>
                                </div>
                            </div>
                            <div class="search-widget" *ngIf="searchObject.searchExperienceConfig.searchBarPosition == 'top'">                               
                                <div class="d-flex search-customization-input">
                                    <div class="kr-sg-input-search">                               
                                        <input type="text" class="input-search" [ngStyle]="{'background':searchObject.searchWidgetConfig.searchBarFillColor,'border-color':searchObject.searchWidgetConfig.searchBarBorderColor}" readonly>
                                        <img [src]="searchIcon" class="search-icon" height="15" width="15">
                                        <span class="placeholder-text" [ngStyle]="{'color':searchObject.searchWidgetConfig.searchBarPlaceholderTextColor}">{{searchObject.searchWidgetConfig.searchBarPlaceholderText}}</span>
                                        <ng-container *ngIf="searchObject.searchWidgetConfig.searchButtonEnabled">
                                            <button class="btn-customize kr-sg-button-primary read-mode btn_lg inside-input-btn" [ngStyle]="{'background':searchObject.searchWidgetConfig.buttonFillColor,'border-color':searchObject.searchWidgetConfig.buttonBorderColor,'color':searchObject.searchWidgetConfig.buttonTextColor}" *ngIf="(searchObject.searchExperienceConfig.searchBarPosition==='top'&&searchObject.searchWidgetConfig.buttonPlacementPosition==='inside')||searchObject.searchExperienceConfig.searchBarPosition==='bottom'">
                                                <span>{{searchObject.searchWidgetConfig.buttonText}}</span>
                                            </button>
                                        </ng-container>
                                    </div>
                                    <ng-container *ngIf="searchObject.searchWidgetConfig.searchButtonEnabled">
                                        <button class="btn-customize kr-sg-button-primary read-mode btn_lg" [ngStyle]="{'background':searchObject.searchWidgetConfig.buttonFillColor,'border-color':searchObject.searchWidgetConfig.buttonBorderColor,'color':searchObject.searchWidgetConfig.buttonTextColor}" *ngIf="searchObject.searchExperienceConfig.searchBarPosition==='top'&&searchObject.searchWidgetConfig.buttonPlacementPosition==='outside'">
                                            <span>{{searchObject.searchWidgetConfig.buttonText}}</span>                                       
                                        </button>
                                    </ng-container>
                                </div>
                                <div class="greeting-block">
                                    <img [src]="emojiIcon">
                                    <span class="greeting-title" [ngStyle]="{'color':searchObject.searchInteractionsConfig.welcomeMsgColor}">{{searchObject.searchInteractionsConfig.welcomeMsg}}</span>
                                </div>
                            </div>
                        </div>


                        <div class="col-12 p-0 position-relative">
                            <div class="guide-button-info">
                                <div class="title-text">Not Sure! What you can do with these interaction settings?</div>
                                <div class="guide-btn">
                                    <img src="assets/icons/search-experience/guide/help.svg">
                                    <span class="choose-guide" (click)="openSearchInterfaceGuide()">Let us help you choose</span>
                                </div>
                            </div>
                            <div class="col-7 p-0">                            
                                <div class="border-with-padding">
                                    <div class="label_text">Show Searches</div>
                                    <label class="kr-sg-toggle">                                       
                                        <input type="checkbox" [(ngModel)]="searchObject.searchInteractionsConfig.showSearchesEnabled">
                                        <div class="slider"><span class="enabled">Yes</span><span class="disabled">No</span></div>
                                    </label>
                               
                                    <div class="group-radiobutton mt-3">
                                        <div class="kr-sg-radiobutton">
                                            <input id="radio-22" name="radio" class="radio-custom" type="radio" value="frequent" [checked]="searchObject.searchInteractionsConfig.showSearches=='Frequent'" [(ngModel)]="searchObject.searchInteractionsConfig.showSearches" [disabled]="!searchObject.searchInteractionsConfig.showSearchesEnabled">
                                            <label for="radio-22" class="radio-custom-label">Frequent</label>
                                        </div>
                                        <div class="kr-sg-radiobutton">
                                            <input id="radio-23" name="radio" class="radio-custom" type="radio" value="recent" [checked]="searchObject.searchInteractionsConfig.showSearches=='recent'" [(ngModel)]="searchObject.searchInteractionsConfig.showSearches" [disabled]="!searchObject.searchInteractionsConfig.showSearchesEnabled">
                                            <label for="radio-23" class="radio-custom-label">Recent</label>
                                        </div>
                                    </div>                                                          
                                </div>
                                <div class="border-with-padding">                                                                     
                                    <div class="label_text">Autocomplete</div>
                                    <label class="kr-sg-toggle">                                       
                                        <input type="checkbox" [(ngModel)]="searchObject.searchInteractionsConfig.autocompleteOpt">
                                        <div class="slider"><span class="enabled">Yes</span><span class="disabled">No</span></div>
                                    </label>
                                </div>
                                <div class="border-with-padding" *ngFor="let data of suggestions">                                    
                                    <div class="label_text">{{data.name}}</div>
                                    <div class="range-slider">
                                        <app-range-slider-search-experience [customClass]='"querySlider"' [allData]='data.sliderObj' (valueEvent)="valueEvent(data.name,$event)"></app-range-slider-search-experience>
                                    </div>
                                </div>
        
                                <!-- <div class="border-with-padding group-checkbox">
                                    <div class="heading-title">Feedback Experience </div>
                                    <div class="kr-sg-checkbox">
                                        <input id="checkbox_grpb" class="checkbox-custom" type="checkbox" [checked]="searchObject.searchInteractionsConfig.feedbackExperience.resultLevel" [(ngModel)]="searchObject.searchInteractionsConfig.feedbackExperience.resultLevel">
                                        <label for="checkbox_grpb" class="checkbox-custom-label">Result Level</label>
                                    </div>
                                    <div class="kr-sg-checkbox">
                                        <input id="checkbox_grpc" class="checkbox-custom" type="checkbox" disabled>
                                        <label for="checkbox_grpc" class="checkbox-custom-label">Query Level</label>
                                    </div>
                                </div> -->
                            </div>
                        </div>                        
                    </div>                                       
                </div>             
            </div>
          </div>
        </perfect-scrollbar>
    </div>
    <div class="footer-sec">
        <button class="kr-sg-button-secondary btn_lg" (click)="nextTab('pre');closeAllBoxs('all');" *ngIf="selectedTab!='experience'">Previous</button>
        <button class="kr-sg-button-primary btn_lg" (click)="nextTab('nex');closeAllBoxs('all');" *ngIf="selectedTab!=='interactions'">Next</button>     
        <button class="kr-sg-button-primary btn_lg" (click)="saveSearchExperience();closeAllBoxs('all');" *ngIf="selectedTab=='interactions'">Done</button>    
    </div>
</div>

<!--Show model for preview-->

<kr-modal  modalType="center" modalClass="sliderComponent modal_popups_ guide-seach-experience" #guideModalPop id="guideModalPop">
    <div class="modal-header">
      <div class="title">Guide > <span *ngIf="searchObject.searchExperienceConfig.searchBarPosition == 'bottom'">Bottom Up Experience</span><span *ngIf="searchObject.searchExperienceConfig.searchBarPosition == 'top'">Top Down Experience</span></div>
      <div class="close_icon" (click)="closeGuidePopup()"><img  src="assets/icons/modal-close.svg"></div>
    </div>
    <perfect-scrollbar class="perfect-scroll-modal-body">
      <div class="modal-body" *ngIf="searchObject.searchExperienceConfig.searchBarPosition == 'bottom'">
        <div class="main-title">Hi {{userName}},</div>
        <div class="main-title">It is recommended to go through this guide before customizing interactions.</div>
        <div class="guide-data">
            <div class="layer-img">
                <img src="assets/icons/search-experience/guide/sdk-img.svg">
            </div>
            <div class="left-content">
                <img src="assets/icons/search-experience/guide/recent-search.svg">
            </div>
            <div class="right-content">
                <div class="title">Choose <span class="hilightedcolor">Frequent Search</span> or <span class="hilightedcolor">Recent Search</span></div>
                <div class="desc-text">to enable the user to see their Frequently or recently searched queries. These queries will appear as cards in the search window as soon as the user puts their cursor in the search bar </div>
            </div>
        </div>

        <div class="autocomplete-guide">
            <div class="layer-img">
                <img src="assets/icons/search-experience/guide/sdk-automatic.svg">
            </div>
            <div class="left-content">
                <div class="title"><span class="hilightedcolor">Autocomplete</span></div>
                <div class="desc-text">Saves the time and effort for the users by predicting the rest of the word as the user is typing</div>
            </div>
            <div class="right-content">
                <img src="assets/icons/search-experience/guide/autocomplete.svg">
            </div>
        </div>

        <div class="query-sugestion-guide">
            <div class="layer-img">
                <img src="assets/icons/search-experience/guide/suggestion-sdk.svg">
            </div>
            <div class="left-content">
                <img src="assets/icons/search-experience/guide/querysuggestion.svg">
            </div>
            <div class="right-content">
                <div class="title"><span class="hilightedcolor">Query Suggestions</span></div>
                <div class="desc-text">reduces users time to search a query by providing suggestions which help users to enter long queries or select a query as they type.</div>
                <div class="info-text">Here, the no. of <span>query suggestions</span> are <span>set to two</span> and <span>Live search</span> is <span>set to zero</span></div>
            </div>
        </div>


        <div class="livesearch-guide">
            <div class="layer-img">
                <img src="assets/icons/search-experience/guide/live-search-sdk.svg">
            </div>
            <div class="left-content">
                <div class="title"><span class="hilightedcolor">Live Search</span></div>
                <div class="desc-text">enhances users search experience by showing the results while entering the query and allows the user to see search results without needing to redirect to the results page</div>
                <div class="info-text">Here, the no. of <span>query suggestions</span> are <span>set to zero</span></div>
            </div>
            <div class="right-content">
                <img src="assets/icons/search-experience/guide/livesearch-suggestion.svg">
            </div>
        </div>


        <div class="live-search-sugg-guide-data">
            <div class="layer-img">
                <img src="assets/icons/search-experience/guide/liveasech-query.svg">
            </div>
            <div class="left-content">
                <img src="assets/icons/search-experience/guide/livesearch-suggestion.svg">
            </div>
            <div class="right-content">
                <div class="title"><span class="hilightedcolor">Live Search & Query Suggestions</span></div>
                <div class="desc-text">when both are enabled the live search results appear at the background of the query suggestions and the user can scroll to browse the results.</div>
                <div class="info-text">Here, the no. of <span>query suggestions</span> and <span>live search</span>, both are enabled and <span>set to three</span></div>
            </div>
        </div>

        <div class="done-all">
            <img src="assets/icons/search-experience/guide/handthumb.svg">
            <span class="title">Thats all, Lets Customize now.</span>
        </div>

      </div>


      <div class="modal-body topdown-guide" *ngIf="searchObject.searchExperienceConfig.searchBarPosition == 'top'">
        <div class="main-title">Hi {{userName}},</div>
        <div class="main-title">It is recommended to go through this guide before customizing interactions.</div>
        <div class="guide-data">
            <div class="layer-img">
                <img src="assets/icons/search-experience/guide/topdown/recent-search-sdk.svg">
            </div>
            <div class="left-content">
                <img src="assets/icons/search-experience/guide/topdown/recentsearch.svg">
            </div>
            <div class="right-content">
                <div class="title">Choose <span class="hilightedcolor">Frequent Search</span> or <span class="hilightedcolor">Recent Search</span></div>
                <div class="desc-text">to enable the user to see their Frequently or recently searched queries. These queries will appear as cards in the search window as soon as the user puts their cursor in the search bar </div>
            </div>
        </div>

        <div class="autocomplete-guide">
            <div class="layer-img">
                <img src="assets/icons/search-experience/guide/topdown/autocomplete-sdk.svg">               
            </div>
            <div class="left-content">
                <div class="title"><span class="hilightedcolor">Autocomplete</span></div>
                <div class="desc-text">Saves the time and effort for the users by predicting the rest of the word as the user is typing</div>
            </div>
            <div class="right-content">
                <img src="assets/icons/search-experience/guide/topdown/autocomplete.svg">
            </div>
        </div>

        <div class="query-sugestion-guide">
            <div class="layer-img">
                <img src="assets/icons/search-experience/guide/topdown/query-sdk.svg">
            </div>
            <div class="left-content">
                <img src="assets/icons/search-experience/guide/topdown/query-suggestion.svg">
            </div>
            <div class="right-content">
                <div class="title"><span class="hilightedcolor">Query Suggestions</span></div>
                <div class="desc-text">reduces users time to search a query by providing suggestions which help users to enter long queries or select a query as they type.</div>
                <div class="info-text">Here, the no. of <span>query suggestions</span> are <span>set to three</span> and <span>Live search</span> is <span>set to zero</span></div>
            </div>
        </div>


        <div class="livesearch-guide">
            <div class="layer-img">
                <img src="assets/icons/search-experience/guide/topdown/livesearch-sdk.svg">
            </div>
            <div class="left-content">
                <div class="title"><span class="hilightedcolor">Live Search</span></div>
                <div class="desc-text">enhances users search experience by showing the results while entering the query and allows the user to see search results without needing to redirect to the results page</div>
                <div class="info-text">Here, the no. of <span>query suggestions</span> are <span>set to zero</span></div>
            </div>
            <div class="right-content">
                <img src="assets/icons/search-experience/guide/topdown/liveseach.svg">
            </div>
        </div>


        <div class="live-search-sugg-guide-data">
            <div class="layer-img">
                <img src="assets/icons/search-experience/guide/topdown/livesearch-query-sdk.svg">
            </div>
            <div class="left-content">
                <img src="assets/icons/search-experience/guide/topdown/livesearch-query.svg">
            </div>
            <div class="right-content">
                <div class="title"><span class="hilightedcolor">Live Search & Query Suggestions</span></div>
                <div class="desc-text">when both are enabled the live search results appear at the background of the query suggestions and the user can scroll to browse the results.</div>
                <div class="info-text">Here, the no. of <span>query suggestions</span> and <span>live search</span>, both are enabled and <span>set to three</span> and <span>five respectively</span></div>
            </div>
        </div>

        <div class="done-all">
            <img src="assets/icons/search-experience/guide/handthumb.svg">
            <span class="title">Thats all, Lets Customize now.</span>
        </div>

      </div>
    </perfect-scrollbar>
  </kr-modal> 