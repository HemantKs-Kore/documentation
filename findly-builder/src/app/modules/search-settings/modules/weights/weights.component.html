<div class="contentContainer">
    <div class="mainLoadingSpinner" *ngIf="loadingContent">
        <mat-spinner diameter="18" strokeWidth="2"></mat-spinner>
        <span class="please-wait-message">{{'sa_please_wait'| translate}}</span>
    </div>
    <ng-container *ngIf="!loadingContent">
        <app-useronboarding-journey [componentType]='componentType'></app-useronboarding-journey>
        <div class="weights-header">
            <div class="header-sec-stopwords">
                <div class="title">{{'weights_Weights'| translate}}
                    <span class="module-topic" tooltipClass="tooltip-global-" [container]="'body'" ngbTooltip="{{'sa_topic_guide'| translate}}"
     placement="right-center"(click)="openUserMetaTagsSlider()">
                        <i class="si-topic-guide-1"></i>
                    </span>
                </div>
                <div class="restore_text" *ngIf="weights.length">
                    <div class="lable_text mr-3" id="btn_restoreWeight" (click)="restoreWeights();">
                        <!-- <img src="assets/icons/return_black.svg"> -->
                        <i class="si-re-fresh icon-refresh"></i>
                        {{'weights_reset_to_default' | translate}}
                    </div>
                    <span class="clock_img d-none">
                        <img src="assets/icons/clock.svg">
                    </span>
                    <div class="lable_text mr-4 add-searchable" id="btn_openWeight" (click)="openAddNewWeight()">
                        <!-- <img src="assets/icons/editor/plus-add.svg" class="mr-2"> -->
                        <i class="si-add-plus icon-add-plus"></i>
                        {{'weights_add_searchable_field'| translate}}
                    </div>
                </div>
            </div>
            <div class="header-desc">Assign weights to the individual feilds to fine tune the search results. Fields assigned with higher weights are searched first relative to the fields with lower weights</div>
        </div>

         <!-- DATA TABLE START HERE -->
        <div class="kr-sg-data-table mb-0">
            <section class="table-content">
                <div class="table_header row m-0">
                    <div class="col_ col-4 title d-flex align-items-center justify-content-start">
                        <span (click)="sortValues('fieldName')" class="d-flex align-items-center flex-column mr-2 filter-sort">
                            <i class="si-chev-up icon-up"></i>
                            <i class="si-chev-down icon-down"></i>
                        </span>
                        {{"weights_field_name" | translate}}
                    </div>
                    <div class="col_ col-4 title d-flex align-items-center justify-content-start">
                        <span class="d-flex align-items-center flex-column mr-2 filter-sort">
                            <i class="si-chev-up icon-up"></i>
                            <i class="si-chev-down icon-down"></i>
                        </span>
                        {{"weights_type" | translate}} 
                    </div>
                    <div class="col_ col-4 title d-flex align-items-center justify-content-start">
                        <span class="d-flex align-items-center flex-column mr-2 filter-sort">
                            <i (click)="sortValues('dsc')" class="si-chev-up icon-up"></i>
                            <i (click)="sortValues('asc')" class="si-chev-down icon-down"></i>
                        </span>
                        {{"weights_weights_caps" | translate}} 
                    </div>
                </div>
                <perfect-scrollbar class="scroll-table-allowRow">
                    <div class="empty-weights" *ngIf="!weights.length">
                        <img src="assets/images/icons/empty_ill.svg">
                        <div class="heading">{{'weights_no_rankable_field_available'| translate}}</div>
                        <div class="desc">{{'weights_please_add_rankable_field'| translate}}</div>
                    </div>
                    <div class="content-body" *ngFor="let weightModal of weightsList; let i = index ; trackBy: prepereWeights">
                        <div class="col-4 name text-truncate">
                            <div class="text-truncate">{{weightModal.fieldName}} </div>
                        </div>
                        <div class="col-4 desc text-truncate">
                            <span>{{weightModal.fieldDataType}}</span>
                        </div>
                        <div class="col-4 sliderContainer">
                            <div class="range-slider">
                                <app-range-slider [customClass]='"weightsSlider"' [allData]='weightModal.sliderObj'
                                    (valueEvent)="valueEvent($event,weightModal)"></app-range-slider>
                            </div>
                            <div class="sliderVal">{{weightModal?.sliderObj.default}}</div>
                            <div class="action_links">
                                <span class="actions-links" id="btn_deleteWeight" ngbTooltip='Delete'
                                    [container]="'body'" (click)="deleteWeightPopUp(weightModal,$event,i)">
                                    <!-- <img class="action_icon" src="assets/icons/delete.svg"> -->
                                    <i class="si-delete1 icon-delete"></i>
                                </span>
                            </div>
                        </div>
                    </div>
                </perfect-scrollbar>
            </section>
        </div>
    </ng-container>
    <!-- DATA TABLE ENDS HERE -->
</div>
<kr-modal modalType="center" modalClass="addWeightModalComponent modal_popups_" #addDditWeightPop>
    <div class="modal-header">
        <div class="title">{{currentEditIndex>-1?'Edit':'Add'}} Searchable Field</div>
        <div class="close_icon"><img id="btn_closeWeightModal" (click)="closeAddEditWeight()"
                src="assets/icons/modal-close.svg"></div>
    </div>
    <perfect-scrollbar class="perfect-scroll-modal-body" #perfectScroll>
        <div class="modal-body textAlignLeft" *ngIf="addEditWeighObj">
            <div class="search_block" *ngIf="!addEditWeighObj._id">
                <div class="row m-0 align-items-center">
                    <div class="kr-sg-dropdowns col-12 p-0" ngbDropdown>
                        <div class="dropdown dropdown-open">
                            <button [ngClass]="{'error':submitted && !search_FieldName.length}" class="dropdown-toggle dropdown-input" id="dropdownBasic1" data-toggle="dropdown"
                                ngbDropdownAnchor (click)="clearcontentSrcW()">

                                {{addEditWeighObj.fieldName? addEditWeighObj.fieldName :"Choose field"}}

                            </button>
                            <ul class="dropdown-menu content-menu faq-filter-add col-12 mw-100"
                                style="overflow-y: hidden;" ngbDropdownMenu>
                                <li class="search-box" ngbDropdownItem>
                                    <input id="searchBoxIdW" autocomplete="off" type="text" placeholder="Search"
                                        class="seach-input" autofocus [(ngModel)]="search_FieldName" />
                                </li>
                                <perfect-scrollbar class="scroll-search-field h-178">
                                    <ng-container>
                                        <li ngbDropdownItem
                                            *ngFor="let suggesition of fieldsList | filter : [search_FieldName, 'fieldName']"
                                            (click)="addEditWeighObj.fieldName=suggesition.fieldName;selectedField(suggesition)"
                                            [ngClass]="{'highlight':addEditWeighObj.fieldName == suggesition}">
                                            {{ suggesition.fieldName}}
                                        </li>
                                        <li *ngIf="fieldsList && fieldsList.length===0">{{"weights_please_add" | translate}}</li>
                                    </ng-container>
                                </perfect-scrollbar>
                            </ul>
                        </div>
                    </div>

                </div>
            </div>
            <div class="kr-sg-input-text mb-25" *ngIf="addEditWeighObj._id"
                [ngClass]="{'disabled': addEditWeighObj._id}">
                <div class="label-text">{{'weights_weight_name'| translate}}</div>
                <input type="text" id="input_weightsName" maxlength="60" [(ngModel)]="addEditWeighObj.name"
                    placeholder="Placeholder text" class="input-text">
            </div>
            <div class="kr-sg-input-text">
                <div class="label-text">{{'weights_set_weight'| translate}}</div>
                <div class="d-flex m-0 slider_sec">
                    <div class="range_slider add-searchable-feild-range-slider">
                        <app-range-slider [customClass]='"weightsSlider"' [allData]='addEditWeighObj.sliderObj'
                            (valueEvent)="valueEvent($event,addEditWeighObj,i)"></app-range-slider>
                    </div>
                    <div class="sliderVal">{{addEditWeighObj.sliderObj.default}}</div>
                </div>
            </div>
        </div>
    </perfect-scrollbar>
    <div class="modal-footer text-left" *ngIf="addEditWeighObj">
        <button id="btn_weightsSave" type="button" class="kr-sg-button-danger btn_lg float-left"
            *ngIf="currentEditIndex>-1"
            (click)="deleteWeightPopUp(addEditWeighObj,$event,currentEditIndex)">{{'sa_delete' | translate}}</button>
        <button id="btn_weightseditSave" type="button" class="kr-sg-button-primary btn_lg mr-0 float-right"
            (click)="addEditWeight(addEditWeighObj)">{{(currentEditIndex>-1)?'Update':'Add'}}</button>
        <!-- [disabled]="!addEditWeighObj.name" -->
        <button id="btn_weightsClose" type="button" class="kr-sg-button-secondary btn_lg float-right"
            (click)="closeAddEditWeight()">{{'sa_cancel'| translate}}</button>
    </div>
</kr-modal>